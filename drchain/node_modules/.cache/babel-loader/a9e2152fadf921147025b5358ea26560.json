{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport createReactClass from 'create-react-class';\nimport Trigger from 'rc-trigger';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport classNames from 'classnames';\nimport { connect } from 'mini-store';\nimport SubPopupMenu from './SubPopupMenu';\nimport placements from './placements';\nimport { noop, loopMenuItemRecusively, getMenuIdFromSubMenuEventKey } from './util';\nvar guid = 0;\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nvar updateDefaultActiveFirst = function updateDefaultActiveFirst(store, eventKey, defaultActiveFirst) {\n  var _extends2;\n\n  var menuId = getMenuIdFromSubMenuEventKey(eventKey);\n  var state = store.getState();\n  store.setState({\n    defaultActiveFirst: _extends({}, state.defaultActiveFirst, (_extends2 = {}, _extends2[menuId] = defaultActiveFirst, _extends2))\n  });\n};\n\nvar SubMenu = createReactClass({\n  displayName: 'SubMenu',\n  propTypes: {\n    parentMenu: PropTypes.object,\n    title: PropTypes.node,\n    children: PropTypes.any,\n    selectedKeys: PropTypes.array,\n    openKeys: PropTypes.array,\n    onClick: PropTypes.func,\n    onOpenChange: PropTypes.func,\n    rootPrefixCls: PropTypes.string,\n    eventKey: PropTypes.string,\n    multiple: PropTypes.bool,\n    active: PropTypes.bool,\n    // TODO: remove\n    onItemHover: PropTypes.func,\n    onSelect: PropTypes.func,\n    triggerSubMenuAction: PropTypes.string,\n    onDeselect: PropTypes.func,\n    onDestroy: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onTitleMouseEnter: PropTypes.func,\n    onTitleMouseLeave: PropTypes.func,\n    onTitleClick: PropTypes.func,\n    isOpen: PropTypes.bool\n  },\n  isRootMenu: false,\n  getDefaultProps: function getDefaultProps() {\n    return {\n      onMouseEnter: noop,\n      onMouseLeave: noop,\n      onTitleMouseEnter: noop,\n      onTitleMouseLeave: noop,\n      onTitleClick: noop,\n      title: ''\n    };\n  },\n  getInitialState: function getInitialState() {\n    this.isSubMenu = 1;\n    var props = this.props;\n    var store = props.store;\n    var eventKey = props.eventKey;\n    var defaultActiveFirst = store.getState().defaultActiveFirst;\n    var value = false;\n\n    if (defaultActiveFirst) {\n      value = defaultActiveFirst[eventKey];\n    }\n\n    updateDefaultActiveFirst(store, eventKey, value);\n    return {};\n  },\n  componentDidMount: function componentDidMount() {\n    this.componentDidUpdate(); // invoke customized ref to expose component to mixin\n\n    if (this.props.manualRef) {\n      this.props.manualRef(this);\n    }\n  },\n  componentDidUpdate: function componentDidUpdate() {\n    var _this = this;\n\n    var _props = this.props,\n        mode = _props.mode,\n        parentMenu = _props.parentMenu;\n\n    if (mode !== 'horizontal' || !parentMenu.isRootMenu || !this.props.isOpen) {\n      return;\n    }\n\n    this.minWidthTimeout = setTimeout(function () {\n      if (!_this.subMenuTitle || !_this.menuInstance) {\n        return;\n      }\n\n      var popupMenu = ReactDOM.findDOMNode(_this.menuInstance);\n\n      if (popupMenu.offsetWidth >= _this.subMenuTitle.offsetWidth) {\n        return;\n      }\n\n      popupMenu.style.minWidth = _this.subMenuTitle.offsetWidth + 'px';\n    }, 0);\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    var _props2 = this.props,\n        onDestroy = _props2.onDestroy,\n        eventKey = _props2.eventKey;\n\n    if (onDestroy) {\n      onDestroy(eventKey);\n    }\n\n    if (this.minWidthTimeout) {\n      clearTimeout(this.minWidthTimeout);\n    }\n\n    if (this.mouseenterTimeout) {\n      clearTimeout(this.mouseenterTimeout);\n    }\n  },\n  onDestroy: function onDestroy(key) {\n    this.props.onDestroy(key);\n  },\n  onKeyDown: function onKeyDown(e) {\n    var keyCode = e.keyCode;\n    var menu = this.menuInstance;\n    var _props3 = this.props,\n        isOpen = _props3.isOpen,\n        store = _props3.store;\n\n    if (keyCode === KeyCode.ENTER) {\n      this.onTitleClick(e);\n      updateDefaultActiveFirst(store, this.props.eventKey, true);\n      return true;\n    }\n\n    if (keyCode === KeyCode.RIGHT) {\n      if (isOpen) {\n        menu.onKeyDown(e);\n      } else {\n        this.triggerOpenChange(true); // need to update current menu's defaultActiveFirst value\n\n        updateDefaultActiveFirst(store, this.props.eventKey, true);\n      }\n\n      return true;\n    }\n\n    if (keyCode === KeyCode.LEFT) {\n      var handled = void 0;\n\n      if (isOpen) {\n        handled = menu.onKeyDown(e);\n      } else {\n        return undefined;\n      }\n\n      if (!handled) {\n        this.triggerOpenChange(false);\n        handled = true;\n      }\n\n      return handled;\n    }\n\n    if (isOpen && (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN)) {\n      return menu.onKeyDown(e);\n    }\n  },\n  onOpenChange: function onOpenChange(e) {\n    this.props.onOpenChange(e);\n  },\n  onPopupVisibleChange: function onPopupVisibleChange(visible) {\n    this.triggerOpenChange(visible, visible ? 'mouseenter' : 'mouseleave');\n  },\n  onMouseEnter: function onMouseEnter(e) {\n    var _props4 = this.props,\n        key = _props4.eventKey,\n        onMouseEnter = _props4.onMouseEnter,\n        store = _props4.store;\n    updateDefaultActiveFirst(store, this.props.eventKey, false);\n    onMouseEnter({\n      key: key,\n      domEvent: e\n    });\n  },\n  onMouseLeave: function onMouseLeave(e) {\n    var _props5 = this.props,\n        parentMenu = _props5.parentMenu,\n        eventKey = _props5.eventKey,\n        onMouseLeave = _props5.onMouseLeave;\n    parentMenu.subMenuInstance = this;\n    onMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  },\n  onTitleMouseEnter: function onTitleMouseEnter(domEvent) {\n    var _props6 = this.props,\n        key = _props6.eventKey,\n        onItemHover = _props6.onItemHover,\n        onTitleMouseEnter = _props6.onTitleMouseEnter;\n    onItemHover({\n      key: key,\n      hover: true\n    });\n    onTitleMouseEnter({\n      key: key,\n      domEvent: domEvent\n    });\n  },\n  onTitleMouseLeave: function onTitleMouseLeave(e) {\n    var _props7 = this.props,\n        parentMenu = _props7.parentMenu,\n        eventKey = _props7.eventKey,\n        onItemHover = _props7.onItemHover,\n        onTitleMouseLeave = _props7.onTitleMouseLeave;\n    parentMenu.subMenuInstance = this;\n    onItemHover({\n      key: eventKey,\n      hover: false\n    });\n    onTitleMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  },\n  onTitleClick: function onTitleClick(e) {\n    var props = this.props;\n    props.onTitleClick({\n      key: props.eventKey,\n      domEvent: e\n    });\n\n    if (props.triggerSubMenuAction === 'hover') {\n      return;\n    }\n\n    this.triggerOpenChange(!props.isOpen, 'click');\n    updateDefaultActiveFirst(props.store, this.props.eventKey, false);\n  },\n  onSubMenuClick: function onSubMenuClick(info) {\n    this.props.onClick(this.addKeyPath(info));\n  },\n  onSelect: function onSelect(info) {\n    this.props.onSelect(info);\n  },\n  onDeselect: function onDeselect(info) {\n    this.props.onDeselect(info);\n  },\n  getPrefixCls: function getPrefixCls() {\n    return this.props.rootPrefixCls + '-submenu';\n  },\n  getActiveClassName: function getActiveClassName() {\n    return this.getPrefixCls() + '-active';\n  },\n  getDisabledClassName: function getDisabledClassName() {\n    return this.getPrefixCls() + '-disabled';\n  },\n  getSelectedClassName: function getSelectedClassName() {\n    return this.getPrefixCls() + '-selected';\n  },\n  getOpenClassName: function getOpenClassName() {\n    return this.props.rootPrefixCls + '-submenu-open';\n  },\n  saveMenuInstance: function saveMenuInstance(c) {\n    // children menu instance\n    this.menuInstance = c;\n  },\n  addKeyPath: function addKeyPath(info) {\n    return _extends({}, info, {\n      keyPath: (info.keyPath || []).concat(this.props.eventKey)\n    });\n  },\n  triggerOpenChange: function triggerOpenChange(open, type) {\n    var _this2 = this;\n\n    var key = this.props.eventKey;\n\n    var openChange = function openChange() {\n      _this2.onOpenChange({\n        key: key,\n        item: _this2,\n        trigger: type,\n        open: open\n      });\n    };\n\n    if (type === 'mouseenter') {\n      // make sure mouseenter happen after other menu item's mouseleave\n      this.mouseenterTimeout = setTimeout(function () {\n        openChange();\n      }, 0);\n    } else {\n      openChange();\n    }\n  },\n  isChildrenSelected: function isChildrenSelected() {\n    var ret = {\n      find: false\n    };\n    loopMenuItemRecusively(this.props.children, this.props.selectedKeys, ret);\n    return ret.find;\n  },\n  isOpen: function isOpen() {\n    return this.props.openKeys.indexOf(this.props.eventKey) !== -1;\n  },\n  renderChildren: function renderChildren(children) {\n    var props = this.props;\n    var baseProps = {\n      mode: props.mode === 'horizontal' ? 'vertical' : props.mode,\n      visible: this.props.isOpen,\n      level: props.level + 1,\n      inlineIndent: props.inlineIndent,\n      focusable: false,\n      onClick: this.onSubMenuClick,\n      onSelect: this.onSelect,\n      onDeselect: this.onDeselect,\n      onDestroy: this.onDestroy,\n      selectedKeys: props.selectedKeys,\n      eventKey: props.eventKey + '-menu-',\n      openKeys: props.openKeys,\n      openTransitionName: props.openTransitionName,\n      openAnimation: props.openAnimation,\n      onOpenChange: this.onOpenChange,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      triggerSubMenuAction: props.triggerSubMenuAction,\n      defaultActiveFirst: props.store.getState().defaultActiveFirst[getMenuIdFromSubMenuEventKey(props.eventKey)],\n      multiple: props.multiple,\n      prefixCls: props.rootPrefixCls,\n      id: this._menuId,\n      manualRef: this.saveMenuInstance\n    };\n    return React.createElement(SubPopupMenu, baseProps, children);\n  },\n  saveSubMenuTitle: function saveSubMenuTitle(subMenuTitle) {\n    this.subMenuTitle = subMenuTitle;\n  },\n  render: function render() {\n    var _classNames;\n\n    var props = this.props;\n    var isOpen = props.isOpen;\n    var prefixCls = this.getPrefixCls();\n    var isInlineMode = props.mode === 'inline';\n    var className = classNames(prefixCls, prefixCls + '-' + props.mode, (_classNames = {}, _classNames[props.className] = !!props.className, _classNames[this.getOpenClassName()] = isOpen, _classNames[this.getActiveClassName()] = props.active || isOpen && !isInlineMode, _classNames[this.getDisabledClassName()] = props.disabled, _classNames[this.getSelectedClassName()] = this.isChildrenSelected(), _classNames));\n\n    if (!this._menuId) {\n      if (props.eventKey) {\n        this._menuId = props.eventKey + '$Menu';\n      } else {\n        this._menuId = '$__$' + ++guid + '$Menu';\n      }\n    }\n\n    var mouseEvents = {};\n    var titleClickEvents = {};\n    var titleMouseEvents = {};\n\n    if (!props.disabled) {\n      mouseEvents = {\n        onMouseLeave: this.onMouseLeave,\n        onMouseEnter: this.onMouseEnter\n      }; // only works in title, not outer li\n\n      titleClickEvents = {\n        onClick: this.onTitleClick\n      };\n      titleMouseEvents = {\n        onMouseEnter: this.onTitleMouseEnter,\n        onMouseLeave: this.onTitleMouseLeave\n      };\n    }\n\n    var style = {};\n\n    if (isInlineMode) {\n      style.paddingLeft = props.inlineIndent * props.level;\n    }\n\n    var title = React.createElement('div', _extends({\n      ref: this.saveSubMenuTitle,\n      style: style,\n      className: prefixCls + '-title'\n    }, titleMouseEvents, titleClickEvents, {\n      'aria-expanded': isOpen,\n      'aria-owns': this._menuId,\n      'aria-haspopup': 'true',\n      title: typeof props.title === 'string' ? props.title : undefined\n    }), props.title, React.createElement('i', {\n      className: prefixCls + '-arrow'\n    }));\n    var children = this.renderChildren(props.children);\n    var getPopupContainer = props.parentMenu.isRootMenu ? props.parentMenu.props.getPopupContainer : function (triggerNode) {\n      return triggerNode.parentNode;\n    };\n    var popupPlacement = popupPlacementMap[props.mode];\n    var popupClassName = props.mode === 'inline' ? '' : props.popupClassName;\n    return React.createElement('li', _extends({}, mouseEvents, {\n      className: className,\n      style: props.style\n    }), isInlineMode && title, isInlineMode && children, !isInlineMode && React.createElement(Trigger, {\n      prefixCls: prefixCls,\n      popupClassName: prefixCls + '-popup ' + popupClassName,\n      getPopupContainer: getPopupContainer,\n      builtinPlacements: placements,\n      popupPlacement: popupPlacement,\n      popupVisible: isOpen,\n      popup: children,\n      action: props.disabled ? [] : [props.triggerSubMenuAction],\n      mouseEnterDelay: props.subMenuOpenDelay,\n      mouseLeaveDelay: props.subMenuCloseDelay,\n      onPopupVisibleChange: this.onPopupVisibleChange,\n      forceRender: props.forceSubMenuRender\n    }, title));\n  }\n});\nSubMenu.isSubMenu = 1;\nexport default connect(function (_ref, _ref2) {\n  var openKeys = _ref.openKeys,\n      activeKey = _ref.activeKey;\n  var eventKey = _ref2.eventKey,\n      subMenuKey = _ref2.subMenuKey;\n  return {\n    isOpen: openKeys.indexOf(eventKey) > -1,\n    active: activeKey[subMenuKey] === eventKey\n  };\n})(SubMenu);","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/rc-menu/es/SubMenu.js"],"names":["_extends","React","ReactDOM","PropTypes","createReactClass","Trigger","KeyCode","classNames","connect","SubPopupMenu","placements","noop","loopMenuItemRecusively","getMenuIdFromSubMenuEventKey","guid","popupPlacementMap","horizontal","vertical","updateDefaultActiveFirst","store","eventKey","defaultActiveFirst","_extends2","menuId","state","getState","setState","SubMenu","displayName","propTypes","parentMenu","object","title","node","children","any","selectedKeys","array","openKeys","onClick","func","onOpenChange","rootPrefixCls","string","multiple","bool","active","onItemHover","onSelect","triggerSubMenuAction","onDeselect","onDestroy","onMouseEnter","onMouseLeave","onTitleMouseEnter","onTitleMouseLeave","onTitleClick","isOpen","isRootMenu","getDefaultProps","getInitialState","isSubMenu","props","value","componentDidMount","componentDidUpdate","manualRef","_this","_props","mode","minWidthTimeout","setTimeout","subMenuTitle","menuInstance","popupMenu","findDOMNode","offsetWidth","style","minWidth","componentWillUnmount","_props2","clearTimeout","mouseenterTimeout","key","onKeyDown","e","keyCode","menu","_props3","ENTER","RIGHT","triggerOpenChange","LEFT","handled","undefined","UP","DOWN","onPopupVisibleChange","visible","_props4","domEvent","_props5","subMenuInstance","_props6","hover","_props7","onSubMenuClick","info","addKeyPath","getPrefixCls","getActiveClassName","getDisabledClassName","getSelectedClassName","getOpenClassName","saveMenuInstance","c","keyPath","concat","open","type","_this2","openChange","item","trigger","isChildrenSelected","ret","find","indexOf","renderChildren","baseProps","level","inlineIndent","focusable","openTransitionName","openAnimation","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","prefixCls","id","_menuId","createElement","saveSubMenuTitle","render","_classNames","isInlineMode","className","disabled","mouseEvents","titleClickEvents","titleMouseEvents","paddingLeft","ref","getPopupContainer","triggerNode","parentNode","popupPlacement","popupClassName","builtinPlacements","popupVisible","popup","action","mouseEnterDelay","mouseLeaveDelay","forceRender","_ref","_ref2","activeKey","subMenuKey"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport createReactClass from 'create-react-class';\nimport Trigger from 'rc-trigger';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport classNames from 'classnames';\nimport { connect } from 'mini-store';\nimport SubPopupMenu from './SubPopupMenu';\nimport placements from './placements';\nimport { noop, loopMenuItemRecusively, getMenuIdFromSubMenuEventKey } from './util';\n\nvar guid = 0;\n\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nvar updateDefaultActiveFirst = function updateDefaultActiveFirst(store, eventKey, defaultActiveFirst) {\n  var _extends2;\n\n  var menuId = getMenuIdFromSubMenuEventKey(eventKey);\n  var state = store.getState();\n  store.setState({\n    defaultActiveFirst: _extends({}, state.defaultActiveFirst, (_extends2 = {}, _extends2[menuId] = defaultActiveFirst, _extends2))\n  });\n};\n\nvar SubMenu = createReactClass({\n  displayName: 'SubMenu',\n\n  propTypes: {\n    parentMenu: PropTypes.object,\n    title: PropTypes.node,\n    children: PropTypes.any,\n    selectedKeys: PropTypes.array,\n    openKeys: PropTypes.array,\n    onClick: PropTypes.func,\n    onOpenChange: PropTypes.func,\n    rootPrefixCls: PropTypes.string,\n    eventKey: PropTypes.string,\n    multiple: PropTypes.bool,\n    active: PropTypes.bool, // TODO: remove\n    onItemHover: PropTypes.func,\n    onSelect: PropTypes.func,\n    triggerSubMenuAction: PropTypes.string,\n    onDeselect: PropTypes.func,\n    onDestroy: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onTitleMouseEnter: PropTypes.func,\n    onTitleMouseLeave: PropTypes.func,\n    onTitleClick: PropTypes.func,\n    isOpen: PropTypes.bool\n  },\n\n  isRootMenu: false,\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      onMouseEnter: noop,\n      onMouseLeave: noop,\n      onTitleMouseEnter: noop,\n      onTitleMouseLeave: noop,\n      onTitleClick: noop,\n      title: ''\n    };\n  },\n  getInitialState: function getInitialState() {\n    this.isSubMenu = 1;\n    var props = this.props;\n    var store = props.store;\n    var eventKey = props.eventKey;\n    var defaultActiveFirst = store.getState().defaultActiveFirst;\n    var value = false;\n\n    if (defaultActiveFirst) {\n      value = defaultActiveFirst[eventKey];\n    }\n\n    updateDefaultActiveFirst(store, eventKey, value);\n\n    return {};\n  },\n  componentDidMount: function componentDidMount() {\n    this.componentDidUpdate();\n    // invoke customized ref to expose component to mixin\n    if (this.props.manualRef) {\n      this.props.manualRef(this);\n    }\n  },\n  componentDidUpdate: function componentDidUpdate() {\n    var _this = this;\n\n    var _props = this.props,\n        mode = _props.mode,\n        parentMenu = _props.parentMenu;\n\n    if (mode !== 'horizontal' || !parentMenu.isRootMenu || !this.props.isOpen) {\n      return;\n    }\n    this.minWidthTimeout = setTimeout(function () {\n      if (!_this.subMenuTitle || !_this.menuInstance) {\n        return;\n      }\n      var popupMenu = ReactDOM.findDOMNode(_this.menuInstance);\n      if (popupMenu.offsetWidth >= _this.subMenuTitle.offsetWidth) {\n        return;\n      }\n      popupMenu.style.minWidth = _this.subMenuTitle.offsetWidth + 'px';\n    }, 0);\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    var _props2 = this.props,\n        onDestroy = _props2.onDestroy,\n        eventKey = _props2.eventKey;\n\n    if (onDestroy) {\n      onDestroy(eventKey);\n    }\n    if (this.minWidthTimeout) {\n      clearTimeout(this.minWidthTimeout);\n    }\n    if (this.mouseenterTimeout) {\n      clearTimeout(this.mouseenterTimeout);\n    }\n  },\n  onDestroy: function onDestroy(key) {\n    this.props.onDestroy(key);\n  },\n  onKeyDown: function onKeyDown(e) {\n    var keyCode = e.keyCode;\n    var menu = this.menuInstance;\n    var _props3 = this.props,\n        isOpen = _props3.isOpen,\n        store = _props3.store;\n\n\n    if (keyCode === KeyCode.ENTER) {\n      this.onTitleClick(e);\n      updateDefaultActiveFirst(store, this.props.eventKey, true);\n      return true;\n    }\n\n    if (keyCode === KeyCode.RIGHT) {\n      if (isOpen) {\n        menu.onKeyDown(e);\n      } else {\n        this.triggerOpenChange(true);\n        // need to update current menu's defaultActiveFirst value\n        updateDefaultActiveFirst(store, this.props.eventKey, true);\n      }\n      return true;\n    }\n    if (keyCode === KeyCode.LEFT) {\n      var handled = void 0;\n      if (isOpen) {\n        handled = menu.onKeyDown(e);\n      } else {\n        return undefined;\n      }\n      if (!handled) {\n        this.triggerOpenChange(false);\n        handled = true;\n      }\n      return handled;\n    }\n\n    if (isOpen && (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN)) {\n      return menu.onKeyDown(e);\n    }\n  },\n  onOpenChange: function onOpenChange(e) {\n    this.props.onOpenChange(e);\n  },\n  onPopupVisibleChange: function onPopupVisibleChange(visible) {\n    this.triggerOpenChange(visible, visible ? 'mouseenter' : 'mouseleave');\n  },\n  onMouseEnter: function onMouseEnter(e) {\n    var _props4 = this.props,\n        key = _props4.eventKey,\n        onMouseEnter = _props4.onMouseEnter,\n        store = _props4.store;\n\n    updateDefaultActiveFirst(store, this.props.eventKey, false);\n    onMouseEnter({\n      key: key,\n      domEvent: e\n    });\n  },\n  onMouseLeave: function onMouseLeave(e) {\n    var _props5 = this.props,\n        parentMenu = _props5.parentMenu,\n        eventKey = _props5.eventKey,\n        onMouseLeave = _props5.onMouseLeave;\n\n    parentMenu.subMenuInstance = this;\n    onMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  },\n  onTitleMouseEnter: function onTitleMouseEnter(domEvent) {\n    var _props6 = this.props,\n        key = _props6.eventKey,\n        onItemHover = _props6.onItemHover,\n        onTitleMouseEnter = _props6.onTitleMouseEnter;\n\n    onItemHover({\n      key: key,\n      hover: true\n    });\n    onTitleMouseEnter({\n      key: key,\n      domEvent: domEvent\n    });\n  },\n  onTitleMouseLeave: function onTitleMouseLeave(e) {\n    var _props7 = this.props,\n        parentMenu = _props7.parentMenu,\n        eventKey = _props7.eventKey,\n        onItemHover = _props7.onItemHover,\n        onTitleMouseLeave = _props7.onTitleMouseLeave;\n\n    parentMenu.subMenuInstance = this;\n    onItemHover({\n      key: eventKey,\n      hover: false\n    });\n    onTitleMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  },\n  onTitleClick: function onTitleClick(e) {\n    var props = this.props;\n\n    props.onTitleClick({\n      key: props.eventKey,\n      domEvent: e\n    });\n    if (props.triggerSubMenuAction === 'hover') {\n      return;\n    }\n    this.triggerOpenChange(!props.isOpen, 'click');\n    updateDefaultActiveFirst(props.store, this.props.eventKey, false);\n  },\n  onSubMenuClick: function onSubMenuClick(info) {\n    this.props.onClick(this.addKeyPath(info));\n  },\n  onSelect: function onSelect(info) {\n    this.props.onSelect(info);\n  },\n  onDeselect: function onDeselect(info) {\n    this.props.onDeselect(info);\n  },\n  getPrefixCls: function getPrefixCls() {\n    return this.props.rootPrefixCls + '-submenu';\n  },\n  getActiveClassName: function getActiveClassName() {\n    return this.getPrefixCls() + '-active';\n  },\n  getDisabledClassName: function getDisabledClassName() {\n    return this.getPrefixCls() + '-disabled';\n  },\n  getSelectedClassName: function getSelectedClassName() {\n    return this.getPrefixCls() + '-selected';\n  },\n  getOpenClassName: function getOpenClassName() {\n    return this.props.rootPrefixCls + '-submenu-open';\n  },\n  saveMenuInstance: function saveMenuInstance(c) {\n    // children menu instance\n    this.menuInstance = c;\n  },\n  addKeyPath: function addKeyPath(info) {\n    return _extends({}, info, {\n      keyPath: (info.keyPath || []).concat(this.props.eventKey)\n    });\n  },\n  triggerOpenChange: function triggerOpenChange(open, type) {\n    var _this2 = this;\n\n    var key = this.props.eventKey;\n    var openChange = function openChange() {\n      _this2.onOpenChange({\n        key: key,\n        item: _this2,\n        trigger: type,\n        open: open\n      });\n    };\n    if (type === 'mouseenter') {\n      // make sure mouseenter happen after other menu item's mouseleave\n      this.mouseenterTimeout = setTimeout(function () {\n        openChange();\n      }, 0);\n    } else {\n      openChange();\n    }\n  },\n  isChildrenSelected: function isChildrenSelected() {\n    var ret = { find: false };\n    loopMenuItemRecusively(this.props.children, this.props.selectedKeys, ret);\n    return ret.find;\n  },\n  isOpen: function isOpen() {\n    return this.props.openKeys.indexOf(this.props.eventKey) !== -1;\n  },\n  renderChildren: function renderChildren(children) {\n    var props = this.props;\n    var baseProps = {\n      mode: props.mode === 'horizontal' ? 'vertical' : props.mode,\n      visible: this.props.isOpen,\n      level: props.level + 1,\n      inlineIndent: props.inlineIndent,\n      focusable: false,\n      onClick: this.onSubMenuClick,\n      onSelect: this.onSelect,\n      onDeselect: this.onDeselect,\n      onDestroy: this.onDestroy,\n      selectedKeys: props.selectedKeys,\n      eventKey: props.eventKey + '-menu-',\n      openKeys: props.openKeys,\n      openTransitionName: props.openTransitionName,\n      openAnimation: props.openAnimation,\n      onOpenChange: this.onOpenChange,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      triggerSubMenuAction: props.triggerSubMenuAction,\n      defaultActiveFirst: props.store.getState().defaultActiveFirst[getMenuIdFromSubMenuEventKey(props.eventKey)],\n      multiple: props.multiple,\n      prefixCls: props.rootPrefixCls,\n      id: this._menuId,\n      manualRef: this.saveMenuInstance\n    };\n    return React.createElement(\n      SubPopupMenu,\n      baseProps,\n      children\n    );\n  },\n  saveSubMenuTitle: function saveSubMenuTitle(subMenuTitle) {\n    this.subMenuTitle = subMenuTitle;\n  },\n  render: function render() {\n    var _classNames;\n\n    var props = this.props;\n    var isOpen = props.isOpen;\n    var prefixCls = this.getPrefixCls();\n    var isInlineMode = props.mode === 'inline';\n    var className = classNames(prefixCls, prefixCls + '-' + props.mode, (_classNames = {}, _classNames[props.className] = !!props.className, _classNames[this.getOpenClassName()] = isOpen, _classNames[this.getActiveClassName()] = props.active || isOpen && !isInlineMode, _classNames[this.getDisabledClassName()] = props.disabled, _classNames[this.getSelectedClassName()] = this.isChildrenSelected(), _classNames));\n\n    if (!this._menuId) {\n      if (props.eventKey) {\n        this._menuId = props.eventKey + '$Menu';\n      } else {\n        this._menuId = '$__$' + ++guid + '$Menu';\n      }\n    }\n\n    var mouseEvents = {};\n    var titleClickEvents = {};\n    var titleMouseEvents = {};\n    if (!props.disabled) {\n      mouseEvents = {\n        onMouseLeave: this.onMouseLeave,\n        onMouseEnter: this.onMouseEnter\n      };\n\n      // only works in title, not outer li\n      titleClickEvents = {\n        onClick: this.onTitleClick\n      };\n      titleMouseEvents = {\n        onMouseEnter: this.onTitleMouseEnter,\n        onMouseLeave: this.onTitleMouseLeave\n      };\n    }\n\n    var style = {};\n    if (isInlineMode) {\n      style.paddingLeft = props.inlineIndent * props.level;\n    }\n    var title = React.createElement(\n      'div',\n      _extends({\n        ref: this.saveSubMenuTitle,\n        style: style,\n        className: prefixCls + '-title'\n      }, titleMouseEvents, titleClickEvents, {\n        'aria-expanded': isOpen,\n        'aria-owns': this._menuId,\n        'aria-haspopup': 'true',\n        title: typeof props.title === 'string' ? props.title : undefined\n      }),\n      props.title,\n      React.createElement('i', { className: prefixCls + '-arrow' })\n    );\n    var children = this.renderChildren(props.children);\n\n    var getPopupContainer = props.parentMenu.isRootMenu ? props.parentMenu.props.getPopupContainer : function (triggerNode) {\n      return triggerNode.parentNode;\n    };\n    var popupPlacement = popupPlacementMap[props.mode];\n    var popupClassName = props.mode === 'inline' ? '' : props.popupClassName;\n\n    return React.createElement(\n      'li',\n      _extends({}, mouseEvents, { className: className, style: props.style }),\n      isInlineMode && title,\n      isInlineMode && children,\n      !isInlineMode && React.createElement(\n        Trigger,\n        {\n          prefixCls: prefixCls,\n          popupClassName: prefixCls + '-popup ' + popupClassName,\n          getPopupContainer: getPopupContainer,\n          builtinPlacements: placements,\n          popupPlacement: popupPlacement,\n          popupVisible: isOpen,\n          popup: children,\n          action: props.disabled ? [] : [props.triggerSubMenuAction],\n          mouseEnterDelay: props.subMenuOpenDelay,\n          mouseLeaveDelay: props.subMenuCloseDelay,\n          onPopupVisibleChange: this.onPopupVisibleChange,\n          forceRender: props.forceSubMenuRender\n        },\n        title\n      )\n    );\n  }\n});\n\nSubMenu.isSubMenu = 1;\n\nexport default connect(function (_ref, _ref2) {\n  var openKeys = _ref.openKeys,\n      activeKey = _ref.activeKey;\n  var eventKey = _ref2.eventKey,\n      subMenuKey = _ref2.subMenuKey;\n  return {\n    isOpen: openKeys.indexOf(eventKey) > -1,\n    active: activeKey[subMenuKey] === eventKey\n  };\n})(SubMenu);"]},"metadata":{},"sourceType":"module"}