{"ast":null,"code":"import _typeof from 'babel-runtime/helpers/typeof';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport RcTable from 'rc-table';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Pagination from '../pagination';\nimport Icon from '../icon';\nimport Spin from '../spin';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale-provider/default';\nimport warning from '../_util/warning';\nimport FilterDropdown from './filterDropdown';\nimport createStore from './createStore';\nimport SelectionBox from './SelectionBox';\nimport SelectionCheckboxAll from './SelectionCheckboxAll';\nimport Column from './Column';\nimport ColumnGroup from './ColumnGroup';\nimport createBodyRow from './createBodyRow';\nimport { flatArray, treeMap, flatFilter, normalizeColumns } from './util';\n\nfunction noop() {}\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n\n  if (e.nativeEvent.stopImmediatePropagation) {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n}\n\nvar defaultPagination = {\n  onChange: noop,\n  onShowSizeChange: noop\n};\n/**\n * Avoid creating new object, so that parent component's shouldComponentUpdate\n * can works appropriately。\n */\n\nvar emptyObject = {};\n\nvar Table = function (_React$Component) {\n  _inherits(Table, _React$Component);\n\n  function Table(props) {\n    _classCallCheck(this, Table);\n\n    var _this = _possibleConstructorReturn(this, (Table.__proto__ || Object.getPrototypeOf(Table)).call(this, props));\n\n    _this.getCheckboxPropsByItem = function (item, index) {\n      var _this$props$rowSelect = _this.props.rowSelection,\n          rowSelection = _this$props$rowSelect === undefined ? {} : _this$props$rowSelect;\n\n      if (!rowSelection.getCheckboxProps) {\n        return {};\n      }\n\n      var key = _this.getRecordKey(item, index); // Cache checkboxProps\n\n\n      if (!_this.CheckboxPropsCache[key]) {\n        _this.CheckboxPropsCache[key] = rowSelection.getCheckboxProps(item);\n      }\n\n      return _this.CheckboxPropsCache[key];\n    };\n\n    _this.onRow = function (record, index) {\n      var _this$props = _this.props,\n          onRow = _this$props.onRow,\n          prefixCls = _this$props.prefixCls;\n      var custom = onRow ? onRow(record, index) : {};\n      return _extends({}, custom, {\n        prefixCls: prefixCls,\n        store: _this.store,\n        rowKey: _this.getRecordKey(record, index)\n      });\n    };\n\n    _this.handleFilter = function (column, nextFilters) {\n      var props = _this.props;\n\n      var pagination = _extends({}, _this.state.pagination);\n\n      var filters = _extends({}, _this.state.filters, _defineProperty({}, _this.getColumnKey(column), nextFilters)); // Remove filters not in current columns\n\n\n      var currentColumnKeys = [];\n      treeMap(_this.columns, function (c) {\n        if (!c.children) {\n          currentColumnKeys.push(_this.getColumnKey(c));\n        }\n      });\n      Object.keys(filters).forEach(function (columnKey) {\n        if (currentColumnKeys.indexOf(columnKey) < 0) {\n          delete filters[columnKey];\n        }\n      });\n\n      if (props.pagination) {\n        // Reset current prop\n        pagination.current = 1;\n        pagination.onChange(pagination.current);\n      }\n\n      var newState = {\n        pagination: pagination,\n        filters: {}\n      };\n\n      var filtersToSetState = _extends({}, filters); // Remove filters which is controlled\n\n\n      _this.getFilteredValueColumns().forEach(function (col) {\n        var columnKey = _this.getColumnKey(col);\n\n        if (columnKey) {\n          delete filtersToSetState[columnKey];\n        }\n      });\n\n      if (Object.keys(filtersToSetState).length > 0) {\n        newState.filters = filtersToSetState;\n      } // Controlled current prop will not respond user interaction\n\n\n      if (_typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = _extends({}, pagination, {\n          current: _this.state.pagination.current\n        });\n      }\n\n      _this.setState(newState, function () {\n        _this.store.setState({\n          selectionDirty: false\n        });\n\n        var onChange = _this.props.onChange;\n\n        if (onChange) {\n          onChange.apply(null, _this.prepareParamsArguments(_extends({}, _this.state, {\n            selectionDirty: false,\n            filters: filters,\n            pagination: pagination\n          })));\n        }\n      });\n    };\n\n    _this.handleSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var nativeEvent = e.nativeEvent;\n      var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var key = _this.getRecordKey(record, rowIndex);\n\n      if (checked) {\n        selectedRowKeys.push(_this.getRecordKey(record, rowIndex));\n      } else {\n        selectedRowKeys = selectedRowKeys.filter(function (i) {\n          return key !== i;\n        });\n      }\n\n      _this.store.setState({\n        selectionDirty: true\n      });\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: 'onSelect',\n        record: record,\n        checked: checked,\n        changeRowKeys: void 0,\n        nativeEvent: nativeEvent\n      });\n    };\n\n    _this.handleRadioSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var nativeEvent = e.nativeEvent;\n      var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var key = _this.getRecordKey(record, rowIndex);\n\n      selectedRowKeys = [key];\n\n      _this.store.setState({\n        selectionDirty: true\n      });\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: 'onSelect',\n        record: record,\n        checked: checked,\n        changeRowKeys: void 0,\n        nativeEvent: nativeEvent\n      });\n    };\n\n    _this.handleSelectRow = function (selectionKey, index, onSelectFunc) {\n      var data = _this.getFlatCurrentPageData();\n\n      var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var changeableRowKeys = data.filter(function (item, i) {\n        return !_this.getCheckboxPropsByItem(item, i).disabled;\n      }).map(function (item, i) {\n        return _this.getRecordKey(item, i);\n      });\n      var changeRowKeys = [];\n      var selectWay = '';\n      var checked = void 0; // handle default selection\n\n      switch (selectionKey) {\n        case 'all':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = true;\n          break;\n\n        case 'removeAll':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) >= 0) {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = false;\n          break;\n\n        case 'invert':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n            } else {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n            }\n\n            changeRowKeys.push(key);\n            selectWay = 'onSelectInvert';\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      _this.store.setState({\n        selectionDirty: true\n      }); // when select custom selection, callback selections[n].onSelect\n\n\n      var rowSelection = _this.props.rowSelection;\n      var customSelectionStartIndex = 2;\n\n      if (rowSelection && rowSelection.hideDefaultSelections) {\n        customSelectionStartIndex = 0;\n      }\n\n      if (index >= customSelectionStartIndex && typeof onSelectFunc === 'function') {\n        return onSelectFunc(changeableRowKeys);\n      }\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: selectWay,\n        checked: checked,\n        changeRowKeys: changeRowKeys\n      });\n    };\n\n    _this.handlePageChange = function (current) {\n      for (var _len = arguments.length, otherArguments = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        otherArguments[_key - 1] = arguments[_key];\n      }\n\n      var props = _this.props;\n\n      var pagination = _extends({}, _this.state.pagination);\n\n      if (current) {\n        pagination.current = current;\n      } else {\n        pagination.current = pagination.current || 1;\n      }\n\n      pagination.onChange.apply(pagination, [pagination.current].concat(otherArguments));\n      var newState = {\n        pagination: pagination\n      }; // Controlled current prop will not respond user interaction\n\n      if (props.pagination && _typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = _extends({}, pagination, {\n          current: _this.state.pagination.current\n        });\n      }\n\n      _this.setState(newState);\n\n      _this.store.setState({\n        selectionDirty: false\n      });\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments(_extends({}, _this.state, {\n          selectionDirty: false,\n          pagination: pagination\n        })));\n      }\n    };\n\n    _this.renderSelectionBox = function (type) {\n      return function (_, record, index) {\n        var rowIndex = _this.getRecordKey(record, index); // 从 1 开始\n\n\n        var props = _this.getCheckboxPropsByItem(record, index);\n\n        var handleChange = function handleChange(e) {\n          type === 'radio' ? _this.handleRadioSelect(record, rowIndex, e) : _this.handleSelect(record, rowIndex, e);\n        };\n\n        return React.createElement('span', {\n          onClick: stopPropagation\n        }, React.createElement(SelectionBox, _extends({\n          type: type,\n          store: _this.store,\n          rowIndex: rowIndex,\n          onChange: handleChange,\n          defaultSelection: _this.getDefaultSelection()\n        }, props)));\n      };\n    };\n\n    _this.getRecordKey = function (record, index) {\n      var rowKey = _this.props.rowKey;\n      var recordKey = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];\n      warning(recordKey !== undefined, 'Each record in dataSource of table should have a unique `key` prop, or set `rowKey` to an unique primary key,' + 'see https://u.ant.design/table-row-key');\n      return recordKey === undefined ? index : recordKey;\n    };\n\n    _this.getPopupContainer = function () {\n      return ReactDOM.findDOMNode(_this);\n    };\n\n    _this.handleShowSizeChange = function (current, pageSize) {\n      var pagination = _this.state.pagination;\n      pagination.onShowSizeChange(current, pageSize);\n\n      var nextPagination = _extends({}, pagination, {\n        pageSize: pageSize,\n        current: current\n      });\n\n      _this.setState({\n        pagination: nextPagination\n      });\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments(_extends({}, _this.state, {\n          pagination: nextPagination\n        })));\n      }\n    };\n\n    _this.renderTable = function (contextLocale, loading) {\n      var _classNames;\n\n      var locale = _extends({}, contextLocale, _this.props.locale);\n\n      var _a = _this.props,\n          style = _a.style,\n          className = _a.className,\n          prefixCls = _a.prefixCls,\n          showHeader = _a.showHeader,\n          restProps = __rest(_a, [\"style\", \"className\", \"prefixCls\", \"showHeader\"]);\n\n      var data = _this.getCurrentPageData();\n\n      var expandIconAsCell = _this.props.expandedRowRender && _this.props.expandIconAsCell !== false;\n      var classString = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-' + _this.props.size, true), _defineProperty(_classNames, prefixCls + '-bordered', _this.props.bordered), _defineProperty(_classNames, prefixCls + '-empty', !data.length), _defineProperty(_classNames, prefixCls + '-without-column-header', !showHeader), _classNames));\n\n      var columns = _this.renderRowSelection(locale);\n\n      columns = _this.renderColumnsDropdown(columns, locale);\n      columns = columns.map(function (column, i) {\n        var newColumn = _extends({}, column);\n\n        newColumn.key = _this.getColumnKey(newColumn, i);\n        return newColumn;\n      });\n      var expandIconColumnIndex = columns[0] && columns[0].key === 'selection-column' ? 1 : 0;\n\n      if ('expandIconColumnIndex' in restProps) {\n        expandIconColumnIndex = restProps.expandIconColumnIndex;\n      }\n\n      return React.createElement(RcTable, _extends({\n        key: 'table'\n      }, restProps, {\n        onRow: _this.onRow,\n        components: _this.components,\n        prefixCls: prefixCls,\n        data: data,\n        columns: columns,\n        showHeader: showHeader,\n        className: classString,\n        expandIconColumnIndex: expandIconColumnIndex,\n        expandIconAsCell: expandIconAsCell,\n        emptyText: !loading.spinning && locale.emptyText\n      }));\n    };\n\n    warning(!('columnsPageRange' in props || 'columnsPageSize' in props), '`columnsPageRange` and `columnsPageSize` are removed, please use ' + 'fixed columns instead, see: https://u.ant.design/fixed-columns.');\n    _this.columns = props.columns || normalizeColumns(props.children);\n\n    _this.createComponents(props.components);\n\n    _this.state = _extends({}, _this.getDefaultSortOrder(_this.columns), {\n      // 减少状态\n      filters: _this.getFiltersFromColumns(),\n      pagination: _this.getDefaultPagination(props)\n    });\n    _this.CheckboxPropsCache = {};\n    _this.store = createStore({\n      selectedRowKeys: (props.rowSelection || {}).selectedRowKeys || [],\n      selectionDirty: false\n    });\n    return _this;\n  }\n\n  _createClass(Table, [{\n    key: 'getDefaultSelection',\n    value: function getDefaultSelection() {\n      var _this2 = this;\n\n      var _props$rowSelection = this.props.rowSelection,\n          rowSelection = _props$rowSelection === undefined ? {} : _props$rowSelection;\n\n      if (!rowSelection.getCheckboxProps) {\n        return [];\n      }\n\n      return this.getFlatData().filter(function (item, rowIndex) {\n        return _this2.getCheckboxPropsByItem(item, rowIndex).defaultChecked;\n      }).map(function (record, rowIndex) {\n        return _this2.getRecordKey(record, rowIndex);\n      });\n    }\n  }, {\n    key: 'getDefaultPagination',\n    value: function getDefaultPagination(props) {\n      var pagination = props.pagination || {};\n      return this.hasPagination(props) ? _extends({}, defaultPagination, pagination, {\n        current: pagination.defaultCurrent || pagination.current || 1,\n        pageSize: pagination.defaultPageSize || pagination.pageSize || 10\n      }) : {};\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      this.columns = nextProps.columns || normalizeColumns(nextProps.children);\n\n      if ('pagination' in nextProps || 'pagination' in this.props) {\n        this.setState(function (previousState) {\n          var newPagination = _extends({}, defaultPagination, previousState.pagination, nextProps.pagination);\n\n          newPagination.current = newPagination.current || 1;\n          newPagination.pageSize = newPagination.pageSize || 10;\n          return {\n            pagination: nextProps.pagination !== false ? newPagination : emptyObject\n          };\n        });\n      }\n\n      if (nextProps.rowSelection && 'selectedRowKeys' in nextProps.rowSelection) {\n        this.store.setState({\n          selectedRowKeys: nextProps.rowSelection.selectedRowKeys || []\n        });\n      }\n\n      if ('dataSource' in nextProps && nextProps.dataSource !== this.props.dataSource) {\n        this.store.setState({\n          selectionDirty: false\n        });\n      } // https://github.com/ant-design/ant-design/issues/10133\n\n\n      this.CheckboxPropsCache = {};\n\n      if (this.getSortOrderColumns(this.columns).length > 0) {\n        var sortState = this.getSortStateFromColumns(this.columns);\n\n        if (sortState.sortColumn !== this.state.sortColumn || sortState.sortOrder !== this.state.sortOrder) {\n          this.setState(sortState);\n        }\n      }\n\n      var filteredValueColumns = this.getFilteredValueColumns(this.columns);\n\n      if (filteredValueColumns.length > 0) {\n        var filtersFromColumns = this.getFiltersFromColumns(this.columns);\n\n        var newFilters = _extends({}, this.state.filters);\n\n        Object.keys(filtersFromColumns).forEach(function (key) {\n          newFilters[key] = filtersFromColumns[key];\n        });\n\n        if (this.isFiltersChanged(newFilters)) {\n          this.setState({\n            filters: newFilters\n          });\n        }\n      }\n\n      this.createComponents(nextProps.components, this.props.components);\n    }\n  }, {\n    key: 'setSelectedRowKeys',\n    value: function setSelectedRowKeys(selectedRowKeys, _ref) {\n      var _this3 = this;\n\n      var selectWay = _ref.selectWay,\n          record = _ref.record,\n          checked = _ref.checked,\n          changeRowKeys = _ref.changeRowKeys,\n          nativeEvent = _ref.nativeEvent;\n      var _props$rowSelection2 = this.props.rowSelection,\n          rowSelection = _props$rowSelection2 === undefined ? {} : _props$rowSelection2;\n\n      if (rowSelection && !('selectedRowKeys' in rowSelection)) {\n        this.store.setState({\n          selectedRowKeys: selectedRowKeys\n        });\n      }\n\n      var data = this.getFlatData();\n\n      if (!rowSelection.onChange && !rowSelection[selectWay]) {\n        return;\n      }\n\n      var selectedRows = data.filter(function (row, i) {\n        return selectedRowKeys.indexOf(_this3.getRecordKey(row, i)) >= 0;\n      });\n\n      if (rowSelection.onChange) {\n        rowSelection.onChange(selectedRowKeys, selectedRows);\n      }\n\n      if (selectWay === 'onSelect' && rowSelection.onSelect) {\n        rowSelection.onSelect(record, checked, selectedRows, nativeEvent);\n      } else if (selectWay === 'onSelectAll' && rowSelection.onSelectAll) {\n        var changeRows = data.filter(function (row, i) {\n          return changeRowKeys.indexOf(_this3.getRecordKey(row, i)) >= 0;\n        });\n        rowSelection.onSelectAll(checked, selectedRows, changeRows);\n      } else if (selectWay === 'onSelectInvert' && rowSelection.onSelectInvert) {\n        rowSelection.onSelectInvert(selectedRowKeys);\n      }\n    }\n  }, {\n    key: 'hasPagination',\n    value: function hasPagination(props) {\n      return (props || this.props).pagination !== false;\n    }\n  }, {\n    key: 'isFiltersChanged',\n    value: function isFiltersChanged(filters) {\n      var _this4 = this;\n\n      var filtersChanged = false;\n\n      if (Object.keys(filters).length !== Object.keys(this.state.filters).length) {\n        filtersChanged = true;\n      } else {\n        Object.keys(filters).forEach(function (columnKey) {\n          if (filters[columnKey] !== _this4.state.filters[columnKey]) {\n            filtersChanged = true;\n          }\n        });\n      }\n\n      return filtersChanged;\n    }\n  }, {\n    key: 'getSortOrderColumns',\n    value: function getSortOrderColumns(columns) {\n      return flatFilter(columns || this.columns || [], function (column) {\n        return 'sortOrder' in column;\n      });\n    }\n  }, {\n    key: 'getFilteredValueColumns',\n    value: function getFilteredValueColumns(columns) {\n      return flatFilter(columns || this.columns || [], function (column) {\n        return typeof column.filteredValue !== 'undefined';\n      });\n    }\n  }, {\n    key: 'getFiltersFromColumns',\n    value: function getFiltersFromColumns(columns) {\n      var _this5 = this;\n\n      var filters = {};\n      this.getFilteredValueColumns(columns).forEach(function (col) {\n        var colKey = _this5.getColumnKey(col);\n\n        filters[colKey] = col.filteredValue;\n      });\n      return filters;\n    }\n  }, {\n    key: 'getDefaultSortOrder',\n    value: function getDefaultSortOrder(columns) {\n      var definedSortState = this.getSortStateFromColumns(columns);\n      var defaultSortedColumn = flatFilter(columns || [], function (column) {\n        return column.defaultSortOrder != null;\n      })[0];\n\n      if (defaultSortedColumn && !definedSortState.sortColumn) {\n        return {\n          sortColumn: defaultSortedColumn,\n          sortOrder: defaultSortedColumn.defaultSortOrder\n        };\n      }\n\n      return definedSortState;\n    }\n  }, {\n    key: 'getSortStateFromColumns',\n    value: function getSortStateFromColumns(columns) {\n      // return first column which sortOrder is not falsy\n      var sortedColumn = this.getSortOrderColumns(columns).filter(function (col) {\n        return col.sortOrder;\n      })[0];\n\n      if (sortedColumn) {\n        return {\n          sortColumn: sortedColumn,\n          sortOrder: sortedColumn.sortOrder\n        };\n      }\n\n      return {\n        sortColumn: null,\n        sortOrder: null\n      };\n    }\n  }, {\n    key: 'getSorterFn',\n    value: function getSorterFn() {\n      var _state = this.state,\n          sortOrder = _state.sortOrder,\n          sortColumn = _state.sortColumn;\n\n      if (!sortOrder || !sortColumn || typeof sortColumn.sorter !== 'function') {\n        return;\n      }\n\n      return function (a, b) {\n        var result = sortColumn.sorter(a, b);\n\n        if (result !== 0) {\n          return sortOrder === 'descend' ? -result : result;\n        }\n\n        return 0;\n      };\n    }\n  }, {\n    key: 'toggleSortOrder',\n    value: function toggleSortOrder(order, column) {\n      var _state2 = this.state,\n          sortColumn = _state2.sortColumn,\n          sortOrder = _state2.sortOrder; // 只同时允许一列进行排序，否则会导致排序顺序的逻辑问题\n\n      var isSortColumn = this.isSortColumn(column);\n\n      if (!isSortColumn) {\n        // 当前列未排序\n        sortOrder = order;\n        sortColumn = column;\n      } else {\n        // 当前列已排序\n        if (sortOrder === order) {\n          // 切换为未排序状态\n          sortOrder = '';\n          sortColumn = null;\n        } else {\n          // 切换为排序状态\n          sortOrder = order;\n        }\n      }\n\n      var newState = {\n        sortOrder: sortOrder,\n        sortColumn: sortColumn\n      }; // Controlled\n\n      if (this.getSortOrderColumns().length === 0) {\n        this.setState(newState);\n      }\n\n      var onChange = this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, this.prepareParamsArguments(_extends({}, this.state, newState)));\n      }\n    }\n  }, {\n    key: 'renderRowSelection',\n    value: function renderRowSelection(locale) {\n      var _this6 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          rowSelection = _props.rowSelection;\n      var columns = this.columns.concat();\n\n      if (rowSelection) {\n        var data = this.getFlatCurrentPageData().filter(function (item, index) {\n          if (rowSelection.getCheckboxProps) {\n            return !_this6.getCheckboxPropsByItem(item, index).disabled;\n          }\n\n          return true;\n        });\n        var selectionColumnClass = classNames(prefixCls + '-selection-column', _defineProperty({}, prefixCls + '-selection-column-custom', rowSelection.selections));\n        var selectionColumn = {\n          key: 'selection-column',\n          render: this.renderSelectionBox(rowSelection.type),\n          className: selectionColumnClass,\n          fixed: rowSelection.fixed,\n          width: rowSelection.columnWidth\n        };\n\n        if (rowSelection.type !== 'radio') {\n          var checkboxAllDisabled = data.every(function (item, index) {\n            return _this6.getCheckboxPropsByItem(item, index).disabled;\n          });\n          selectionColumn.title = React.createElement(SelectionCheckboxAll, {\n            store: this.store,\n            locale: locale,\n            data: data,\n            getCheckboxPropsByItem: this.getCheckboxPropsByItem,\n            getRecordKey: this.getRecordKey,\n            disabled: checkboxAllDisabled,\n            prefixCls: prefixCls,\n            onSelect: this.handleSelectRow,\n            selections: rowSelection.selections,\n            hideDefaultSelections: rowSelection.hideDefaultSelections,\n            getPopupContainer: this.getPopupContainer\n          });\n        }\n\n        if ('fixed' in rowSelection) {\n          selectionColumn.fixed = rowSelection.fixed;\n        } else if (columns.some(function (column) {\n          return column.fixed === 'left' || column.fixed === true;\n        })) {\n          selectionColumn.fixed = 'left';\n        }\n\n        if (columns[0] && columns[0].key === 'selection-column') {\n          columns[0] = selectionColumn;\n        } else {\n          columns.unshift(selectionColumn);\n        }\n      }\n\n      return columns;\n    }\n  }, {\n    key: 'getColumnKey',\n    value: function getColumnKey(column, index) {\n      return column.key || column.dataIndex || index;\n    }\n  }, {\n    key: 'getMaxCurrent',\n    value: function getMaxCurrent(total) {\n      var _state$pagination = this.state.pagination,\n          current = _state$pagination.current,\n          pageSize = _state$pagination.pageSize;\n\n      if ((current - 1) * pageSize >= total) {\n        return Math.floor((total - 1) / pageSize) + 1;\n      }\n\n      return current;\n    }\n  }, {\n    key: 'isSortColumn',\n    value: function isSortColumn(column) {\n      var sortColumn = this.state.sortColumn;\n\n      if (!column || !sortColumn) {\n        return false;\n      }\n\n      return this.getColumnKey(sortColumn) === this.getColumnKey(column);\n    }\n  }, {\n    key: 'renderColumnsDropdown',\n    value: function renderColumnsDropdown(columns, locale) {\n      var _this7 = this;\n\n      var _props2 = this.props,\n          prefixCls = _props2.prefixCls,\n          dropdownPrefixCls = _props2.dropdownPrefixCls;\n      var sortOrder = this.state.sortOrder;\n      return treeMap(columns, function (originColumn, i) {\n        var column = _extends({}, originColumn);\n\n        var key = _this7.getColumnKey(column, i);\n\n        var filterDropdown = void 0;\n        var sortButton = void 0;\n\n        if (column.filters && column.filters.length > 0 || column.filterDropdown) {\n          var colFilters = _this7.state.filters[key] || [];\n          filterDropdown = React.createElement(FilterDropdown, {\n            locale: locale,\n            column: column,\n            selectedKeys: colFilters,\n            confirmFilter: _this7.handleFilter,\n            prefixCls: prefixCls + '-filter',\n            dropdownPrefixCls: dropdownPrefixCls || 'ant-dropdown',\n            getPopupContainer: _this7.getPopupContainer\n          });\n        }\n\n        if (column.sorter) {\n          var isSortColumn = _this7.isSortColumn(column);\n\n          if (isSortColumn) {\n            column.className = classNames(column.className, _defineProperty({}, prefixCls + '-column-sort', sortOrder));\n          }\n\n          var isAscend = isSortColumn && sortOrder === 'ascend';\n          var isDescend = isSortColumn && sortOrder === 'descend';\n          sortButton = React.createElement('div', {\n            className: prefixCls + '-column-sorter'\n          }, React.createElement('span', {\n            className: prefixCls + '-column-sorter-up ' + (isAscend ? 'on' : 'off'),\n            title: '\\u2191',\n            onClick: function onClick() {\n              return _this7.toggleSortOrder('ascend', column);\n            }\n          }, React.createElement(Icon, {\n            type: 'caret-up'\n          })), React.createElement('span', {\n            className: prefixCls + '-column-sorter-down ' + (isDescend ? 'on' : 'off'),\n            title: '\\u2193',\n            onClick: function onClick() {\n              return _this7.toggleSortOrder('descend', column);\n            }\n          }, React.createElement(Icon, {\n            type: 'caret-down'\n          })));\n        }\n\n        column.title = React.createElement('span', {\n          key: key\n        }, column.title, sortButton, filterDropdown);\n\n        if (sortButton || filterDropdown) {\n          column.className = classNames(prefixCls + '-column-has-filters', column.className);\n        }\n\n        return column;\n      });\n    }\n  }, {\n    key: 'renderPagination',\n    value: function renderPagination(paginationPosition) {\n      // 强制不需要分页\n      if (!this.hasPagination()) {\n        return null;\n      }\n\n      var size = 'default';\n      var pagination = this.state.pagination;\n\n      if (pagination.size) {\n        size = pagination.size;\n      } else if (this.props.size === 'middle' || this.props.size === 'small') {\n        size = 'small';\n      }\n\n      var position = pagination.position || 'bottom';\n      var total = pagination.total || this.getLocalData().length;\n      return total > 0 && (position === paginationPosition || position === 'both') ? React.createElement(Pagination, _extends({\n        key: 'pagination-' + paginationPosition\n      }, pagination, {\n        className: classNames(pagination.className, this.props.prefixCls + '-pagination'),\n        onChange: this.handlePageChange,\n        total: total,\n        size: size,\n        current: this.getMaxCurrent(total),\n        onShowSizeChange: this.handleShowSizeChange\n      })) : null;\n    } // Get pagination, filters, sorter\n\n  }, {\n    key: 'prepareParamsArguments',\n    value: function prepareParamsArguments(state) {\n      var pagination = _extends({}, state.pagination); // remove useless handle function in Table.onChange\n\n\n      delete pagination.onChange;\n      delete pagination.onShowSizeChange;\n      var filters = state.filters;\n      var sorter = {};\n\n      if (state.sortColumn && state.sortOrder) {\n        sorter.column = state.sortColumn;\n        sorter.order = state.sortOrder;\n        sorter.field = state.sortColumn.dataIndex;\n        sorter.columnKey = this.getColumnKey(state.sortColumn);\n      }\n\n      return [pagination, filters, sorter];\n    }\n  }, {\n    key: 'findColumn',\n    value: function findColumn(myKey) {\n      var _this8 = this;\n\n      var column = void 0;\n      treeMap(this.columns, function (c) {\n        if (_this8.getColumnKey(c) === myKey) {\n          column = c;\n        }\n      });\n      return column;\n    }\n  }, {\n    key: 'getCurrentPageData',\n    value: function getCurrentPageData() {\n      var data = this.getLocalData();\n      var current = void 0;\n      var pageSize = void 0;\n      var state = this.state; // 如果没有分页的话，默认全部展示\n\n      if (!this.hasPagination()) {\n        pageSize = Number.MAX_VALUE;\n        current = 1;\n      } else {\n        pageSize = state.pagination.pageSize;\n        current = this.getMaxCurrent(state.pagination.total || data.length);\n      } // 分页\n      // ---\n      // 当数据量少于等于每页数量时，直接设置数据\n      // 否则进行读取分页数据\n\n\n      if (data.length > pageSize || pageSize === Number.MAX_VALUE) {\n        data = data.filter(function (_, i) {\n          return i >= (current - 1) * pageSize && i < current * pageSize;\n        });\n      }\n\n      return data;\n    }\n  }, {\n    key: 'getFlatData',\n    value: function getFlatData() {\n      return flatArray(this.getLocalData());\n    }\n  }, {\n    key: 'getFlatCurrentPageData',\n    value: function getFlatCurrentPageData() {\n      return flatArray(this.getCurrentPageData());\n    }\n  }, {\n    key: 'recursiveSort',\n    value: function recursiveSort(data, sorterFn) {\n      var _this9 = this;\n\n      var _props$childrenColumn = this.props.childrenColumnName,\n          childrenColumnName = _props$childrenColumn === undefined ? 'children' : _props$childrenColumn;\n      return data.sort(sorterFn).map(function (item) {\n        return item[childrenColumnName] ? _extends({}, item, _defineProperty({}, childrenColumnName, _this9.recursiveSort(item[childrenColumnName], sorterFn))) : item;\n      });\n    }\n  }, {\n    key: 'getLocalData',\n    value: function getLocalData() {\n      var _this10 = this;\n\n      var state = this.state;\n      var dataSource = this.props.dataSource;\n      var data = dataSource || []; // 优化本地排序\n\n      data = data.slice(0);\n      var sorterFn = this.getSorterFn();\n\n      if (sorterFn) {\n        data = this.recursiveSort(data, sorterFn);\n      } // 筛选\n\n\n      if (state.filters) {\n        Object.keys(state.filters).forEach(function (columnKey) {\n          var col = _this10.findColumn(columnKey);\n\n          if (!col) {\n            return;\n          }\n\n          var values = state.filters[columnKey] || [];\n\n          if (values.length === 0) {\n            return;\n          }\n\n          var onFilter = col.onFilter;\n          data = onFilter ? data.filter(function (record) {\n            return values.some(function (v) {\n              return onFilter(v, record);\n            });\n          }) : data;\n        });\n      }\n\n      return data;\n    }\n  }, {\n    key: 'createComponents',\n    value: function createComponents() {\n      var components = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var prevComponents = arguments[1];\n      var bodyRow = components && components.body && components.body.row;\n      var preBodyRow = prevComponents && prevComponents.body && prevComponents.body.row;\n\n      if (!this.components || bodyRow !== preBodyRow) {\n        this.components = _extends({}, components);\n        this.components.body = _extends({}, components.body, {\n          row: createBodyRow(bodyRow)\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this11 = this;\n\n      var _props3 = this.props,\n          style = _props3.style,\n          className = _props3.className,\n          prefixCls = _props3.prefixCls;\n      var data = this.getCurrentPageData();\n      var loading = this.props.loading;\n\n      if (typeof loading === 'boolean') {\n        loading = {\n          spinning: loading\n        };\n      }\n\n      var table = React.createElement(LocaleReceiver, {\n        componentName: 'Table',\n        defaultLocale: defaultLocale.Table\n      }, function (locale) {\n        return _this11.renderTable(locale, loading);\n      }); // if there is no pagination or no data,\n      // the height of spin should decrease by half of pagination\n\n      var paginationPatchClass = this.hasPagination() && data && data.length !== 0 ? prefixCls + '-with-pagination' : prefixCls + '-without-pagination';\n      return React.createElement('div', {\n        className: classNames(prefixCls + '-wrapper', className),\n        style: style\n      }, React.createElement(Spin, _extends({}, loading, {\n        className: loading.spinning ? paginationPatchClass + ' ' + prefixCls + '-spin-holder' : ''\n      }), this.renderPagination('top'), table, this.renderPagination('bottom')));\n    }\n  }]);\n\n  return Table;\n}(React.Component);\n\nexport default Table;\nTable.Column = Column;\nTable.ColumnGroup = ColumnGroup;\nTable.propTypes = {\n  dataSource: PropTypes.array,\n  columns: PropTypes.array,\n  prefixCls: PropTypes.string,\n  useFixedHeader: PropTypes.bool,\n  rowSelection: PropTypes.object,\n  className: PropTypes.string,\n  size: PropTypes.string,\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  bordered: PropTypes.bool,\n  onChange: PropTypes.func,\n  locale: PropTypes.object,\n  dropdownPrefixCls: PropTypes.string\n};\nTable.defaultProps = {\n  dataSource: [],\n  prefixCls: 'ant-table',\n  useFixedHeader: false,\n  rowSelection: null,\n  className: '',\n  size: 'large',\n  loading: false,\n  bordered: false,\n  indentSize: 20,\n  locale: {},\n  rowKey: 'key',\n  showHeader: true\n};","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/antd/es/table/Table.js"],"names":["_typeof","_defineProperty","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","React","ReactDOM","RcTable","PropTypes","classNames","Pagination","Icon","Spin","LocaleReceiver","defaultLocale","warning","FilterDropdown","createStore","SelectionBox","SelectionCheckboxAll","Column","ColumnGroup","createBodyRow","flatArray","treeMap","flatFilter","normalizeColumns","noop","stopPropagation","nativeEvent","stopImmediatePropagation","defaultPagination","onChange","onShowSizeChange","emptyObject","Table","_React$Component","props","_this","__proto__","getPrototypeOf","getCheckboxPropsByItem","item","index","_this$props$rowSelect","rowSelection","undefined","getCheckboxProps","key","getRecordKey","CheckboxPropsCache","onRow","record","_this$props","prefixCls","custom","store","rowKey","handleFilter","column","nextFilters","pagination","state","filters","getColumnKey","currentColumnKeys","columns","c","children","push","keys","forEach","columnKey","current","newState","filtersToSetState","getFilteredValueColumns","col","setState","selectionDirty","apply","prepareParamsArguments","handleSelect","rowIndex","checked","target","defaultSelection","getState","getDefaultSelection","selectedRowKeys","concat","filter","setSelectedRowKeys","selectWay","changeRowKeys","handleRadioSelect","handleSelectRow","selectionKey","onSelectFunc","data","getFlatCurrentPageData","changeableRowKeys","disabled","map","splice","customSelectionStartIndex","hideDefaultSelections","handlePageChange","_len","arguments","otherArguments","Array","_key","renderSelectionBox","type","_","handleChange","createElement","onClick","recordKey","getPopupContainer","findDOMNode","handleShowSizeChange","pageSize","nextPagination","renderTable","contextLocale","loading","_classNames","locale","_a","style","className","showHeader","restProps","getCurrentPageData","expandIconAsCell","expandedRowRender","classString","size","bordered","renderRowSelection","renderColumnsDropdown","newColumn","expandIconColumnIndex","components","emptyText","spinning","createComponents","getDefaultSortOrder","getFiltersFromColumns","getDefaultPagination","value","_this2","_props$rowSelection","getFlatData","defaultChecked","hasPagination","defaultCurrent","defaultPageSize","componentWillReceiveProps","nextProps","previousState","newPagination","dataSource","getSortOrderColumns","sortState","getSortStateFromColumns","sortColumn","sortOrder","filteredValueColumns","filtersFromColumns","newFilters","isFiltersChanged","_ref","_this3","_props$rowSelection2","selectedRows","row","onSelect","onSelectAll","changeRows","onSelectInvert","_this4","filtersChanged","filteredValue","_this5","colKey","definedSortState","defaultSortedColumn","defaultSortOrder","sortedColumn","getSorterFn","_state","sorter","a","b","result","toggleSortOrder","order","_state2","isSortColumn","_this6","_props","selectionColumnClass","selections","selectionColumn","render","fixed","width","columnWidth","checkboxAllDisabled","every","title","some","unshift","dataIndex","getMaxCurrent","total","_state$pagination","Math","floor","_this7","_props2","dropdownPrefixCls","originColumn","filterDropdown","sortButton","colFilters","selectedKeys","confirmFilter","isAscend","isDescend","renderPagination","paginationPosition","position","getLocalData","field","findColumn","myKey","_this8","Number","MAX_VALUE","recursiveSort","sorterFn","_this9","_props$childrenColumn","childrenColumnName","sort","_this10","slice","values","onFilter","v","prevComponents","bodyRow","body","preBodyRow","_this11","_props3","table","componentName","paginationPatchClass","Component","propTypes","array","string","useFixedHeader","bool","object","oneOfType","func","defaultProps","indentSize"],"mappings":"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","sourcesContent":["import _typeof from 'babel-runtime/helpers/typeof';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar __rest = this && this.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport RcTable from 'rc-table';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Pagination from '../pagination';\nimport Icon from '../icon';\nimport Spin from '../spin';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale-provider/default';\nimport warning from '../_util/warning';\nimport FilterDropdown from './filterDropdown';\nimport createStore from './createStore';\nimport SelectionBox from './SelectionBox';\nimport SelectionCheckboxAll from './SelectionCheckboxAll';\nimport Column from './Column';\nimport ColumnGroup from './ColumnGroup';\nimport createBodyRow from './createBodyRow';\nimport { flatArray, treeMap, flatFilter, normalizeColumns } from './util';\nfunction noop() {}\nfunction stopPropagation(e) {\n    e.stopPropagation();\n    if (e.nativeEvent.stopImmediatePropagation) {\n        e.nativeEvent.stopImmediatePropagation();\n    }\n}\nvar defaultPagination = {\n    onChange: noop,\n    onShowSizeChange: noop\n};\n/**\n * Avoid creating new object, so that parent component's shouldComponentUpdate\n * can works appropriately。\n */\nvar emptyObject = {};\n\nvar Table = function (_React$Component) {\n    _inherits(Table, _React$Component);\n\n    function Table(props) {\n        _classCallCheck(this, Table);\n\n        var _this = _possibleConstructorReturn(this, (Table.__proto__ || Object.getPrototypeOf(Table)).call(this, props));\n\n        _this.getCheckboxPropsByItem = function (item, index) {\n            var _this$props$rowSelect = _this.props.rowSelection,\n                rowSelection = _this$props$rowSelect === undefined ? {} : _this$props$rowSelect;\n\n            if (!rowSelection.getCheckboxProps) {\n                return {};\n            }\n            var key = _this.getRecordKey(item, index);\n            // Cache checkboxProps\n            if (!_this.CheckboxPropsCache[key]) {\n                _this.CheckboxPropsCache[key] = rowSelection.getCheckboxProps(item);\n            }\n            return _this.CheckboxPropsCache[key];\n        };\n        _this.onRow = function (record, index) {\n            var _this$props = _this.props,\n                onRow = _this$props.onRow,\n                prefixCls = _this$props.prefixCls;\n\n            var custom = onRow ? onRow(record, index) : {};\n            return _extends({}, custom, { prefixCls: prefixCls, store: _this.store, rowKey: _this.getRecordKey(record, index) });\n        };\n        _this.handleFilter = function (column, nextFilters) {\n            var props = _this.props;\n            var pagination = _extends({}, _this.state.pagination);\n            var filters = _extends({}, _this.state.filters, _defineProperty({}, _this.getColumnKey(column), nextFilters));\n            // Remove filters not in current columns\n            var currentColumnKeys = [];\n            treeMap(_this.columns, function (c) {\n                if (!c.children) {\n                    currentColumnKeys.push(_this.getColumnKey(c));\n                }\n            });\n            Object.keys(filters).forEach(function (columnKey) {\n                if (currentColumnKeys.indexOf(columnKey) < 0) {\n                    delete filters[columnKey];\n                }\n            });\n            if (props.pagination) {\n                // Reset current prop\n                pagination.current = 1;\n                pagination.onChange(pagination.current);\n            }\n            var newState = {\n                pagination: pagination,\n                filters: {}\n            };\n            var filtersToSetState = _extends({}, filters);\n            // Remove filters which is controlled\n            _this.getFilteredValueColumns().forEach(function (col) {\n                var columnKey = _this.getColumnKey(col);\n                if (columnKey) {\n                    delete filtersToSetState[columnKey];\n                }\n            });\n            if (Object.keys(filtersToSetState).length > 0) {\n                newState.filters = filtersToSetState;\n            }\n            // Controlled current prop will not respond user interaction\n            if (_typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n                newState.pagination = _extends({}, pagination, { current: _this.state.pagination.current });\n            }\n            _this.setState(newState, function () {\n                _this.store.setState({\n                    selectionDirty: false\n                });\n                var onChange = _this.props.onChange;\n                if (onChange) {\n                    onChange.apply(null, _this.prepareParamsArguments(_extends({}, _this.state, { selectionDirty: false, filters: filters,\n                        pagination: pagination })));\n                }\n            });\n        };\n        _this.handleSelect = function (record, rowIndex, e) {\n            var checked = e.target.checked;\n            var nativeEvent = e.nativeEvent;\n            var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n            var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n            var key = _this.getRecordKey(record, rowIndex);\n            if (checked) {\n                selectedRowKeys.push(_this.getRecordKey(record, rowIndex));\n            } else {\n                selectedRowKeys = selectedRowKeys.filter(function (i) {\n                    return key !== i;\n                });\n            }\n            _this.store.setState({\n                selectionDirty: true\n            });\n            _this.setSelectedRowKeys(selectedRowKeys, {\n                selectWay: 'onSelect',\n                record: record,\n                checked: checked,\n                changeRowKeys: void 0,\n                nativeEvent: nativeEvent\n            });\n        };\n        _this.handleRadioSelect = function (record, rowIndex, e) {\n            var checked = e.target.checked;\n            var nativeEvent = e.nativeEvent;\n            var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n            var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n            var key = _this.getRecordKey(record, rowIndex);\n            selectedRowKeys = [key];\n            _this.store.setState({\n                selectionDirty: true\n            });\n            _this.setSelectedRowKeys(selectedRowKeys, {\n                selectWay: 'onSelect',\n                record: record,\n                checked: checked,\n                changeRowKeys: void 0,\n                nativeEvent: nativeEvent\n            });\n        };\n        _this.handleSelectRow = function (selectionKey, index, onSelectFunc) {\n            var data = _this.getFlatCurrentPageData();\n            var defaultSelection = _this.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n            var selectedRowKeys = _this.store.getState().selectedRowKeys.concat(defaultSelection);\n            var changeableRowKeys = data.filter(function (item, i) {\n                return !_this.getCheckboxPropsByItem(item, i).disabled;\n            }).map(function (item, i) {\n                return _this.getRecordKey(item, i);\n            });\n            var changeRowKeys = [];\n            var selectWay = '';\n            var checked = void 0;\n            // handle default selection\n            switch (selectionKey) {\n                case 'all':\n                    changeableRowKeys.forEach(function (key) {\n                        if (selectedRowKeys.indexOf(key) < 0) {\n                            selectedRowKeys.push(key);\n                            changeRowKeys.push(key);\n                        }\n                    });\n                    selectWay = 'onSelectAll';\n                    checked = true;\n                    break;\n                case 'removeAll':\n                    changeableRowKeys.forEach(function (key) {\n                        if (selectedRowKeys.indexOf(key) >= 0) {\n                            selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n                            changeRowKeys.push(key);\n                        }\n                    });\n                    selectWay = 'onSelectAll';\n                    checked = false;\n                    break;\n                case 'invert':\n                    changeableRowKeys.forEach(function (key) {\n                        if (selectedRowKeys.indexOf(key) < 0) {\n                            selectedRowKeys.push(key);\n                        } else {\n                            selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n                        }\n                        changeRowKeys.push(key);\n                        selectWay = 'onSelectInvert';\n                    });\n                    break;\n                default:\n                    break;\n            }\n            _this.store.setState({\n                selectionDirty: true\n            });\n            // when select custom selection, callback selections[n].onSelect\n            var rowSelection = _this.props.rowSelection;\n\n            var customSelectionStartIndex = 2;\n            if (rowSelection && rowSelection.hideDefaultSelections) {\n                customSelectionStartIndex = 0;\n            }\n            if (index >= customSelectionStartIndex && typeof onSelectFunc === 'function') {\n                return onSelectFunc(changeableRowKeys);\n            }\n            _this.setSelectedRowKeys(selectedRowKeys, {\n                selectWay: selectWay,\n                checked: checked,\n                changeRowKeys: changeRowKeys\n            });\n        };\n        _this.handlePageChange = function (current) {\n            for (var _len = arguments.length, otherArguments = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                otherArguments[_key - 1] = arguments[_key];\n            }\n\n            var props = _this.props;\n            var pagination = _extends({}, _this.state.pagination);\n            if (current) {\n                pagination.current = current;\n            } else {\n                pagination.current = pagination.current || 1;\n            }\n            pagination.onChange.apply(pagination, [pagination.current].concat(otherArguments));\n            var newState = {\n                pagination: pagination\n            };\n            // Controlled current prop will not respond user interaction\n            if (props.pagination && _typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n                newState.pagination = _extends({}, pagination, { current: _this.state.pagination.current });\n            }\n            _this.setState(newState);\n            _this.store.setState({\n                selectionDirty: false\n            });\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                onChange.apply(null, _this.prepareParamsArguments(_extends({}, _this.state, { selectionDirty: false, pagination: pagination })));\n            }\n        };\n        _this.renderSelectionBox = function (type) {\n            return function (_, record, index) {\n                var rowIndex = _this.getRecordKey(record, index); // 从 1 开始\n                var props = _this.getCheckboxPropsByItem(record, index);\n                var handleChange = function handleChange(e) {\n                    type === 'radio' ? _this.handleRadioSelect(record, rowIndex, e) : _this.handleSelect(record, rowIndex, e);\n                };\n                return React.createElement(\n                    'span',\n                    { onClick: stopPropagation },\n                    React.createElement(SelectionBox, _extends({ type: type, store: _this.store, rowIndex: rowIndex, onChange: handleChange, defaultSelection: _this.getDefaultSelection() }, props))\n                );\n            };\n        };\n        _this.getRecordKey = function (record, index) {\n            var rowKey = _this.props.rowKey;\n            var recordKey = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];\n            warning(recordKey !== undefined, 'Each record in dataSource of table should have a unique `key` prop, or set `rowKey` to an unique primary key,' + 'see https://u.ant.design/table-row-key');\n            return recordKey === undefined ? index : recordKey;\n        };\n        _this.getPopupContainer = function () {\n            return ReactDOM.findDOMNode(_this);\n        };\n        _this.handleShowSizeChange = function (current, pageSize) {\n            var pagination = _this.state.pagination;\n            pagination.onShowSizeChange(current, pageSize);\n            var nextPagination = _extends({}, pagination, { pageSize: pageSize,\n                current: current });\n            _this.setState({ pagination: nextPagination });\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                onChange.apply(null, _this.prepareParamsArguments(_extends({}, _this.state, { pagination: nextPagination })));\n            }\n        };\n        _this.renderTable = function (contextLocale, loading) {\n            var _classNames;\n\n            var locale = _extends({}, contextLocale, _this.props.locale);\n            var _a = _this.props,\n                style = _a.style,\n                className = _a.className,\n                prefixCls = _a.prefixCls,\n                showHeader = _a.showHeader,\n                restProps = __rest(_a, [\"style\", \"className\", \"prefixCls\", \"showHeader\"]);\n            var data = _this.getCurrentPageData();\n            var expandIconAsCell = _this.props.expandedRowRender && _this.props.expandIconAsCell !== false;\n            var classString = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-' + _this.props.size, true), _defineProperty(_classNames, prefixCls + '-bordered', _this.props.bordered), _defineProperty(_classNames, prefixCls + '-empty', !data.length), _defineProperty(_classNames, prefixCls + '-without-column-header', !showHeader), _classNames));\n            var columns = _this.renderRowSelection(locale);\n            columns = _this.renderColumnsDropdown(columns, locale);\n            columns = columns.map(function (column, i) {\n                var newColumn = _extends({}, column);\n                newColumn.key = _this.getColumnKey(newColumn, i);\n                return newColumn;\n            });\n            var expandIconColumnIndex = columns[0] && columns[0].key === 'selection-column' ? 1 : 0;\n            if ('expandIconColumnIndex' in restProps) {\n                expandIconColumnIndex = restProps.expandIconColumnIndex;\n            }\n            return React.createElement(RcTable, _extends({ key: 'table' }, restProps, { onRow: _this.onRow, components: _this.components, prefixCls: prefixCls, data: data, columns: columns, showHeader: showHeader, className: classString, expandIconColumnIndex: expandIconColumnIndex, expandIconAsCell: expandIconAsCell, emptyText: !loading.spinning && locale.emptyText }));\n        };\n        warning(!('columnsPageRange' in props || 'columnsPageSize' in props), '`columnsPageRange` and `columnsPageSize` are removed, please use ' + 'fixed columns instead, see: https://u.ant.design/fixed-columns.');\n        _this.columns = props.columns || normalizeColumns(props.children);\n        _this.createComponents(props.components);\n        _this.state = _extends({}, _this.getDefaultSortOrder(_this.columns), {\n            // 减少状态\n            filters: _this.getFiltersFromColumns(), pagination: _this.getDefaultPagination(props) });\n        _this.CheckboxPropsCache = {};\n        _this.store = createStore({\n            selectedRowKeys: (props.rowSelection || {}).selectedRowKeys || [],\n            selectionDirty: false\n        });\n        return _this;\n    }\n\n    _createClass(Table, [{\n        key: 'getDefaultSelection',\n        value: function getDefaultSelection() {\n            var _this2 = this;\n\n            var _props$rowSelection = this.props.rowSelection,\n                rowSelection = _props$rowSelection === undefined ? {} : _props$rowSelection;\n\n            if (!rowSelection.getCheckboxProps) {\n                return [];\n            }\n            return this.getFlatData().filter(function (item, rowIndex) {\n                return _this2.getCheckboxPropsByItem(item, rowIndex).defaultChecked;\n            }).map(function (record, rowIndex) {\n                return _this2.getRecordKey(record, rowIndex);\n            });\n        }\n    }, {\n        key: 'getDefaultPagination',\n        value: function getDefaultPagination(props) {\n            var pagination = props.pagination || {};\n            return this.hasPagination(props) ? _extends({}, defaultPagination, pagination, { current: pagination.defaultCurrent || pagination.current || 1, pageSize: pagination.defaultPageSize || pagination.pageSize || 10 }) : {};\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            this.columns = nextProps.columns || normalizeColumns(nextProps.children);\n            if ('pagination' in nextProps || 'pagination' in this.props) {\n                this.setState(function (previousState) {\n                    var newPagination = _extends({}, defaultPagination, previousState.pagination, nextProps.pagination);\n                    newPagination.current = newPagination.current || 1;\n                    newPagination.pageSize = newPagination.pageSize || 10;\n                    return { pagination: nextProps.pagination !== false ? newPagination : emptyObject };\n                });\n            }\n            if (nextProps.rowSelection && 'selectedRowKeys' in nextProps.rowSelection) {\n                this.store.setState({\n                    selectedRowKeys: nextProps.rowSelection.selectedRowKeys || []\n                });\n            }\n            if ('dataSource' in nextProps && nextProps.dataSource !== this.props.dataSource) {\n                this.store.setState({\n                    selectionDirty: false\n                });\n            }\n            // https://github.com/ant-design/ant-design/issues/10133\n            this.CheckboxPropsCache = {};\n            if (this.getSortOrderColumns(this.columns).length > 0) {\n                var sortState = this.getSortStateFromColumns(this.columns);\n                if (sortState.sortColumn !== this.state.sortColumn || sortState.sortOrder !== this.state.sortOrder) {\n                    this.setState(sortState);\n                }\n            }\n            var filteredValueColumns = this.getFilteredValueColumns(this.columns);\n            if (filteredValueColumns.length > 0) {\n                var filtersFromColumns = this.getFiltersFromColumns(this.columns);\n                var newFilters = _extends({}, this.state.filters);\n                Object.keys(filtersFromColumns).forEach(function (key) {\n                    newFilters[key] = filtersFromColumns[key];\n                });\n                if (this.isFiltersChanged(newFilters)) {\n                    this.setState({ filters: newFilters });\n                }\n            }\n            this.createComponents(nextProps.components, this.props.components);\n        }\n    }, {\n        key: 'setSelectedRowKeys',\n        value: function setSelectedRowKeys(selectedRowKeys, _ref) {\n            var _this3 = this;\n\n            var selectWay = _ref.selectWay,\n                record = _ref.record,\n                checked = _ref.checked,\n                changeRowKeys = _ref.changeRowKeys,\n                nativeEvent = _ref.nativeEvent;\n            var _props$rowSelection2 = this.props.rowSelection,\n                rowSelection = _props$rowSelection2 === undefined ? {} : _props$rowSelection2;\n\n            if (rowSelection && !('selectedRowKeys' in rowSelection)) {\n                this.store.setState({ selectedRowKeys: selectedRowKeys });\n            }\n            var data = this.getFlatData();\n            if (!rowSelection.onChange && !rowSelection[selectWay]) {\n                return;\n            }\n            var selectedRows = data.filter(function (row, i) {\n                return selectedRowKeys.indexOf(_this3.getRecordKey(row, i)) >= 0;\n            });\n            if (rowSelection.onChange) {\n                rowSelection.onChange(selectedRowKeys, selectedRows);\n            }\n            if (selectWay === 'onSelect' && rowSelection.onSelect) {\n                rowSelection.onSelect(record, checked, selectedRows, nativeEvent);\n            } else if (selectWay === 'onSelectAll' && rowSelection.onSelectAll) {\n                var changeRows = data.filter(function (row, i) {\n                    return changeRowKeys.indexOf(_this3.getRecordKey(row, i)) >= 0;\n                });\n                rowSelection.onSelectAll(checked, selectedRows, changeRows);\n            } else if (selectWay === 'onSelectInvert' && rowSelection.onSelectInvert) {\n                rowSelection.onSelectInvert(selectedRowKeys);\n            }\n        }\n    }, {\n        key: 'hasPagination',\n        value: function hasPagination(props) {\n            return (props || this.props).pagination !== false;\n        }\n    }, {\n        key: 'isFiltersChanged',\n        value: function isFiltersChanged(filters) {\n            var _this4 = this;\n\n            var filtersChanged = false;\n            if (Object.keys(filters).length !== Object.keys(this.state.filters).length) {\n                filtersChanged = true;\n            } else {\n                Object.keys(filters).forEach(function (columnKey) {\n                    if (filters[columnKey] !== _this4.state.filters[columnKey]) {\n                        filtersChanged = true;\n                    }\n                });\n            }\n            return filtersChanged;\n        }\n    }, {\n        key: 'getSortOrderColumns',\n        value: function getSortOrderColumns(columns) {\n            return flatFilter(columns || this.columns || [], function (column) {\n                return 'sortOrder' in column;\n            });\n        }\n    }, {\n        key: 'getFilteredValueColumns',\n        value: function getFilteredValueColumns(columns) {\n            return flatFilter(columns || this.columns || [], function (column) {\n                return typeof column.filteredValue !== 'undefined';\n            });\n        }\n    }, {\n        key: 'getFiltersFromColumns',\n        value: function getFiltersFromColumns(columns) {\n            var _this5 = this;\n\n            var filters = {};\n            this.getFilteredValueColumns(columns).forEach(function (col) {\n                var colKey = _this5.getColumnKey(col);\n                filters[colKey] = col.filteredValue;\n            });\n            return filters;\n        }\n    }, {\n        key: 'getDefaultSortOrder',\n        value: function getDefaultSortOrder(columns) {\n            var definedSortState = this.getSortStateFromColumns(columns);\n            var defaultSortedColumn = flatFilter(columns || [], function (column) {\n                return column.defaultSortOrder != null;\n            })[0];\n            if (defaultSortedColumn && !definedSortState.sortColumn) {\n                return {\n                    sortColumn: defaultSortedColumn,\n                    sortOrder: defaultSortedColumn.defaultSortOrder\n                };\n            }\n            return definedSortState;\n        }\n    }, {\n        key: 'getSortStateFromColumns',\n        value: function getSortStateFromColumns(columns) {\n            // return first column which sortOrder is not falsy\n            var sortedColumn = this.getSortOrderColumns(columns).filter(function (col) {\n                return col.sortOrder;\n            })[0];\n            if (sortedColumn) {\n                return {\n                    sortColumn: sortedColumn,\n                    sortOrder: sortedColumn.sortOrder\n                };\n            }\n            return {\n                sortColumn: null,\n                sortOrder: null\n            };\n        }\n    }, {\n        key: 'getSorterFn',\n        value: function getSorterFn() {\n            var _state = this.state,\n                sortOrder = _state.sortOrder,\n                sortColumn = _state.sortColumn;\n\n            if (!sortOrder || !sortColumn || typeof sortColumn.sorter !== 'function') {\n                return;\n            }\n            return function (a, b) {\n                var result = sortColumn.sorter(a, b);\n                if (result !== 0) {\n                    return sortOrder === 'descend' ? -result : result;\n                }\n                return 0;\n            };\n        }\n    }, {\n        key: 'toggleSortOrder',\n        value: function toggleSortOrder(order, column) {\n            var _state2 = this.state,\n                sortColumn = _state2.sortColumn,\n                sortOrder = _state2.sortOrder;\n            // 只同时允许一列进行排序，否则会导致排序顺序的逻辑问题\n\n            var isSortColumn = this.isSortColumn(column);\n            if (!isSortColumn) {\n                // 当前列未排序\n                sortOrder = order;\n                sortColumn = column;\n            } else {\n                // 当前列已排序\n                if (sortOrder === order) {\n                    // 切换为未排序状态\n                    sortOrder = '';\n                    sortColumn = null;\n                } else {\n                    // 切换为排序状态\n                    sortOrder = order;\n                }\n            }\n            var newState = {\n                sortOrder: sortOrder,\n                sortColumn: sortColumn\n            };\n            // Controlled\n            if (this.getSortOrderColumns().length === 0) {\n                this.setState(newState);\n            }\n            var onChange = this.props.onChange;\n            if (onChange) {\n                onChange.apply(null, this.prepareParamsArguments(_extends({}, this.state, newState)));\n            }\n        }\n    }, {\n        key: 'renderRowSelection',\n        value: function renderRowSelection(locale) {\n            var _this6 = this;\n\n            var _props = this.props,\n                prefixCls = _props.prefixCls,\n                rowSelection = _props.rowSelection;\n\n            var columns = this.columns.concat();\n            if (rowSelection) {\n                var data = this.getFlatCurrentPageData().filter(function (item, index) {\n                    if (rowSelection.getCheckboxProps) {\n                        return !_this6.getCheckboxPropsByItem(item, index).disabled;\n                    }\n                    return true;\n                });\n                var selectionColumnClass = classNames(prefixCls + '-selection-column', _defineProperty({}, prefixCls + '-selection-column-custom', rowSelection.selections));\n                var selectionColumn = {\n                    key: 'selection-column',\n                    render: this.renderSelectionBox(rowSelection.type),\n                    className: selectionColumnClass,\n                    fixed: rowSelection.fixed,\n                    width: rowSelection.columnWidth\n                };\n                if (rowSelection.type !== 'radio') {\n                    var checkboxAllDisabled = data.every(function (item, index) {\n                        return _this6.getCheckboxPropsByItem(item, index).disabled;\n                    });\n                    selectionColumn.title = React.createElement(SelectionCheckboxAll, { store: this.store, locale: locale, data: data, getCheckboxPropsByItem: this.getCheckboxPropsByItem, getRecordKey: this.getRecordKey, disabled: checkboxAllDisabled, prefixCls: prefixCls, onSelect: this.handleSelectRow, selections: rowSelection.selections, hideDefaultSelections: rowSelection.hideDefaultSelections, getPopupContainer: this.getPopupContainer });\n                }\n                if ('fixed' in rowSelection) {\n                    selectionColumn.fixed = rowSelection.fixed;\n                } else if (columns.some(function (column) {\n                    return column.fixed === 'left' || column.fixed === true;\n                })) {\n                    selectionColumn.fixed = 'left';\n                }\n                if (columns[0] && columns[0].key === 'selection-column') {\n                    columns[0] = selectionColumn;\n                } else {\n                    columns.unshift(selectionColumn);\n                }\n            }\n            return columns;\n        }\n    }, {\n        key: 'getColumnKey',\n        value: function getColumnKey(column, index) {\n            return column.key || column.dataIndex || index;\n        }\n    }, {\n        key: 'getMaxCurrent',\n        value: function getMaxCurrent(total) {\n            var _state$pagination = this.state.pagination,\n                current = _state$pagination.current,\n                pageSize = _state$pagination.pageSize;\n\n            if ((current - 1) * pageSize >= total) {\n                return Math.floor((total - 1) / pageSize) + 1;\n            }\n            return current;\n        }\n    }, {\n        key: 'isSortColumn',\n        value: function isSortColumn(column) {\n            var sortColumn = this.state.sortColumn;\n\n            if (!column || !sortColumn) {\n                return false;\n            }\n            return this.getColumnKey(sortColumn) === this.getColumnKey(column);\n        }\n    }, {\n        key: 'renderColumnsDropdown',\n        value: function renderColumnsDropdown(columns, locale) {\n            var _this7 = this;\n\n            var _props2 = this.props,\n                prefixCls = _props2.prefixCls,\n                dropdownPrefixCls = _props2.dropdownPrefixCls;\n            var sortOrder = this.state.sortOrder;\n\n            return treeMap(columns, function (originColumn, i) {\n                var column = _extends({}, originColumn);\n                var key = _this7.getColumnKey(column, i);\n                var filterDropdown = void 0;\n                var sortButton = void 0;\n                if (column.filters && column.filters.length > 0 || column.filterDropdown) {\n                    var colFilters = _this7.state.filters[key] || [];\n                    filterDropdown = React.createElement(FilterDropdown, { locale: locale, column: column, selectedKeys: colFilters, confirmFilter: _this7.handleFilter, prefixCls: prefixCls + '-filter', dropdownPrefixCls: dropdownPrefixCls || 'ant-dropdown', getPopupContainer: _this7.getPopupContainer });\n                }\n                if (column.sorter) {\n                    var isSortColumn = _this7.isSortColumn(column);\n                    if (isSortColumn) {\n                        column.className = classNames(column.className, _defineProperty({}, prefixCls + '-column-sort', sortOrder));\n                    }\n                    var isAscend = isSortColumn && sortOrder === 'ascend';\n                    var isDescend = isSortColumn && sortOrder === 'descend';\n                    sortButton = React.createElement(\n                        'div',\n                        { className: prefixCls + '-column-sorter' },\n                        React.createElement(\n                            'span',\n                            { className: prefixCls + '-column-sorter-up ' + (isAscend ? 'on' : 'off'), title: '\\u2191', onClick: function onClick() {\n                                    return _this7.toggleSortOrder('ascend', column);\n                                } },\n                            React.createElement(Icon, { type: 'caret-up' })\n                        ),\n                        React.createElement(\n                            'span',\n                            { className: prefixCls + '-column-sorter-down ' + (isDescend ? 'on' : 'off'), title: '\\u2193', onClick: function onClick() {\n                                    return _this7.toggleSortOrder('descend', column);\n                                } },\n                            React.createElement(Icon, { type: 'caret-down' })\n                        )\n                    );\n                }\n                column.title = React.createElement(\n                    'span',\n                    { key: key },\n                    column.title,\n                    sortButton,\n                    filterDropdown\n                );\n                if (sortButton || filterDropdown) {\n                    column.className = classNames(prefixCls + '-column-has-filters', column.className);\n                }\n                return column;\n            });\n        }\n    }, {\n        key: 'renderPagination',\n        value: function renderPagination(paginationPosition) {\n            // 强制不需要分页\n            if (!this.hasPagination()) {\n                return null;\n            }\n            var size = 'default';\n            var pagination = this.state.pagination;\n\n            if (pagination.size) {\n                size = pagination.size;\n            } else if (this.props.size === 'middle' || this.props.size === 'small') {\n                size = 'small';\n            }\n            var position = pagination.position || 'bottom';\n            var total = pagination.total || this.getLocalData().length;\n            return total > 0 && (position === paginationPosition || position === 'both') ? React.createElement(Pagination, _extends({ key: 'pagination-' + paginationPosition }, pagination, { className: classNames(pagination.className, this.props.prefixCls + '-pagination'), onChange: this.handlePageChange, total: total, size: size, current: this.getMaxCurrent(total), onShowSizeChange: this.handleShowSizeChange })) : null;\n        }\n        // Get pagination, filters, sorter\n\n    }, {\n        key: 'prepareParamsArguments',\n        value: function prepareParamsArguments(state) {\n            var pagination = _extends({}, state.pagination);\n            // remove useless handle function in Table.onChange\n            delete pagination.onChange;\n            delete pagination.onShowSizeChange;\n            var filters = state.filters;\n            var sorter = {};\n            if (state.sortColumn && state.sortOrder) {\n                sorter.column = state.sortColumn;\n                sorter.order = state.sortOrder;\n                sorter.field = state.sortColumn.dataIndex;\n                sorter.columnKey = this.getColumnKey(state.sortColumn);\n            }\n            return [pagination, filters, sorter];\n        }\n    }, {\n        key: 'findColumn',\n        value: function findColumn(myKey) {\n            var _this8 = this;\n\n            var column = void 0;\n            treeMap(this.columns, function (c) {\n                if (_this8.getColumnKey(c) === myKey) {\n                    column = c;\n                }\n            });\n            return column;\n        }\n    }, {\n        key: 'getCurrentPageData',\n        value: function getCurrentPageData() {\n            var data = this.getLocalData();\n            var current = void 0;\n            var pageSize = void 0;\n            var state = this.state;\n            // 如果没有分页的话，默认全部展示\n            if (!this.hasPagination()) {\n                pageSize = Number.MAX_VALUE;\n                current = 1;\n            } else {\n                pageSize = state.pagination.pageSize;\n                current = this.getMaxCurrent(state.pagination.total || data.length);\n            }\n            // 分页\n            // ---\n            // 当数据量少于等于每页数量时，直接设置数据\n            // 否则进行读取分页数据\n            if (data.length > pageSize || pageSize === Number.MAX_VALUE) {\n                data = data.filter(function (_, i) {\n                    return i >= (current - 1) * pageSize && i < current * pageSize;\n                });\n            }\n            return data;\n        }\n    }, {\n        key: 'getFlatData',\n        value: function getFlatData() {\n            return flatArray(this.getLocalData());\n        }\n    }, {\n        key: 'getFlatCurrentPageData',\n        value: function getFlatCurrentPageData() {\n            return flatArray(this.getCurrentPageData());\n        }\n    }, {\n        key: 'recursiveSort',\n        value: function recursiveSort(data, sorterFn) {\n            var _this9 = this;\n\n            var _props$childrenColumn = this.props.childrenColumnName,\n                childrenColumnName = _props$childrenColumn === undefined ? 'children' : _props$childrenColumn;\n\n            return data.sort(sorterFn).map(function (item) {\n                return item[childrenColumnName] ? _extends({}, item, _defineProperty({}, childrenColumnName, _this9.recursiveSort(item[childrenColumnName], sorterFn))) : item;\n            });\n        }\n    }, {\n        key: 'getLocalData',\n        value: function getLocalData() {\n            var _this10 = this;\n\n            var state = this.state;\n            var dataSource = this.props.dataSource;\n\n            var data = dataSource || [];\n            // 优化本地排序\n            data = data.slice(0);\n            var sorterFn = this.getSorterFn();\n            if (sorterFn) {\n                data = this.recursiveSort(data, sorterFn);\n            }\n            // 筛选\n            if (state.filters) {\n                Object.keys(state.filters).forEach(function (columnKey) {\n                    var col = _this10.findColumn(columnKey);\n                    if (!col) {\n                        return;\n                    }\n                    var values = state.filters[columnKey] || [];\n                    if (values.length === 0) {\n                        return;\n                    }\n                    var onFilter = col.onFilter;\n                    data = onFilter ? data.filter(function (record) {\n                        return values.some(function (v) {\n                            return onFilter(v, record);\n                        });\n                    }) : data;\n                });\n            }\n            return data;\n        }\n    }, {\n        key: 'createComponents',\n        value: function createComponents() {\n            var components = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            var prevComponents = arguments[1];\n\n            var bodyRow = components && components.body && components.body.row;\n            var preBodyRow = prevComponents && prevComponents.body && prevComponents.body.row;\n            if (!this.components || bodyRow !== preBodyRow) {\n                this.components = _extends({}, components);\n                this.components.body = _extends({}, components.body, { row: createBodyRow(bodyRow) });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this11 = this;\n\n            var _props3 = this.props,\n                style = _props3.style,\n                className = _props3.className,\n                prefixCls = _props3.prefixCls;\n\n            var data = this.getCurrentPageData();\n            var loading = this.props.loading;\n            if (typeof loading === 'boolean') {\n                loading = {\n                    spinning: loading\n                };\n            }\n            var table = React.createElement(\n                LocaleReceiver,\n                { componentName: 'Table', defaultLocale: defaultLocale.Table },\n                function (locale) {\n                    return _this11.renderTable(locale, loading);\n                }\n            );\n            // if there is no pagination or no data,\n            // the height of spin should decrease by half of pagination\n            var paginationPatchClass = this.hasPagination() && data && data.length !== 0 ? prefixCls + '-with-pagination' : prefixCls + '-without-pagination';\n            return React.createElement(\n                'div',\n                { className: classNames(prefixCls + '-wrapper', className), style: style },\n                React.createElement(\n                    Spin,\n                    _extends({}, loading, { className: loading.spinning ? paginationPatchClass + ' ' + prefixCls + '-spin-holder' : '' }),\n                    this.renderPagination('top'),\n                    table,\n                    this.renderPagination('bottom')\n                )\n            );\n        }\n    }]);\n\n    return Table;\n}(React.Component);\n\nexport default Table;\n\nTable.Column = Column;\nTable.ColumnGroup = ColumnGroup;\nTable.propTypes = {\n    dataSource: PropTypes.array,\n    columns: PropTypes.array,\n    prefixCls: PropTypes.string,\n    useFixedHeader: PropTypes.bool,\n    rowSelection: PropTypes.object,\n    className: PropTypes.string,\n    size: PropTypes.string,\n    loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n    bordered: PropTypes.bool,\n    onChange: PropTypes.func,\n    locale: PropTypes.object,\n    dropdownPrefixCls: PropTypes.string\n};\nTable.defaultProps = {\n    dataSource: [],\n    prefixCls: 'ant-table',\n    useFixedHeader: false,\n    rowSelection: null,\n    className: '',\n    size: 'large',\n    loading: false,\n    bordered: false,\n    indentSize: 20,\n    locale: {},\n    rowKey: 'key',\n    showHeader: true\n};"]},"metadata":{},"sourceType":"module"}