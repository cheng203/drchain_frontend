{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nvar Header = function (_Component) {\n  _inherits(Header, _Component);\n\n  function Header(props) {\n    _classCallCheck(this, Header);\n\n    var _this = _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value,\n        format = props.format;\n    _this.state = {\n      str: value && value.format(format) || '',\n      invalid: false\n    };\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.focusOnOpen) {\n        // Wait one frame for the panel to be positioned before focusing\n        var requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;\n        requestAnimationFrame(function () {\n          _this2.refs.input.focus();\n\n          _this2.refs.input.select();\n        });\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var value = nextProps.value,\n          format = nextProps.format;\n      this.setState({\n        str: value && value.format(format) || '',\n        invalid: false\n      });\n    }\n  }, {\n    key: 'getClearButton',\n    value: function getClearButton() {\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          allowEmpty = _props.allowEmpty;\n\n      if (!allowEmpty) {\n        return null;\n      }\n\n      return React.createElement('a', {\n        className: prefixCls + '-clear-btn',\n        role: 'button',\n        title: this.props.clearText,\n        onMouseDown: this.onClear\n      });\n    }\n  }, {\n    key: 'getProtoValue',\n    value: function getProtoValue() {\n      return this.props.value || this.props.defaultOpenValue;\n    }\n  }, {\n    key: 'getInput',\n    value: function getInput() {\n      var _props2 = this.props,\n          prefixCls = _props2.prefixCls,\n          placeholder = _props2.placeholder,\n          inputReadOnly = _props2.inputReadOnly;\n      var _state = this.state,\n          invalid = _state.invalid,\n          str = _state.str;\n      var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n      return React.createElement('input', {\n        className: prefixCls + '-input  ' + invalidClass,\n        ref: 'input',\n        onKeyDown: this.onKeyDown,\n        value: str,\n        placeholder: placeholder,\n        onChange: this.onInputChange,\n        readOnly: !!inputReadOnly\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var prefixCls = this.props.prefixCls;\n      return React.createElement('div', {\n        className: prefixCls + '-input-wrap'\n      }, this.getInput(), this.getClearButton());\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nHeader.propTypes = {\n  format: PropTypes.string,\n  prefixCls: PropTypes.string,\n  disabledDate: PropTypes.func,\n  placeholder: PropTypes.string,\n  clearText: PropTypes.string,\n  value: PropTypes.object,\n  inputReadOnly: PropTypes.bool,\n  hourOptions: PropTypes.array,\n  minuteOptions: PropTypes.array,\n  secondOptions: PropTypes.array,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  onChange: PropTypes.func,\n  onClear: PropTypes.func,\n  onEsc: PropTypes.func,\n  allowEmpty: PropTypes.bool,\n  defaultOpenValue: PropTypes.object,\n  currentSelectPanel: PropTypes.string,\n  focusOnOpen: PropTypes.bool,\n  onKeyDown: PropTypes.func\n};\nHeader.defaultProps = {\n  inputReadOnly: false\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onInputChange = function (event) {\n    var str = event.target.value;\n\n    _this3.setState({\n      str: str\n    });\n\n    var _props3 = _this3.props,\n        format = _props3.format,\n        hourOptions = _props3.hourOptions,\n        minuteOptions = _props3.minuteOptions,\n        secondOptions = _props3.secondOptions,\n        disabledHours = _props3.disabledHours,\n        disabledMinutes = _props3.disabledMinutes,\n        disabledSeconds = _props3.disabledSeconds,\n        onChange = _props3.onChange,\n        allowEmpty = _props3.allowEmpty;\n\n    if (str) {\n      var originalValue = _this3.props.value;\n\n      var value = _this3.getProtoValue().clone();\n\n      var parsed = moment(str, format, true);\n\n      if (!parsed.isValid()) {\n        _this3.setState({\n          invalid: true\n        });\n\n        return;\n      }\n\n      value.hour(parsed.hour()).minute(parsed.minute()).second(parsed.second()); // if time value not allowed, response warning.\n\n      if (hourOptions.indexOf(value.hour()) < 0 || minuteOptions.indexOf(value.minute()) < 0 || secondOptions.indexOf(value.second()) < 0) {\n        _this3.setState({\n          invalid: true\n        });\n\n        return;\n      } // if time value is disabled, response warning.\n\n\n      var disabledHourOptions = disabledHours();\n      var disabledMinuteOptions = disabledMinutes(value.hour());\n      var disabledSecondOptions = disabledSeconds(value.hour(), value.minute());\n\n      if (disabledHourOptions && disabledHourOptions.indexOf(value.hour()) >= 0 || disabledMinuteOptions && disabledMinuteOptions.indexOf(value.minute()) >= 0 || disabledSecondOptions && disabledSecondOptions.indexOf(value.second()) >= 0) {\n        _this3.setState({\n          invalid: true\n        });\n\n        return;\n      }\n\n      if (originalValue) {\n        if (originalValue.hour() !== value.hour() || originalValue.minute() !== value.minute() || originalValue.second() !== value.second()) {\n          // keep other fields for rc-calendar\n          var changedValue = originalValue.clone();\n          changedValue.hour(value.hour());\n          changedValue.minute(value.minute());\n          changedValue.second(value.second());\n          onChange(changedValue);\n        }\n      } else if (originalValue !== value) {\n        onChange(value);\n      }\n    } else if (allowEmpty) {\n      onChange(null);\n    } else {\n      _this3.setState({\n        invalid: true\n      });\n\n      return;\n    }\n\n    _this3.setState({\n      invalid: false\n    });\n  };\n\n  this.onKeyDown = function (e) {\n    var _props4 = _this3.props,\n        onEsc = _props4.onEsc,\n        onKeyDown = _props4.onKeyDown;\n\n    if (e.keyCode === 27) {\n      onEsc();\n    }\n\n    onKeyDown(e);\n  };\n\n  this.onClear = function () {\n    _this3.setState({\n      str: ''\n    });\n\n    _this3.props.onClear();\n  };\n};\n\nexport default Header;","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/rc-time-picker/es/Header.js"],"names":["_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","Component","PropTypes","moment","Header","_Component","props","_this","__proto__","Object","getPrototypeOf","call","_initialiseProps","value","format","state","str","invalid","key","componentDidMount","_this2","focusOnOpen","requestAnimationFrame","window","setTimeout","refs","input","focus","select","componentWillReceiveProps","nextProps","setState","getClearButton","_props","prefixCls","allowEmpty","createElement","className","role","title","clearText","onMouseDown","onClear","getProtoValue","defaultOpenValue","getInput","_props2","placeholder","inputReadOnly","_state","invalidClass","ref","onKeyDown","onChange","onInputChange","readOnly","render","propTypes","string","disabledDate","func","object","bool","hourOptions","array","minuteOptions","secondOptions","disabledHours","disabledMinutes","disabledSeconds","onEsc","currentSelectPanel","defaultProps","_this3","event","target","_props3","originalValue","clone","parsed","isValid","hour","minute","second","indexOf","disabledHourOptions","disabledMinuteOptions","disabledSecondOptions","changedValue","e","_props4","keyCode"],"mappings":"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","sourcesContent":["import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nvar Header = function (_Component) {\n  _inherits(Header, _Component);\n\n  function Header(props) {\n    _classCallCheck(this, Header);\n\n    var _this = _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value,\n        format = props.format;\n\n    _this.state = {\n      str: value && value.format(format) || '',\n      invalid: false\n    };\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.focusOnOpen) {\n        // Wait one frame for the panel to be positioned before focusing\n        var requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;\n        requestAnimationFrame(function () {\n          _this2.refs.input.focus();\n          _this2.refs.input.select();\n        });\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var value = nextProps.value,\n          format = nextProps.format;\n\n      this.setState({\n        str: value && value.format(format) || '',\n        invalid: false\n      });\n    }\n  }, {\n    key: 'getClearButton',\n    value: function getClearButton() {\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          allowEmpty = _props.allowEmpty;\n\n      if (!allowEmpty) {\n        return null;\n      }\n      return React.createElement('a', {\n        className: prefixCls + '-clear-btn',\n        role: 'button',\n        title: this.props.clearText,\n        onMouseDown: this.onClear\n      });\n    }\n  }, {\n    key: 'getProtoValue',\n    value: function getProtoValue() {\n      return this.props.value || this.props.defaultOpenValue;\n    }\n  }, {\n    key: 'getInput',\n    value: function getInput() {\n      var _props2 = this.props,\n          prefixCls = _props2.prefixCls,\n          placeholder = _props2.placeholder,\n          inputReadOnly = _props2.inputReadOnly;\n      var _state = this.state,\n          invalid = _state.invalid,\n          str = _state.str;\n\n      var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n      return React.createElement('input', {\n        className: prefixCls + '-input  ' + invalidClass,\n        ref: 'input',\n        onKeyDown: this.onKeyDown,\n        value: str,\n        placeholder: placeholder,\n        onChange: this.onInputChange,\n        readOnly: !!inputReadOnly\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var prefixCls = this.props.prefixCls;\n\n      return React.createElement(\n        'div',\n        { className: prefixCls + '-input-wrap' },\n        this.getInput(),\n        this.getClearButton()\n      );\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nHeader.propTypes = {\n  format: PropTypes.string,\n  prefixCls: PropTypes.string,\n  disabledDate: PropTypes.func,\n  placeholder: PropTypes.string,\n  clearText: PropTypes.string,\n  value: PropTypes.object,\n  inputReadOnly: PropTypes.bool,\n  hourOptions: PropTypes.array,\n  minuteOptions: PropTypes.array,\n  secondOptions: PropTypes.array,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  onChange: PropTypes.func,\n  onClear: PropTypes.func,\n  onEsc: PropTypes.func,\n  allowEmpty: PropTypes.bool,\n  defaultOpenValue: PropTypes.object,\n  currentSelectPanel: PropTypes.string,\n  focusOnOpen: PropTypes.bool,\n  onKeyDown: PropTypes.func\n};\nHeader.defaultProps = {\n  inputReadOnly: false\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onInputChange = function (event) {\n    var str = event.target.value;\n    _this3.setState({\n      str: str\n    });\n    var _props3 = _this3.props,\n        format = _props3.format,\n        hourOptions = _props3.hourOptions,\n        minuteOptions = _props3.minuteOptions,\n        secondOptions = _props3.secondOptions,\n        disabledHours = _props3.disabledHours,\n        disabledMinutes = _props3.disabledMinutes,\n        disabledSeconds = _props3.disabledSeconds,\n        onChange = _props3.onChange,\n        allowEmpty = _props3.allowEmpty;\n\n\n    if (str) {\n      var originalValue = _this3.props.value;\n      var value = _this3.getProtoValue().clone();\n      var parsed = moment(str, format, true);\n      if (!parsed.isValid()) {\n        _this3.setState({\n          invalid: true\n        });\n        return;\n      }\n      value.hour(parsed.hour()).minute(parsed.minute()).second(parsed.second());\n\n      // if time value not allowed, response warning.\n      if (hourOptions.indexOf(value.hour()) < 0 || minuteOptions.indexOf(value.minute()) < 0 || secondOptions.indexOf(value.second()) < 0) {\n        _this3.setState({\n          invalid: true\n        });\n        return;\n      }\n\n      // if time value is disabled, response warning.\n      var disabledHourOptions = disabledHours();\n      var disabledMinuteOptions = disabledMinutes(value.hour());\n      var disabledSecondOptions = disabledSeconds(value.hour(), value.minute());\n      if (disabledHourOptions && disabledHourOptions.indexOf(value.hour()) >= 0 || disabledMinuteOptions && disabledMinuteOptions.indexOf(value.minute()) >= 0 || disabledSecondOptions && disabledSecondOptions.indexOf(value.second()) >= 0) {\n        _this3.setState({\n          invalid: true\n        });\n        return;\n      }\n\n      if (originalValue) {\n        if (originalValue.hour() !== value.hour() || originalValue.minute() !== value.minute() || originalValue.second() !== value.second()) {\n          // keep other fields for rc-calendar\n          var changedValue = originalValue.clone();\n          changedValue.hour(value.hour());\n          changedValue.minute(value.minute());\n          changedValue.second(value.second());\n          onChange(changedValue);\n        }\n      } else if (originalValue !== value) {\n        onChange(value);\n      }\n    } else if (allowEmpty) {\n      onChange(null);\n    } else {\n      _this3.setState({\n        invalid: true\n      });\n      return;\n    }\n\n    _this3.setState({\n      invalid: false\n    });\n  };\n\n  this.onKeyDown = function (e) {\n    var _props4 = _this3.props,\n        onEsc = _props4.onEsc,\n        onKeyDown = _props4.onKeyDown;\n\n    if (e.keyCode === 27) {\n      onEsc();\n    }\n\n    onKeyDown(e);\n  };\n\n  this.onClear = function () {\n    _this3.setState({ str: '' });\n    _this3.props.onClear();\n  };\n};\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}