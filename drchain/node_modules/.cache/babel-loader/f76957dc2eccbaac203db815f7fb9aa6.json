{"ast":null,"code":"/* eslint no-loop-func: 0*/\nimport { Children } from 'react';\nexport function getOffset(ele) {\n  if (!ele.getClientRects().length) {\n    return {\n      top: 0,\n      left: 0\n    };\n  }\n\n  var rect = ele.getBoundingClientRect();\n\n  if (rect.width || rect.height) {\n    var doc = ele.ownerDocument;\n    var win = doc.defaultView;\n    var docElem = doc.documentElement;\n    return {\n      top: rect.top + win.pageYOffset - docElem.clientTop,\n      left: rect.left + win.pageXOffset - docElem.clientLeft\n    };\n  }\n\n  return rect;\n}\nexport function traverseTreeNodes(treeNodes, callback) {\n  var traverse = function traverse(subTreeNodes, level, parentsChildrenPos, parentPos) {\n    if (Array.isArray(subTreeNodes)) {\n      subTreeNodes = subTreeNodes.filter(function (item) {\n        return !!item;\n      });\n    }\n\n    Children.forEach(subTreeNodes, function (item, index) {\n      var pos = level + '-' + index;\n      parentsChildrenPos.push(pos); // Note: side effect\n\n      var childrenPos = [];\n\n      if (item.props.children && item.type && item.type.isTreeNode) {\n        traverse(item.props.children, pos, childrenPos, pos);\n      }\n\n      callback(item, index, pos, item.key || pos, childrenPos, parentPos);\n    });\n  };\n\n  traverse(treeNodes, 0, []);\n}\nexport function updateCheckState(obj, checkedPosition, checkIt) {\n  var childrenLoop = function childrenLoop(parentObj) {\n    parentObj.childrenPos.forEach(function (childPos) {\n      var childObj = obj[childPos]; // User click don't change disabled item checked state\n\n      if (!childObj.disableCheckbox && !childObj.disabled) {\n        childObj.halfChecked = false;\n        childObj.checked = checkIt;\n      }\n\n      childrenLoop(childObj);\n    });\n  };\n\n  childrenLoop(obj[checkedPosition]);\n\n  var parentLoop = function parentLoop(childObj) {\n    if (!childObj.parentPos) return;\n    var parentObj = obj[childObj.parentPos];\n    var childrenCount = parentObj.childrenPos.length;\n    var checkedChildrenCount = 0;\n    parentObj.childrenPos.forEach(function (childPos) {\n      if (obj[childPos].disableCheckbox) {\n        childrenCount -= 1;\n        return;\n      }\n\n      if (obj[childPos].checked === true) checkedChildrenCount++;else if (obj[childPos].halfChecked === true) checkedChildrenCount += 0.5;\n    });\n\n    if (checkedChildrenCount === childrenCount) {\n      parentObj.checked = true;\n      parentObj.halfChecked = false;\n    } else if (checkedChildrenCount > 0) {\n      parentObj.halfChecked = true;\n      parentObj.checked = false;\n    } else {\n      parentObj.checked = false;\n      parentObj.halfChecked = false;\n    }\n\n    parentLoop(parentObj);\n  };\n\n  parentLoop(obj[checkedPosition]);\n}\nexport function getCheck(treeNodesStates) {\n  var halfCheckedKeys = [];\n  var checkedKeys = [];\n  var checkedNodes = [];\n  var checkedNodesPositions = [];\n  Object.keys(treeNodesStates).forEach(function (item) {\n    var itemObj = treeNodesStates[item];\n\n    if (itemObj.checked) {\n      checkedKeys.push(itemObj.key);\n      checkedNodes.push(itemObj.node);\n      checkedNodesPositions.push({\n        node: itemObj.node,\n        pos: item\n      });\n    } else if (itemObj.halfChecked) {\n      halfCheckedKeys.push(itemObj.key);\n    }\n  });\n  return {\n    halfCheckedKeys: halfCheckedKeys,\n    checkedKeys: checkedKeys,\n    checkedNodes: checkedNodes,\n    checkedNodesPositions: checkedNodesPositions\n  };\n}\nexport function getStrictlyValue(checkedKeys, halfChecked) {\n  if (halfChecked) {\n    return {\n      checked: checkedKeys,\n      halfChecked: halfChecked\n    };\n  }\n\n  return checkedKeys;\n}\nexport function isPositionPrefix(smallPos, bigPos) {\n  if (bigPos.length < smallPos.length) {\n    return false;\n  } // attention: \"0-0-1\" \"0-0-10\"\n\n\n  if (bigPos.length > smallPos.length && bigPos.charAt(smallPos.length) !== '-') {\n    return false;\n  }\n\n  return bigPos.substr(0, smallPos.length) === smallPos;\n}","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/rc-tree-select/node_modules/rc-tree/es/util.js"],"names":["Children","getOffset","ele","getClientRects","length","top","left","rect","getBoundingClientRect","width","height","doc","ownerDocument","win","defaultView","docElem","documentElement","pageYOffset","clientTop","pageXOffset","clientLeft","traverseTreeNodes","treeNodes","callback","traverse","subTreeNodes","level","parentsChildrenPos","parentPos","Array","isArray","filter","item","forEach","index","pos","push","childrenPos","props","children","type","isTreeNode","key","updateCheckState","obj","checkedPosition","checkIt","childrenLoop","parentObj","childPos","childObj","disableCheckbox","disabled","halfChecked","checked","parentLoop","childrenCount","checkedChildrenCount","getCheck","treeNodesStates","halfCheckedKeys","checkedKeys","checkedNodes","checkedNodesPositions","Object","keys","itemObj","node","getStrictlyValue","isPositionPrefix","smallPos","bigPos","charAt","substr"],"mappings":"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","sourcesContent":["/* eslint no-loop-func: 0*/\nimport { Children } from 'react';\n\nexport function getOffset(ele) {\n  if (!ele.getClientRects().length) {\n    return { top: 0, left: 0 };\n  }\n\n  var rect = ele.getBoundingClientRect();\n  if (rect.width || rect.height) {\n    var doc = ele.ownerDocument;\n    var win = doc.defaultView;\n    var docElem = doc.documentElement;\n\n    return {\n      top: rect.top + win.pageYOffset - docElem.clientTop,\n      left: rect.left + win.pageXOffset - docElem.clientLeft\n    };\n  }\n\n  return rect;\n}\n\nexport function traverseTreeNodes(treeNodes, callback) {\n  var traverse = function traverse(subTreeNodes, level, parentsChildrenPos, parentPos) {\n    if (Array.isArray(subTreeNodes)) {\n      subTreeNodes = subTreeNodes.filter(function (item) {\n        return !!item;\n      });\n    }\n    Children.forEach(subTreeNodes, function (item, index) {\n      var pos = level + '-' + index;\n      parentsChildrenPos.push(pos); // Note: side effect\n\n      var childrenPos = [];\n      if (item.props.children && item.type && item.type.isTreeNode) {\n        traverse(item.props.children, pos, childrenPos, pos);\n      }\n      callback(item, index, pos, item.key || pos, childrenPos, parentPos);\n    });\n  };\n  traverse(treeNodes, 0, []);\n}\n\nexport function updateCheckState(obj, checkedPosition, checkIt) {\n  var childrenLoop = function childrenLoop(parentObj) {\n    parentObj.childrenPos.forEach(function (childPos) {\n      var childObj = obj[childPos];\n      // User click don't change disabled item checked state\n      if (!childObj.disableCheckbox && !childObj.disabled) {\n        childObj.halfChecked = false;\n        childObj.checked = checkIt;\n      }\n      childrenLoop(childObj);\n    });\n  };\n\n  childrenLoop(obj[checkedPosition]);\n\n  var parentLoop = function parentLoop(childObj) {\n    if (!childObj.parentPos) return;\n    var parentObj = obj[childObj.parentPos];\n\n    var childrenCount = parentObj.childrenPos.length;\n\n    var checkedChildrenCount = 0;\n    parentObj.childrenPos.forEach(function (childPos) {\n      if (obj[childPos].disableCheckbox) {\n        childrenCount -= 1;\n        return;\n      }\n      if (obj[childPos].checked === true) checkedChildrenCount++;else if (obj[childPos].halfChecked === true) checkedChildrenCount += 0.5;\n    });\n\n    if (checkedChildrenCount === childrenCount) {\n      parentObj.checked = true;\n      parentObj.halfChecked = false;\n    } else if (checkedChildrenCount > 0) {\n      parentObj.halfChecked = true;\n      parentObj.checked = false;\n    } else {\n      parentObj.checked = false;\n      parentObj.halfChecked = false;\n    }\n    parentLoop(parentObj);\n  };\n\n  parentLoop(obj[checkedPosition]);\n}\n\nexport function getCheck(treeNodesStates) {\n  var halfCheckedKeys = [];\n  var checkedKeys = [];\n  var checkedNodes = [];\n  var checkedNodesPositions = [];\n  Object.keys(treeNodesStates).forEach(function (item) {\n    var itemObj = treeNodesStates[item];\n    if (itemObj.checked) {\n      checkedKeys.push(itemObj.key);\n      checkedNodes.push(itemObj.node);\n      checkedNodesPositions.push({ node: itemObj.node, pos: item });\n    } else if (itemObj.halfChecked) {\n      halfCheckedKeys.push(itemObj.key);\n    }\n  });\n  return {\n    halfCheckedKeys: halfCheckedKeys,\n    checkedKeys: checkedKeys,\n    checkedNodes: checkedNodes,\n    checkedNodesPositions: checkedNodesPositions\n  };\n}\n\nexport function getStrictlyValue(checkedKeys, halfChecked) {\n  if (halfChecked) {\n    return { checked: checkedKeys, halfChecked: halfChecked };\n  }\n  return checkedKeys;\n}\n\nexport function isPositionPrefix(smallPos, bigPos) {\n  if (bigPos.length < smallPos.length) {\n    return false;\n  }\n  // attention: \"0-0-1\" \"0-0-10\"\n  if (bigPos.length > smallPos.length && bigPos.charAt(smallPos.length) !== '-') {\n    return false;\n  }\n  return bigPos.substr(0, smallPos.length) === smallPos;\n}"]},"metadata":{},"sourceType":"module"}