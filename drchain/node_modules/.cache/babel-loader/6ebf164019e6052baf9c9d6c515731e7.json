{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport warning from 'warning';\nimport Animate from 'rc-animate';\nimport toArray from 'rc-util/es/Children/toArray';\nimport { contextTypes } from './Tree';\nimport { getPosition, getNodeChildren, isCheckDisabled, traverseTreeNodes } from './util';\nvar ICON_OPEN = 'open';\nvar ICON_CLOSE = 'close';\nvar LOAD_STATUS_NONE = 0;\nvar LOAD_STATUS_LOADING = 1;\nvar LOAD_STATUS_LOADED = 2;\nvar LOAD_STATUS_FAILED = 0; // Action align, let's make failed same as init.\n\nvar defaultTitle = '---';\nvar onlyTreeNodeWarned = false; // Only accept TreeNode\n\nexport var nodeContextTypes = _extends({}, contextTypes, {\n  rcTreeNode: PropTypes.shape({\n    onUpCheckConduct: PropTypes.func\n  })\n});\n\nvar TreeNode = function (_React$Component) {\n  _inherits(TreeNode, _React$Component);\n\n  function TreeNode(props) {\n    _classCallCheck(this, TreeNode);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      loadStatus: LOAD_STATUS_NONE,\n      dragNodeHighlight: false\n    };\n    return _this;\n  }\n\n  TreeNode.prototype.getChildContext = function getChildContext() {\n    return _extends({}, this.context, {\n      rcTreeNode: {\n        onUpCheckConduct: this.onUpCheckConduct\n      }\n    });\n  }; // Isomorphic needn't load data in server side\n\n\n  TreeNode.prototype.componentDidMount = function componentDidMount() {\n    this.syncLoadData(this.props);\n  };\n\n  TreeNode.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    this.syncLoadData(nextProps);\n  }; // Disabled item still can be switch\n  // Drag usage\n\n\n  TreeNode.prototype.isSelectable = function isSelectable() {\n    var selectable = this.props.selectable;\n    var treeSelectable = this.context.rcTree.selectable; // Ignore when selectable is undefined or null\n\n    if (typeof selectable === 'boolean') {\n      return selectable;\n    }\n\n    return treeSelectable;\n  }; // Load data to avoid default expanded tree without data\n  // Switcher\n  // Checkbox\n  // Icon + Title\n  // Children list wrapped with `Animation`\n\n\n  TreeNode.prototype.render = function render() {\n    var _classNames;\n\n    var _props = this.props,\n        className = _props.className,\n        dragOver = _props.dragOver,\n        dragOverGapTop = _props.dragOverGapTop,\n        dragOverGapBottom = _props.dragOverGapBottom;\n    var _context$rcTree = this.context.rcTree,\n        prefixCls = _context$rcTree.prefixCls,\n        filterTreeNode = _context$rcTree.filterTreeNode;\n    var disabled = this.isDisabled();\n    return React.createElement('li', {\n      className: classNames(className, (_classNames = {}, _classNames[prefixCls + '-treenode-disabled'] = disabled, _classNames['drag-over'] = !disabled && dragOver, _classNames['drag-over-gap-top'] = !disabled && dragOverGapTop, _classNames['drag-over-gap-bottom'] = !disabled && dragOverGapBottom, _classNames['filter-node'] = filterTreeNode && filterTreeNode(this), _classNames)),\n      onDragEnter: this.onDragEnter,\n      onDragOver: this.onDragOver,\n      onDragLeave: this.onDragLeave,\n      onDrop: this.onDrop,\n      onDragEnd: this.onDragEnd\n    }, this.renderSwitcher(), this.renderCheckbox(), this.renderSelector(), this.renderChildren());\n  };\n\n  return TreeNode;\n}(React.Component);\n\nTreeNode.propTypes = {\n  eventKey: PropTypes.string,\n  // Pass by parent `cloneElement`\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  root: PropTypes.object,\n  onSelect: PropTypes.func,\n  // By parent\n  expanded: PropTypes.bool,\n  selected: PropTypes.bool,\n  checked: PropTypes.bool,\n  halfChecked: PropTypes.bool,\n  children: PropTypes.node,\n  title: PropTypes.node,\n  pos: PropTypes.string,\n  dragOver: PropTypes.bool,\n  dragOverGapTop: PropTypes.bool,\n  dragOverGapBottom: PropTypes.bool,\n  // By user\n  isLeaf: PropTypes.bool,\n  selectable: PropTypes.bool,\n  disabled: PropTypes.bool,\n  disableCheckbox: PropTypes.bool,\n  icon: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n};\nTreeNode.contextTypes = nodeContextTypes;\nTreeNode.childContextTypes = nodeContextTypes;\nTreeNode.defaultProps = {\n  title: defaultTitle\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onUpCheckConduct = function (treeNode, nodeChecked, nodeHalfChecked) {\n    var nodePos = treeNode.props.pos;\n    var _props2 = _this2.props,\n        eventKey = _props2.eventKey,\n        pos = _props2.pos,\n        checked = _props2.checked,\n        halfChecked = _props2.halfChecked;\n    var _context = _this2.context,\n        _context$rcTree2 = _context.rcTree,\n        checkStrictly = _context$rcTree2.checkStrictly,\n        isKeyChecked = _context$rcTree2.isKeyChecked,\n        onBatchNodeCheck = _context$rcTree2.onBatchNodeCheck,\n        onCheckConductFinished = _context$rcTree2.onCheckConductFinished,\n        _context$rcTreeNode = _context.rcTreeNode;\n    _context$rcTreeNode = _context$rcTreeNode === undefined ? {} : _context$rcTreeNode;\n    var onUpCheckConduct = _context$rcTreeNode.onUpCheckConduct; // Stop conduct when current node is disabled\n\n    if (isCheckDisabled(_this2)) {\n      onCheckConductFinished();\n      return;\n    }\n\n    var children = _this2.getNodeChildren();\n\n    var checkedCount = nodeChecked ? 1 : 0; // Statistic checked count\n\n    children.forEach(function (node, index) {\n      var childPos = getPosition(pos, index);\n\n      if (nodePos === childPos || isCheckDisabled(node)) {\n        return;\n      }\n\n      if (isKeyChecked(node.key || childPos)) {\n        checkedCount += 1;\n      }\n    }); // Static enabled children count\n\n    var enabledChildrenCount = children.filter(function (node) {\n      return !isCheckDisabled(node);\n    }).length; // checkStrictly will not conduct check status\n\n    var nextChecked = checkStrictly ? checked : enabledChildrenCount === checkedCount;\n    var nextHalfChecked = checkStrictly ? // propagated or child checked\n    halfChecked : nodeHalfChecked || checkedCount > 0 && !nextChecked; // Add into batch update\n\n    if (checked !== nextChecked || halfChecked !== nextHalfChecked) {\n      onBatchNodeCheck(eventKey, nextChecked, nextHalfChecked);\n\n      if (onUpCheckConduct) {\n        onUpCheckConduct(_this2, nextChecked, nextHalfChecked);\n      } else {\n        // Flush all the update\n        onCheckConductFinished();\n      }\n    } else {\n      // Flush all the update\n      onCheckConductFinished();\n    }\n  };\n\n  this.onDownCheckConduct = function (nodeChecked) {\n    var children = _this2.props.children;\n    var _context$rcTree3 = _this2.context.rcTree,\n        checkStrictly = _context$rcTree3.checkStrictly,\n        isKeyChecked = _context$rcTree3.isKeyChecked,\n        onBatchNodeCheck = _context$rcTree3.onBatchNodeCheck;\n    if (checkStrictly) return;\n    traverseTreeNodes(children, function (_ref) {\n      var node = _ref.node,\n          key = _ref.key;\n      if (isCheckDisabled(node)) return false;\n\n      if (nodeChecked !== isKeyChecked(key)) {\n        onBatchNodeCheck(key, nodeChecked, false);\n      }\n    });\n  };\n\n  this.onSelectorClick = function (e) {\n    if (_this2.isSelectable()) {\n      _this2.onSelect(e);\n    } else {\n      _this2.onCheck(e);\n    }\n  };\n\n  this.onSelect = function (e) {\n    if (_this2.isDisabled()) return;\n    var onNodeSelect = _this2.context.rcTree.onNodeSelect;\n    e.preventDefault();\n    onNodeSelect(e, _this2);\n  };\n\n  this.onCheck = function (e) {\n    if (_this2.isDisabled()) return;\n    var _props3 = _this2.props,\n        disableCheckbox = _props3.disableCheckbox,\n        checked = _props3.checked,\n        eventKey = _props3.eventKey;\n    var _context2 = _this2.context,\n        _context2$rcTree = _context2.rcTree,\n        checkable = _context2$rcTree.checkable,\n        onBatchNodeCheck = _context2$rcTree.onBatchNodeCheck,\n        onCheckConductFinished = _context2$rcTree.onCheckConductFinished,\n        _context2$rcTreeNode = _context2.rcTreeNode;\n    _context2$rcTreeNode = _context2$rcTreeNode === undefined ? {} : _context2$rcTreeNode;\n    var onUpCheckConduct = _context2$rcTreeNode.onUpCheckConduct;\n    if (!checkable || disableCheckbox) return;\n    e.preventDefault();\n    var targetChecked = !checked;\n    onBatchNodeCheck(eventKey, targetChecked, false, _this2); // Children conduct\n\n    _this2.onDownCheckConduct(targetChecked); // Parent conduct\n\n\n    if (onUpCheckConduct) {\n      onUpCheckConduct(_this2, targetChecked, false);\n    } else {\n      onCheckConductFinished();\n    }\n  };\n\n  this.onMouseEnter = function (e) {\n    var onNodeMouseEnter = _this2.context.rcTree.onNodeMouseEnter;\n    onNodeMouseEnter(e, _this2);\n  };\n\n  this.onMouseLeave = function (e) {\n    var onNodeMouseLeave = _this2.context.rcTree.onNodeMouseLeave;\n    onNodeMouseLeave(e, _this2);\n  };\n\n  this.onContextMenu = function (e) {\n    var onNodeContextMenu = _this2.context.rcTree.onNodeContextMenu;\n    onNodeContextMenu(e, _this2);\n  };\n\n  this.onDragStart = function (e) {\n    var onNodeDragStart = _this2.context.rcTree.onNodeDragStart;\n    e.stopPropagation();\n\n    _this2.setState({\n      dragNodeHighlight: true\n    });\n\n    onNodeDragStart(e, _this2);\n\n    try {\n      // ie throw error\n      // firefox-need-it\n      e.dataTransfer.setData('text/plain', '');\n    } catch (error) {// empty\n    }\n  };\n\n  this.onDragEnter = function (e) {\n    var onNodeDragEnter = _this2.context.rcTree.onNodeDragEnter;\n    e.preventDefault();\n    e.stopPropagation();\n    onNodeDragEnter(e, _this2);\n  };\n\n  this.onDragOver = function (e) {\n    var onNodeDragOver = _this2.context.rcTree.onNodeDragOver;\n    e.preventDefault();\n    e.stopPropagation();\n    onNodeDragOver(e, _this2);\n  };\n\n  this.onDragLeave = function (e) {\n    var onNodeDragLeave = _this2.context.rcTree.onNodeDragLeave;\n    e.stopPropagation();\n    onNodeDragLeave(e, _this2);\n  };\n\n  this.onDragEnd = function (e) {\n    var onNodeDragEnd = _this2.context.rcTree.onNodeDragEnd;\n    e.stopPropagation();\n\n    _this2.setState({\n      dragNodeHighlight: false\n    });\n\n    onNodeDragEnd(e, _this2);\n  };\n\n  this.onDrop = function (e) {\n    var onNodeDrop = _this2.context.rcTree.onNodeDrop;\n    e.preventDefault();\n    e.stopPropagation();\n\n    _this2.setState({\n      dragNodeHighlight: false\n    });\n\n    onNodeDrop(e, _this2);\n  };\n\n  this.onExpand = function (e) {\n    var onNodeExpand = _this2.context.rcTree.onNodeExpand;\n    var callbackPromise = onNodeExpand(e, _this2); // Promise like\n\n    if (callbackPromise && callbackPromise.then) {\n      _this2.setState({\n        loadStatus: LOAD_STATUS_LOADING\n      });\n\n      callbackPromise.then(function () {\n        _this2.setState({\n          loadStatus: LOAD_STATUS_LOADED\n        });\n      })['catch'](function () {\n        _this2.setState({\n          loadStatus: LOAD_STATUS_FAILED\n        });\n      });\n    }\n  };\n\n  this.setSelectHandle = function (node) {\n    _this2.selectHandle = node;\n  };\n\n  this.getNodeChildren = function () {\n    var children = _this2.props.children;\n    var originList = toArray(children).filter(function (node) {\n      return node;\n    });\n    var targetList = getNodeChildren(originList);\n\n    if (originList.length !== targetList.length && !onlyTreeNodeWarned) {\n      onlyTreeNodeWarned = true;\n      warning(false, 'Tree only accept TreeNode as children.');\n    }\n\n    return targetList;\n  };\n\n  this.getNodeState = function () {\n    var expanded = _this2.props.expanded;\n\n    if (_this2.isLeaf()) {\n      return null;\n    }\n\n    return expanded ? ICON_OPEN : ICON_CLOSE;\n  };\n\n  this.isLeaf = function () {\n    var loadStatus = _this2.state.loadStatus;\n    var isLeaf = _this2.props.isLeaf;\n    var loadData = _this2.context.rcTree.loadData;\n    var hasChildren = _this2.getNodeChildren().length !== 0;\n    return isLeaf || !loadData && !hasChildren || loadData && loadStatus === LOAD_STATUS_LOADED && !hasChildren;\n  };\n\n  this.isDisabled = function () {\n    var disabled = _this2.props.disabled;\n    var treeDisabled = _this2.context.rcTree.disabled; // Follow the logic of Selectable\n\n    if (disabled === false) {\n      return false;\n    }\n\n    return !!(treeDisabled || disabled);\n  };\n\n  this.syncLoadData = function (props) {\n    var expanded = props.expanded;\n    var loadData = _this2.context.rcTree.loadData; // read from state to avoid loadData at same time\n\n    _this2.setState(function (_ref2) {\n      var loadStatus = _ref2.loadStatus;\n\n      if (loadData && loadStatus === LOAD_STATUS_NONE && expanded && !_this2.isLeaf()) {\n        loadData(_this2).then(function () {\n          _this2.setState({\n            loadStatus: LOAD_STATUS_LOADED\n          });\n        })['catch'](function () {\n          _this2.setState({\n            loadStatus: LOAD_STATUS_FAILED\n          });\n        });\n        return {\n          loadStatus: LOAD_STATUS_LOADING\n        };\n      }\n\n      return null;\n    });\n  };\n\n  this.renderSwitcher = function () {\n    var expanded = _this2.props.expanded;\n    var prefixCls = _this2.context.rcTree.prefixCls;\n\n    if (_this2.isLeaf()) {\n      return React.createElement('span', {\n        className: prefixCls + '-switcher ' + prefixCls + '-switcher-noop'\n      });\n    }\n\n    return React.createElement('span', {\n      className: classNames(prefixCls + '-switcher', prefixCls + '-switcher_' + (expanded ? ICON_OPEN : ICON_CLOSE)),\n      onClick: _this2.onExpand\n    });\n  };\n\n  this.renderCheckbox = function () {\n    var _props4 = _this2.props,\n        checked = _props4.checked,\n        halfChecked = _props4.halfChecked,\n        disableCheckbox = _props4.disableCheckbox;\n    var _context$rcTree4 = _this2.context.rcTree,\n        prefixCls = _context$rcTree4.prefixCls,\n        checkable = _context$rcTree4.checkable;\n\n    var disabled = _this2.isDisabled();\n\n    if (!checkable) return null; // [Legacy] Custom element should be separate with `checkable` in future\n\n    var $custom = typeof checkable !== 'boolean' ? checkable : null;\n    return React.createElement('span', {\n      className: classNames(prefixCls + '-checkbox', checked && prefixCls + '-checkbox-checked', !checked && halfChecked && prefixCls + '-checkbox-indeterminate', (disabled || disableCheckbox) && prefixCls + '-checkbox-disabled'),\n      onClick: _this2.onCheck\n    }, $custom);\n  };\n\n  this.renderIcon = function () {\n    var loadStatus = _this2.state.loadStatus;\n    var prefixCls = _this2.context.rcTree.prefixCls;\n    return React.createElement('span', {\n      className: classNames(prefixCls + '-iconEle', prefixCls + '-icon__' + (_this2.getNodeState() || 'docu'), loadStatus === LOAD_STATUS_LOADING && prefixCls + '-icon_loading')\n    });\n  };\n\n  this.renderSelector = function () {\n    var _state = _this2.state,\n        loadStatus = _state.loadStatus,\n        dragNodeHighlight = _state.dragNodeHighlight;\n    var _props5 = _this2.props,\n        title = _props5.title,\n        selected = _props5.selected,\n        icon = _props5.icon;\n    var _context$rcTree5 = _this2.context.rcTree,\n        prefixCls = _context$rcTree5.prefixCls,\n        showIcon = _context$rcTree5.showIcon,\n        treeIcon = _context$rcTree5.icon,\n        draggable = _context$rcTree5.draggable,\n        loadData = _context$rcTree5.loadData;\n\n    var disabled = _this2.isDisabled();\n\n    var wrapClass = prefixCls + '-node-content-wrapper'; // Icon - Still show loading icon when loading without showIcon\n\n    var $icon = void 0;\n\n    if (showIcon) {\n      var currentIcon = icon || treeIcon;\n      $icon = currentIcon ? React.createElement('span', {\n        className: classNames(prefixCls + '-iconEle', prefixCls + '-icon__customize')\n      }, typeof currentIcon === 'function' ? React.createElement(currentIcon, _this2.props) : currentIcon) : _this2.renderIcon();\n    } else if (loadData && loadStatus === LOAD_STATUS_LOADING) {\n      $icon = _this2.renderIcon();\n    } // Title\n\n\n    var $title = React.createElement('span', {\n      className: prefixCls + '-title'\n    }, title);\n    return React.createElement('span', {\n      ref: _this2.setSelectHandle,\n      title: typeof title === 'string' ? title : '',\n      className: classNames('' + wrapClass, wrapClass + '-' + (_this2.getNodeState() || 'normal'), !disabled && (selected || dragNodeHighlight) && prefixCls + '-node-selected', !disabled && draggable && 'draggable'),\n      draggable: !disabled && draggable || undefined,\n      'aria-grabbed': !disabled && draggable || undefined,\n      onMouseEnter: _this2.onMouseEnter,\n      onMouseLeave: _this2.onMouseLeave,\n      onContextMenu: _this2.onContextMenu,\n      onClick: _this2.onSelectorClick,\n      onDragStart: _this2.onDragStart\n    }, $icon, $title);\n  };\n\n  this.renderChildren = function () {\n    var _props6 = _this2.props,\n        expanded = _props6.expanded,\n        pos = _props6.pos;\n    var _context$rcTree6 = _this2.context.rcTree,\n        prefixCls = _context$rcTree6.prefixCls,\n        openTransitionName = _context$rcTree6.openTransitionName,\n        openAnimation = _context$rcTree6.openAnimation,\n        renderTreeNode = _context$rcTree6.renderTreeNode; // [Legacy] Animation control\n\n    var renderFirst = _this2.renderFirst;\n    _this2.renderFirst = 1;\n    var transitionAppear = true;\n\n    if (!renderFirst && expanded) {\n      transitionAppear = false;\n    }\n\n    var animProps = {};\n\n    if (openTransitionName) {\n      animProps.transitionName = openTransitionName;\n    } else if (typeof openAnimation === 'object') {\n      animProps.animation = _extends({}, openAnimation);\n\n      if (!transitionAppear) {\n        delete animProps.animation.appear;\n      }\n    } // Children TreeNode\n\n\n    var nodeList = _this2.getNodeChildren();\n\n    if (nodeList.length === 0) {\n      return null;\n    }\n\n    var $children = void 0;\n\n    if (expanded) {\n      $children = React.createElement('ul', {\n        className: classNames(prefixCls + '-child-tree', expanded && prefixCls + '-child-tree-open'),\n        'data-expanded': expanded\n      }, React.Children.map(nodeList, function (node, index) {\n        return renderTreeNode(node, index, pos);\n      }));\n    }\n\n    return React.createElement(Animate, _extends({}, animProps, {\n      showProp: 'data-expanded',\n      transitionAppear: transitionAppear,\n      component: ''\n    }), $children);\n  };\n};\n\nTreeNode.isTreeNode = 1;\nexport default TreeNode;","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/rc-tree/es/TreeNode.js"],"names":["_classCallCheck","_possibleConstructorReturn","_inherits","_extends","React","PropTypes","classNames","warning","Animate","toArray","contextTypes","getPosition","getNodeChildren","isCheckDisabled","traverseTreeNodes","ICON_OPEN","ICON_CLOSE","LOAD_STATUS_NONE","LOAD_STATUS_LOADING","LOAD_STATUS_LOADED","LOAD_STATUS_FAILED","defaultTitle","onlyTreeNodeWarned","nodeContextTypes","rcTreeNode","shape","onUpCheckConduct","func","TreeNode","_React$Component","props","_this","call","_initialiseProps","state","loadStatus","dragNodeHighlight","prototype","getChildContext","context","componentDidMount","syncLoadData","componentWillReceiveProps","nextProps","isSelectable","selectable","treeSelectable","rcTree","render","_classNames","_props","className","dragOver","dragOverGapTop","dragOverGapBottom","_context$rcTree","prefixCls","filterTreeNode","disabled","isDisabled","createElement","onDragEnter","onDragOver","onDragLeave","onDrop","onDragEnd","renderSwitcher","renderCheckbox","renderSelector","renderChildren","Component","propTypes","eventKey","string","root","object","onSelect","expanded","bool","selected","checked","halfChecked","children","node","title","pos","isLeaf","disableCheckbox","icon","oneOfType","childContextTypes","defaultProps","_this2","treeNode","nodeChecked","nodeHalfChecked","nodePos","_props2","_context","_context$rcTree2","checkStrictly","isKeyChecked","onBatchNodeCheck","onCheckConductFinished","_context$rcTreeNode","undefined","checkedCount","forEach","index","childPos","key","enabledChildrenCount","filter","length","nextChecked","nextHalfChecked","onDownCheckConduct","_context$rcTree3","_ref","onSelectorClick","e","onCheck","onNodeSelect","preventDefault","_props3","_context2","_context2$rcTree","checkable","_context2$rcTreeNode","targetChecked","onMouseEnter","onNodeMouseEnter","onMouseLeave","onNodeMouseLeave","onContextMenu","onNodeContextMenu","onDragStart","onNodeDragStart","stopPropagation","setState","dataTransfer","setData","error","onNodeDragEnter","onNodeDragOver","onNodeDragLeave","onNodeDragEnd","onNodeDrop","onExpand","onNodeExpand","callbackPromise","then","setSelectHandle","selectHandle","originList","targetList","getNodeState","loadData","hasChildren","treeDisabled","_ref2","onClick","_props4","_context$rcTree4","$custom","renderIcon","_state","_props5","_context$rcTree5","showIcon","treeIcon","draggable","wrapClass","$icon","currentIcon","$title","ref","_props6","_context$rcTree6","openTransitionName","openAnimation","renderTreeNode","renderFirst","transitionAppear","animProps","transitionName","animation","appear","nodeList","$children","Children","map","showProp","component","isTreeNode"],"mappings":"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","sourcesContent":["import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport warning from 'warning';\nimport Animate from 'rc-animate';\nimport toArray from 'rc-util/es/Children/toArray';\nimport { contextTypes } from './Tree';\nimport { getPosition, getNodeChildren, isCheckDisabled, traverseTreeNodes } from './util';\n\nvar ICON_OPEN = 'open';\nvar ICON_CLOSE = 'close';\n\nvar LOAD_STATUS_NONE = 0;\nvar LOAD_STATUS_LOADING = 1;\nvar LOAD_STATUS_LOADED = 2;\nvar LOAD_STATUS_FAILED = 0; // Action align, let's make failed same as init.\n\nvar defaultTitle = '---';\n\nvar onlyTreeNodeWarned = false; // Only accept TreeNode\n\nexport var nodeContextTypes = _extends({}, contextTypes, {\n  rcTreeNode: PropTypes.shape({\n    onUpCheckConduct: PropTypes.func\n  })\n});\n\nvar TreeNode = function (_React$Component) {\n  _inherits(TreeNode, _React$Component);\n\n  function TreeNode(props) {\n    _classCallCheck(this, TreeNode);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      loadStatus: LOAD_STATUS_NONE,\n      dragNodeHighlight: false\n    };\n    return _this;\n  }\n\n  TreeNode.prototype.getChildContext = function getChildContext() {\n    return _extends({}, this.context, {\n      rcTreeNode: {\n        onUpCheckConduct: this.onUpCheckConduct\n      }\n    });\n  };\n\n  // Isomorphic needn't load data in server side\n\n\n  TreeNode.prototype.componentDidMount = function componentDidMount() {\n    this.syncLoadData(this.props);\n  };\n\n  TreeNode.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    this.syncLoadData(nextProps);\n  };\n\n  // Disabled item still can be switch\n\n\n  // Drag usage\n\n\n  TreeNode.prototype.isSelectable = function isSelectable() {\n    var selectable = this.props.selectable;\n    var treeSelectable = this.context.rcTree.selectable;\n\n    // Ignore when selectable is undefined or null\n\n    if (typeof selectable === 'boolean') {\n      return selectable;\n    }\n\n    return treeSelectable;\n  };\n\n  // Load data to avoid default expanded tree without data\n\n\n  // Switcher\n\n\n  // Checkbox\n\n\n  // Icon + Title\n\n\n  // Children list wrapped with `Animation`\n\n\n  TreeNode.prototype.render = function render() {\n    var _classNames;\n\n    var _props = this.props,\n        className = _props.className,\n        dragOver = _props.dragOver,\n        dragOverGapTop = _props.dragOverGapTop,\n        dragOverGapBottom = _props.dragOverGapBottom;\n    var _context$rcTree = this.context.rcTree,\n        prefixCls = _context$rcTree.prefixCls,\n        filterTreeNode = _context$rcTree.filterTreeNode;\n\n    var disabled = this.isDisabled();\n\n    return React.createElement(\n      'li',\n      {\n        className: classNames(className, (_classNames = {}, _classNames[prefixCls + '-treenode-disabled'] = disabled, _classNames['drag-over'] = !disabled && dragOver, _classNames['drag-over-gap-top'] = !disabled && dragOverGapTop, _classNames['drag-over-gap-bottom'] = !disabled && dragOverGapBottom, _classNames['filter-node'] = filterTreeNode && filterTreeNode(this), _classNames)),\n\n        onDragEnter: this.onDragEnter,\n        onDragOver: this.onDragOver,\n        onDragLeave: this.onDragLeave,\n        onDrop: this.onDrop,\n        onDragEnd: this.onDragEnd\n      },\n      this.renderSwitcher(),\n      this.renderCheckbox(),\n      this.renderSelector(),\n      this.renderChildren()\n    );\n  };\n\n  return TreeNode;\n}(React.Component);\n\nTreeNode.propTypes = {\n  eventKey: PropTypes.string, // Pass by parent `cloneElement`\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  root: PropTypes.object,\n  onSelect: PropTypes.func,\n\n  // By parent\n  expanded: PropTypes.bool,\n  selected: PropTypes.bool,\n  checked: PropTypes.bool,\n  halfChecked: PropTypes.bool,\n  children: PropTypes.node,\n  title: PropTypes.node,\n  pos: PropTypes.string,\n  dragOver: PropTypes.bool,\n  dragOverGapTop: PropTypes.bool,\n  dragOverGapBottom: PropTypes.bool,\n\n  // By user\n  isLeaf: PropTypes.bool,\n  selectable: PropTypes.bool,\n  disabled: PropTypes.bool,\n  disableCheckbox: PropTypes.bool,\n  icon: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n};\nTreeNode.contextTypes = nodeContextTypes;\nTreeNode.childContextTypes = nodeContextTypes;\nTreeNode.defaultProps = {\n  title: defaultTitle\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onUpCheckConduct = function (treeNode, nodeChecked, nodeHalfChecked) {\n    var nodePos = treeNode.props.pos;\n    var _props2 = _this2.props,\n        eventKey = _props2.eventKey,\n        pos = _props2.pos,\n        checked = _props2.checked,\n        halfChecked = _props2.halfChecked;\n    var _context = _this2.context,\n        _context$rcTree2 = _context.rcTree,\n        checkStrictly = _context$rcTree2.checkStrictly,\n        isKeyChecked = _context$rcTree2.isKeyChecked,\n        onBatchNodeCheck = _context$rcTree2.onBatchNodeCheck,\n        onCheckConductFinished = _context$rcTree2.onCheckConductFinished,\n        _context$rcTreeNode = _context.rcTreeNode;\n    _context$rcTreeNode = _context$rcTreeNode === undefined ? {} : _context$rcTreeNode;\n    var onUpCheckConduct = _context$rcTreeNode.onUpCheckConduct;\n\n    // Stop conduct when current node is disabled\n\n    if (isCheckDisabled(_this2)) {\n      onCheckConductFinished();\n      return;\n    }\n\n    var children = _this2.getNodeChildren();\n\n    var checkedCount = nodeChecked ? 1 : 0;\n\n    // Statistic checked count\n    children.forEach(function (node, index) {\n      var childPos = getPosition(pos, index);\n\n      if (nodePos === childPos || isCheckDisabled(node)) {\n        return;\n      }\n\n      if (isKeyChecked(node.key || childPos)) {\n        checkedCount += 1;\n      }\n    });\n\n    // Static enabled children count\n    var enabledChildrenCount = children.filter(function (node) {\n      return !isCheckDisabled(node);\n    }).length;\n\n    // checkStrictly will not conduct check status\n    var nextChecked = checkStrictly ? checked : enabledChildrenCount === checkedCount;\n    var nextHalfChecked = checkStrictly ? // propagated or child checked\n    halfChecked : nodeHalfChecked || checkedCount > 0 && !nextChecked;\n\n    // Add into batch update\n    if (checked !== nextChecked || halfChecked !== nextHalfChecked) {\n      onBatchNodeCheck(eventKey, nextChecked, nextHalfChecked);\n\n      if (onUpCheckConduct) {\n        onUpCheckConduct(_this2, nextChecked, nextHalfChecked);\n      } else {\n        // Flush all the update\n        onCheckConductFinished();\n      }\n    } else {\n      // Flush all the update\n      onCheckConductFinished();\n    }\n  };\n\n  this.onDownCheckConduct = function (nodeChecked) {\n    var children = _this2.props.children;\n    var _context$rcTree3 = _this2.context.rcTree,\n        checkStrictly = _context$rcTree3.checkStrictly,\n        isKeyChecked = _context$rcTree3.isKeyChecked,\n        onBatchNodeCheck = _context$rcTree3.onBatchNodeCheck;\n\n    if (checkStrictly) return;\n\n    traverseTreeNodes(children, function (_ref) {\n      var node = _ref.node,\n          key = _ref.key;\n\n      if (isCheckDisabled(node)) return false;\n\n      if (nodeChecked !== isKeyChecked(key)) {\n        onBatchNodeCheck(key, nodeChecked, false);\n      }\n    });\n  };\n\n  this.onSelectorClick = function (e) {\n    if (_this2.isSelectable()) {\n      _this2.onSelect(e);\n    } else {\n      _this2.onCheck(e);\n    }\n  };\n\n  this.onSelect = function (e) {\n    if (_this2.isDisabled()) return;\n\n    var onNodeSelect = _this2.context.rcTree.onNodeSelect;\n\n    e.preventDefault();\n    onNodeSelect(e, _this2);\n  };\n\n  this.onCheck = function (e) {\n    if (_this2.isDisabled()) return;\n\n    var _props3 = _this2.props,\n        disableCheckbox = _props3.disableCheckbox,\n        checked = _props3.checked,\n        eventKey = _props3.eventKey;\n    var _context2 = _this2.context,\n        _context2$rcTree = _context2.rcTree,\n        checkable = _context2$rcTree.checkable,\n        onBatchNodeCheck = _context2$rcTree.onBatchNodeCheck,\n        onCheckConductFinished = _context2$rcTree.onCheckConductFinished,\n        _context2$rcTreeNode = _context2.rcTreeNode;\n    _context2$rcTreeNode = _context2$rcTreeNode === undefined ? {} : _context2$rcTreeNode;\n    var onUpCheckConduct = _context2$rcTreeNode.onUpCheckConduct;\n\n\n    if (!checkable || disableCheckbox) return;\n\n    e.preventDefault();\n    var targetChecked = !checked;\n    onBatchNodeCheck(eventKey, targetChecked, false, _this2);\n\n    // Children conduct\n    _this2.onDownCheckConduct(targetChecked);\n\n    // Parent conduct\n    if (onUpCheckConduct) {\n      onUpCheckConduct(_this2, targetChecked, false);\n    } else {\n      onCheckConductFinished();\n    }\n  };\n\n  this.onMouseEnter = function (e) {\n    var onNodeMouseEnter = _this2.context.rcTree.onNodeMouseEnter;\n\n    onNodeMouseEnter(e, _this2);\n  };\n\n  this.onMouseLeave = function (e) {\n    var onNodeMouseLeave = _this2.context.rcTree.onNodeMouseLeave;\n\n    onNodeMouseLeave(e, _this2);\n  };\n\n  this.onContextMenu = function (e) {\n    var onNodeContextMenu = _this2.context.rcTree.onNodeContextMenu;\n\n    onNodeContextMenu(e, _this2);\n  };\n\n  this.onDragStart = function (e) {\n    var onNodeDragStart = _this2.context.rcTree.onNodeDragStart;\n\n\n    e.stopPropagation();\n    _this2.setState({\n      dragNodeHighlight: true\n    });\n    onNodeDragStart(e, _this2);\n\n    try {\n      // ie throw error\n      // firefox-need-it\n      e.dataTransfer.setData('text/plain', '');\n    } catch (error) {\n      // empty\n    }\n  };\n\n  this.onDragEnter = function (e) {\n    var onNodeDragEnter = _this2.context.rcTree.onNodeDragEnter;\n\n\n    e.preventDefault();\n    e.stopPropagation();\n    onNodeDragEnter(e, _this2);\n  };\n\n  this.onDragOver = function (e) {\n    var onNodeDragOver = _this2.context.rcTree.onNodeDragOver;\n\n\n    e.preventDefault();\n    e.stopPropagation();\n    onNodeDragOver(e, _this2);\n  };\n\n  this.onDragLeave = function (e) {\n    var onNodeDragLeave = _this2.context.rcTree.onNodeDragLeave;\n\n\n    e.stopPropagation();\n    onNodeDragLeave(e, _this2);\n  };\n\n  this.onDragEnd = function (e) {\n    var onNodeDragEnd = _this2.context.rcTree.onNodeDragEnd;\n\n\n    e.stopPropagation();\n    _this2.setState({\n      dragNodeHighlight: false\n    });\n    onNodeDragEnd(e, _this2);\n  };\n\n  this.onDrop = function (e) {\n    var onNodeDrop = _this2.context.rcTree.onNodeDrop;\n\n\n    e.preventDefault();\n    e.stopPropagation();\n    _this2.setState({\n      dragNodeHighlight: false\n    });\n    onNodeDrop(e, _this2);\n  };\n\n  this.onExpand = function (e) {\n    var onNodeExpand = _this2.context.rcTree.onNodeExpand;\n\n    var callbackPromise = onNodeExpand(e, _this2);\n\n    // Promise like\n    if (callbackPromise && callbackPromise.then) {\n      _this2.setState({ loadStatus: LOAD_STATUS_LOADING });\n\n      callbackPromise.then(function () {\n        _this2.setState({ loadStatus: LOAD_STATUS_LOADED });\n      })['catch'](function () {\n        _this2.setState({ loadStatus: LOAD_STATUS_FAILED });\n      });\n    }\n  };\n\n  this.setSelectHandle = function (node) {\n    _this2.selectHandle = node;\n  };\n\n  this.getNodeChildren = function () {\n    var children = _this2.props.children;\n\n    var originList = toArray(children).filter(function (node) {\n      return node;\n    });\n    var targetList = getNodeChildren(originList);\n\n    if (originList.length !== targetList.length && !onlyTreeNodeWarned) {\n      onlyTreeNodeWarned = true;\n      warning(false, 'Tree only accept TreeNode as children.');\n    }\n\n    return targetList;\n  };\n\n  this.getNodeState = function () {\n    var expanded = _this2.props.expanded;\n\n\n    if (_this2.isLeaf()) {\n      return null;\n    }\n\n    return expanded ? ICON_OPEN : ICON_CLOSE;\n  };\n\n  this.isLeaf = function () {\n    var loadStatus = _this2.state.loadStatus;\n    var isLeaf = _this2.props.isLeaf;\n    var loadData = _this2.context.rcTree.loadData;\n\n\n    var hasChildren = _this2.getNodeChildren().length !== 0;\n\n    return isLeaf || !loadData && !hasChildren || loadData && loadStatus === LOAD_STATUS_LOADED && !hasChildren;\n  };\n\n  this.isDisabled = function () {\n    var disabled = _this2.props.disabled;\n    var treeDisabled = _this2.context.rcTree.disabled;\n\n    // Follow the logic of Selectable\n\n    if (disabled === false) {\n      return false;\n    }\n\n    return !!(treeDisabled || disabled);\n  };\n\n  this.syncLoadData = function (props) {\n    var expanded = props.expanded;\n    var loadData = _this2.context.rcTree.loadData;\n\n    // read from state to avoid loadData at same time\n\n    _this2.setState(function (_ref2) {\n      var loadStatus = _ref2.loadStatus;\n\n      if (loadData && loadStatus === LOAD_STATUS_NONE && expanded && !_this2.isLeaf()) {\n        loadData(_this2).then(function () {\n          _this2.setState({ loadStatus: LOAD_STATUS_LOADED });\n        })['catch'](function () {\n          _this2.setState({ loadStatus: LOAD_STATUS_FAILED });\n        });\n\n        return { loadStatus: LOAD_STATUS_LOADING };\n      }\n\n      return null;\n    });\n  };\n\n  this.renderSwitcher = function () {\n    var expanded = _this2.props.expanded;\n    var prefixCls = _this2.context.rcTree.prefixCls;\n\n\n    if (_this2.isLeaf()) {\n      return React.createElement('span', { className: prefixCls + '-switcher ' + prefixCls + '-switcher-noop' });\n    }\n\n    return React.createElement('span', {\n      className: classNames(prefixCls + '-switcher', prefixCls + '-switcher_' + (expanded ? ICON_OPEN : ICON_CLOSE)),\n      onClick: _this2.onExpand\n    });\n  };\n\n  this.renderCheckbox = function () {\n    var _props4 = _this2.props,\n        checked = _props4.checked,\n        halfChecked = _props4.halfChecked,\n        disableCheckbox = _props4.disableCheckbox;\n    var _context$rcTree4 = _this2.context.rcTree,\n        prefixCls = _context$rcTree4.prefixCls,\n        checkable = _context$rcTree4.checkable;\n\n    var disabled = _this2.isDisabled();\n\n    if (!checkable) return null;\n\n    // [Legacy] Custom element should be separate with `checkable` in future\n    var $custom = typeof checkable !== 'boolean' ? checkable : null;\n\n    return React.createElement(\n      'span',\n      {\n        className: classNames(prefixCls + '-checkbox', checked && prefixCls + '-checkbox-checked', !checked && halfChecked && prefixCls + '-checkbox-indeterminate', (disabled || disableCheckbox) && prefixCls + '-checkbox-disabled'),\n        onClick: _this2.onCheck\n      },\n      $custom\n    );\n  };\n\n  this.renderIcon = function () {\n    var loadStatus = _this2.state.loadStatus;\n    var prefixCls = _this2.context.rcTree.prefixCls;\n\n\n    return React.createElement('span', {\n      className: classNames(prefixCls + '-iconEle', prefixCls + '-icon__' + (_this2.getNodeState() || 'docu'), loadStatus === LOAD_STATUS_LOADING && prefixCls + '-icon_loading')\n    });\n  };\n\n  this.renderSelector = function () {\n    var _state = _this2.state,\n        loadStatus = _state.loadStatus,\n        dragNodeHighlight = _state.dragNodeHighlight;\n    var _props5 = _this2.props,\n        title = _props5.title,\n        selected = _props5.selected,\n        icon = _props5.icon;\n    var _context$rcTree5 = _this2.context.rcTree,\n        prefixCls = _context$rcTree5.prefixCls,\n        showIcon = _context$rcTree5.showIcon,\n        treeIcon = _context$rcTree5.icon,\n        draggable = _context$rcTree5.draggable,\n        loadData = _context$rcTree5.loadData;\n\n    var disabled = _this2.isDisabled();\n\n    var wrapClass = prefixCls + '-node-content-wrapper';\n\n    // Icon - Still show loading icon when loading without showIcon\n    var $icon = void 0;\n\n    if (showIcon) {\n      var currentIcon = icon || treeIcon;\n\n      $icon = currentIcon ? React.createElement(\n        'span',\n        {\n          className: classNames(prefixCls + '-iconEle', prefixCls + '-icon__customize')\n        },\n        typeof currentIcon === 'function' ? React.createElement(currentIcon, _this2.props) : currentIcon\n      ) : _this2.renderIcon();\n    } else if (loadData && loadStatus === LOAD_STATUS_LOADING) {\n      $icon = _this2.renderIcon();\n    }\n\n    // Title\n    var $title = React.createElement(\n      'span',\n      { className: prefixCls + '-title' },\n      title\n    );\n\n    return React.createElement(\n      'span',\n      {\n        ref: _this2.setSelectHandle,\n        title: typeof title === 'string' ? title : '',\n        className: classNames('' + wrapClass, wrapClass + '-' + (_this2.getNodeState() || 'normal'), !disabled && (selected || dragNodeHighlight) && prefixCls + '-node-selected', !disabled && draggable && 'draggable'),\n        draggable: !disabled && draggable || undefined,\n        'aria-grabbed': !disabled && draggable || undefined,\n\n        onMouseEnter: _this2.onMouseEnter,\n        onMouseLeave: _this2.onMouseLeave,\n        onContextMenu: _this2.onContextMenu,\n        onClick: _this2.onSelectorClick,\n        onDragStart: _this2.onDragStart\n      },\n      $icon,\n      $title\n    );\n  };\n\n  this.renderChildren = function () {\n    var _props6 = _this2.props,\n        expanded = _props6.expanded,\n        pos = _props6.pos;\n    var _context$rcTree6 = _this2.context.rcTree,\n        prefixCls = _context$rcTree6.prefixCls,\n        openTransitionName = _context$rcTree6.openTransitionName,\n        openAnimation = _context$rcTree6.openAnimation,\n        renderTreeNode = _context$rcTree6.renderTreeNode;\n\n    // [Legacy] Animation control\n\n    var renderFirst = _this2.renderFirst;\n    _this2.renderFirst = 1;\n    var transitionAppear = true;\n    if (!renderFirst && expanded) {\n      transitionAppear = false;\n    }\n\n    var animProps = {};\n    if (openTransitionName) {\n      animProps.transitionName = openTransitionName;\n    } else if (typeof openAnimation === 'object') {\n      animProps.animation = _extends({}, openAnimation);\n      if (!transitionAppear) {\n        delete animProps.animation.appear;\n      }\n    }\n\n    // Children TreeNode\n    var nodeList = _this2.getNodeChildren();\n\n    if (nodeList.length === 0) {\n      return null;\n    }\n\n    var $children = void 0;\n    if (expanded) {\n      $children = React.createElement(\n        'ul',\n        {\n          className: classNames(prefixCls + '-child-tree', expanded && prefixCls + '-child-tree-open'),\n          'data-expanded': expanded\n        },\n        React.Children.map(nodeList, function (node, index) {\n          return renderTreeNode(node, index, pos);\n        })\n      );\n    }\n\n    return React.createElement(\n      Animate,\n      _extends({}, animProps, {\n        showProp: 'data-expanded',\n        transitionAppear: transitionAppear,\n        component: ''\n      }),\n      $children\n    );\n  };\n};\n\nTreeNode.isTreeNode = 1;\n\nexport default TreeNode;"]},"metadata":{},"sourceType":"module"}