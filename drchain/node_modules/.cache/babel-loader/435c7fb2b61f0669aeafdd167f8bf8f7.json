{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport RcCascader from 'rc-cascader';\nimport arrayTreeFilter from 'array-tree-filter';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport Input from '../input';\nimport Icon from '../icon';\n\nfunction highlightKeyword(str, keyword, prefixCls) {\n  return str.split(keyword).map(function (node, index) {\n    return index === 0 ? node : [React.createElement('span', {\n      className: prefixCls + '-menu-item-keyword',\n      key: 'seperator'\n    }, keyword), node];\n  });\n}\n\nfunction defaultFilterOption(inputValue, path) {\n  return path.some(function (option) {\n    return option.label.indexOf(inputValue) > -1;\n  });\n}\n\nfunction defaultRenderFilteredOption(inputValue, path, prefixCls) {\n  return path.map(function (_ref, index) {\n    var label = _ref.label;\n    var node = label.indexOf(inputValue) > -1 ? highlightKeyword(label, inputValue, prefixCls) : label;\n    return index === 0 ? node : [' / ', node];\n  });\n}\n\nfunction defaultSortFilteredOption(a, b, inputValue) {\n  function callback(elem) {\n    return elem.label.indexOf(inputValue) > -1;\n  }\n\n  return a.findIndex(callback) - b.findIndex(callback);\n}\n\nvar defaultDisplayRender = function defaultDisplayRender(label) {\n  return label.join(' / ');\n};\n\nvar Cascader = function (_React$Component) {\n  _inherits(Cascader, _React$Component);\n\n  function Cascader(props) {\n    _classCallCheck(this, Cascader);\n\n    var _this = _possibleConstructorReturn(this, (Cascader.__proto__ || Object.getPrototypeOf(Cascader)).call(this, props));\n\n    _this.handleChange = function (value, selectedOptions) {\n      _this.setState({\n        inputValue: ''\n      });\n\n      if (selectedOptions[0].__IS_FILTERED_OPTION) {\n        var unwrappedValue = value[0];\n        var unwrappedSelectedOptions = selectedOptions[0].path;\n\n        _this.setValue(unwrappedValue, unwrappedSelectedOptions);\n\n        return;\n      }\n\n      _this.setValue(value, selectedOptions);\n    };\n\n    _this.handlePopupVisibleChange = function (popupVisible) {\n      if (!('popupVisible' in _this.props)) {\n        _this.setState({\n          popupVisible: popupVisible,\n          inputFocused: popupVisible,\n          inputValue: popupVisible ? _this.state.inputValue : ''\n        });\n      }\n\n      var onPopupVisibleChange = _this.props.onPopupVisibleChange;\n\n      if (onPopupVisibleChange) {\n        onPopupVisibleChange(popupVisible);\n      }\n    };\n\n    _this.handleInputBlur = function () {\n      _this.setState({\n        inputFocused: false\n      });\n    };\n\n    _this.handleInputClick = function (e) {\n      var _this$state = _this.state,\n          inputFocused = _this$state.inputFocused,\n          popupVisible = _this$state.popupVisible; // Prevent `Trigger` behaviour.\n\n      if (inputFocused || popupVisible) {\n        e.stopPropagation();\n        e.nativeEvent.stopImmediatePropagation();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (e.keyCode === KeyCode.BACKSPACE) {\n        e.stopPropagation();\n      }\n    };\n\n    _this.handleInputChange = function (e) {\n      var inputValue = e.target.value;\n\n      _this.setState({\n        inputValue: inputValue\n      });\n    };\n\n    _this.setValue = function (value) {\n      var selectedOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange(value, selectedOptions);\n      }\n    };\n\n    _this.clearSelection = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!_this.state.inputValue) {\n        _this.setValue([]);\n\n        _this.handlePopupVisibleChange(false);\n      } else {\n        _this.setState({\n          inputValue: ''\n        });\n      }\n    };\n\n    _this.saveInput = function (node) {\n      _this.input = node;\n    };\n\n    _this.state = {\n      value: props.value || props.defaultValue || [],\n      inputValue: '',\n      inputFocused: false,\n      popupVisible: props.popupVisible,\n      flattenOptions: props.showSearch && _this.flattenTree(props.options, props.changeOnSelect)\n    };\n    return _this;\n  }\n\n  _createClass(Cascader, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('value' in nextProps) {\n        this.setState({\n          value: nextProps.value || []\n        });\n      }\n\n      if ('popupVisible' in nextProps) {\n        this.setState({\n          popupVisible: nextProps.popupVisible\n        });\n      }\n\n      if (nextProps.showSearch && this.props.options !== nextProps.options) {\n        this.setState({\n          flattenOptions: this.flattenTree(nextProps.options, nextProps.changeOnSelect)\n        });\n      }\n    }\n  }, {\n    key: 'getLabel',\n    value: function getLabel() {\n      var _props = this.props,\n          options = _props.options,\n          _props$displayRender = _props.displayRender,\n          displayRender = _props$displayRender === undefined ? defaultDisplayRender : _props$displayRender;\n      var value = this.state.value;\n      var unwrappedValue = Array.isArray(value[0]) ? value[0] : value;\n      var selectedOptions = arrayTreeFilter(options, function (o, level) {\n        return o.value === unwrappedValue[level];\n      });\n      var label = selectedOptions.map(function (o) {\n        return o.label;\n      });\n      return displayRender(label, selectedOptions);\n    }\n  }, {\n    key: 'flattenTree',\n    value: function flattenTree(options, changeOnSelect) {\n      var _this2 = this;\n\n      var ancestor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      var flattenOptions = [];\n      options.forEach(function (option) {\n        var path = ancestor.concat(option);\n\n        if (changeOnSelect || !option.children || !option.children.length) {\n          flattenOptions.push(path);\n        }\n\n        if (option.children) {\n          flattenOptions = flattenOptions.concat(_this2.flattenTree(option.children, changeOnSelect, path));\n        }\n      });\n      return flattenOptions;\n    }\n  }, {\n    key: 'generateFilteredOptions',\n    value: function generateFilteredOptions(prefixCls) {\n      var _this3 = this;\n\n      var _props2 = this.props,\n          showSearch = _props2.showSearch,\n          notFoundContent = _props2.notFoundContent;\n      var _showSearch$filter = showSearch.filter,\n          filter = _showSearch$filter === undefined ? defaultFilterOption : _showSearch$filter,\n          _showSearch$render = showSearch.render,\n          render = _showSearch$render === undefined ? defaultRenderFilteredOption : _showSearch$render,\n          _showSearch$sort = showSearch.sort,\n          sort = _showSearch$sort === undefined ? defaultSortFilteredOption : _showSearch$sort;\n      var _state = this.state,\n          flattenOptions = _state.flattenOptions,\n          inputValue = _state.inputValue;\n      var filtered = flattenOptions.filter(function (path) {\n        return filter(_this3.state.inputValue, path);\n      }).sort(function (a, b) {\n        return sort(a, b, inputValue);\n      });\n\n      if (filtered.length > 0) {\n        return filtered.map(function (path) {\n          return {\n            __IS_FILTERED_OPTION: true,\n            path: path,\n            label: render(inputValue, path, prefixCls),\n            value: path.map(function (o) {\n              return o.value;\n            }),\n            disabled: path.some(function (o) {\n              return o.disabled;\n            })\n          };\n        });\n      }\n\n      return [{\n        label: notFoundContent,\n        value: 'ANT_CASCADER_NOT_FOUND',\n        disabled: true\n      }];\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      this.input.focus();\n    }\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.input.blur();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classNames, _classNames2, _classNames3;\n\n      var props = this.props,\n          state = this.state;\n\n      var prefixCls = props.prefixCls,\n          inputPrefixCls = props.inputPrefixCls,\n          children = props.children,\n          placeholder = props.placeholder,\n          size = props.size,\n          disabled = props.disabled,\n          className = props.className,\n          style = props.style,\n          allowClear = props.allowClear,\n          _props$showSearch = props.showSearch,\n          showSearch = _props$showSearch === undefined ? false : _props$showSearch,\n          otherProps = __rest(props, [\"prefixCls\", \"inputPrefixCls\", \"children\", \"placeholder\", \"size\", \"disabled\", \"className\", \"style\", \"allowClear\", \"showSearch\"]);\n\n      var value = state.value;\n      var sizeCls = classNames((_classNames = {}, _defineProperty(_classNames, inputPrefixCls + '-lg', size === 'large'), _defineProperty(_classNames, inputPrefixCls + '-sm', size === 'small'), _classNames));\n      var clearIcon = allowClear && !disabled && value.length > 0 || state.inputValue ? React.createElement(Icon, {\n        type: 'cross-circle',\n        className: prefixCls + '-picker-clear',\n        onClick: this.clearSelection\n      }) : null;\n      var arrowCls = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-picker-arrow', true), _defineProperty(_classNames2, prefixCls + '-picker-arrow-expand', state.popupVisible), _classNames2));\n      var pickerCls = classNames(className, prefixCls + '-picker', (_classNames3 = {}, _defineProperty(_classNames3, prefixCls + '-picker-with-value', state.inputValue), _defineProperty(_classNames3, prefixCls + '-picker-disabled', disabled), _defineProperty(_classNames3, prefixCls + '-picker-' + size, !!size), _classNames3)); // Fix bug of https://github.com/facebook/react/pull/5004\n      // and https://fb.me/react-unknown-prop\n\n      var inputProps = omit(otherProps, ['onChange', 'options', 'popupPlacement', 'transitionName', 'displayRender', 'onPopupVisibleChange', 'changeOnSelect', 'expandTrigger', 'popupVisible', 'getPopupContainer', 'loadData', 'popupClassName', 'filterOption', 'renderFilteredOption', 'sortFilteredOption', 'notFoundContent']);\n      var options = props.options;\n\n      if (state.inputValue) {\n        options = this.generateFilteredOptions(prefixCls);\n      } // Dropdown menu should keep previous status until it is fully closed.\n\n\n      if (!state.popupVisible) {\n        options = this.cachedOptions;\n      } else {\n        this.cachedOptions = options;\n      }\n\n      var dropdownMenuColumnStyle = {};\n      var isNotFound = (options || []).length === 1 && options[0].value === 'ANT_CASCADER_NOT_FOUND';\n\n      if (isNotFound) {\n        dropdownMenuColumnStyle.height = 'auto'; // Height of one row.\n      } // The default value of `matchInputWidth` is `true`\n\n\n      var resultListMatchInputWidth = showSearch.matchInputWidth === false ? false : true;\n\n      if (resultListMatchInputWidth && state.inputValue && this.input) {\n        dropdownMenuColumnStyle.width = this.input.input.offsetWidth;\n      }\n\n      var input = children || React.createElement('span', {\n        style: style,\n        className: pickerCls\n      }, React.createElement('span', {\n        className: prefixCls + '-picker-label'\n      }, this.getLabel()), React.createElement(Input, _extends({}, inputProps, {\n        ref: this.saveInput,\n        prefixCls: inputPrefixCls,\n        placeholder: value && value.length > 0 ? undefined : placeholder,\n        className: prefixCls + '-input ' + sizeCls,\n        value: state.inputValue,\n        disabled: disabled,\n        readOnly: !showSearch,\n        autoComplete: 'off',\n        onClick: showSearch ? this.handleInputClick : undefined,\n        onBlur: showSearch ? this.handleInputBlur : undefined,\n        onKeyDown: this.handleKeyDown,\n        onChange: showSearch ? this.handleInputChange : undefined\n      })), clearIcon, React.createElement(Icon, {\n        type: 'down',\n        className: arrowCls\n      }));\n      return React.createElement(RcCascader, _extends({}, props, {\n        options: options,\n        value: value,\n        popupVisible: state.popupVisible,\n        onPopupVisibleChange: this.handlePopupVisibleChange,\n        onChange: this.handleChange,\n        dropdownMenuColumnStyle: dropdownMenuColumnStyle\n      }), input);\n    }\n  }]);\n\n  return Cascader;\n}(React.Component);\n\nexport default Cascader;\nCascader.defaultProps = {\n  prefixCls: 'ant-cascader',\n  inputPrefixCls: 'ant-input',\n  placeholder: 'Please select',\n  transitionName: 'slide-up',\n  popupPlacement: 'bottomLeft',\n  options: [],\n  disabled: false,\n  allowClear: true,\n  notFoundContent: 'Not Found'\n};","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/antd/es/cascader/index.js"],"names":["_extends","_defineProperty","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","React","RcCascader","arrayTreeFilter","classNames","omit","KeyCode","Input","Icon","highlightKeyword","str","keyword","prefixCls","split","map","node","index","createElement","className","key","defaultFilterOption","inputValue","path","some","option","label","defaultRenderFilteredOption","_ref","defaultSortFilteredOption","a","b","callback","elem","findIndex","defaultDisplayRender","join","Cascader","_React$Component","props","_this","__proto__","getPrototypeOf","handleChange","value","selectedOptions","setState","__IS_FILTERED_OPTION","unwrappedValue","unwrappedSelectedOptions","setValue","handlePopupVisibleChange","popupVisible","inputFocused","state","onPopupVisibleChange","handleInputBlur","handleInputClick","_this$state","stopPropagation","nativeEvent","stopImmediatePropagation","handleKeyDown","keyCode","BACKSPACE","handleInputChange","target","arguments","undefined","onChange","clearSelection","preventDefault","saveInput","input","defaultValue","flattenOptions","showSearch","flattenTree","options","changeOnSelect","componentWillReceiveProps","nextProps","getLabel","_props","_props$displayRender","displayRender","Array","isArray","o","level","_this2","ancestor","forEach","concat","children","push","generateFilteredOptions","_this3","_props2","notFoundContent","_showSearch$filter","filter","_showSearch$render","render","_showSearch$sort","sort","_state","filtered","disabled","focus","blur","_classNames","_classNames2","_classNames3","inputPrefixCls","placeholder","size","style","allowClear","_props$showSearch","otherProps","sizeCls","clearIcon","type","onClick","arrowCls","pickerCls","inputProps","cachedOptions","dropdownMenuColumnStyle","isNotFound","height","resultListMatchInputWidth","matchInputWidth","width","offsetWidth","ref","readOnly","autoComplete","onBlur","onKeyDown","Component","defaultProps","transitionName","popupPlacement"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar __rest = this && this.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\nimport * as React from 'react';\nimport RcCascader from 'rc-cascader';\nimport arrayTreeFilter from 'array-tree-filter';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport Input from '../input';\nimport Icon from '../icon';\nfunction highlightKeyword(str, keyword, prefixCls) {\n    return str.split(keyword).map(function (node, index) {\n        return index === 0 ? node : [React.createElement(\n            'span',\n            { className: prefixCls + '-menu-item-keyword', key: 'seperator' },\n            keyword\n        ), node];\n    });\n}\nfunction defaultFilterOption(inputValue, path) {\n    return path.some(function (option) {\n        return option.label.indexOf(inputValue) > -1;\n    });\n}\nfunction defaultRenderFilteredOption(inputValue, path, prefixCls) {\n    return path.map(function (_ref, index) {\n        var label = _ref.label;\n\n        var node = label.indexOf(inputValue) > -1 ? highlightKeyword(label, inputValue, prefixCls) : label;\n        return index === 0 ? node : [' / ', node];\n    });\n}\nfunction defaultSortFilteredOption(a, b, inputValue) {\n    function callback(elem) {\n        return elem.label.indexOf(inputValue) > -1;\n    }\n    return a.findIndex(callback) - b.findIndex(callback);\n}\nvar defaultDisplayRender = function defaultDisplayRender(label) {\n    return label.join(' / ');\n};\n\nvar Cascader = function (_React$Component) {\n    _inherits(Cascader, _React$Component);\n\n    function Cascader(props) {\n        _classCallCheck(this, Cascader);\n\n        var _this = _possibleConstructorReturn(this, (Cascader.__proto__ || Object.getPrototypeOf(Cascader)).call(this, props));\n\n        _this.handleChange = function (value, selectedOptions) {\n            _this.setState({ inputValue: '' });\n            if (selectedOptions[0].__IS_FILTERED_OPTION) {\n                var unwrappedValue = value[0];\n                var unwrappedSelectedOptions = selectedOptions[0].path;\n                _this.setValue(unwrappedValue, unwrappedSelectedOptions);\n                return;\n            }\n            _this.setValue(value, selectedOptions);\n        };\n        _this.handlePopupVisibleChange = function (popupVisible) {\n            if (!('popupVisible' in _this.props)) {\n                _this.setState({\n                    popupVisible: popupVisible,\n                    inputFocused: popupVisible,\n                    inputValue: popupVisible ? _this.state.inputValue : ''\n                });\n            }\n            var onPopupVisibleChange = _this.props.onPopupVisibleChange;\n            if (onPopupVisibleChange) {\n                onPopupVisibleChange(popupVisible);\n            }\n        };\n        _this.handleInputBlur = function () {\n            _this.setState({\n                inputFocused: false\n            });\n        };\n        _this.handleInputClick = function (e) {\n            var _this$state = _this.state,\n                inputFocused = _this$state.inputFocused,\n                popupVisible = _this$state.popupVisible;\n            // Prevent `Trigger` behaviour.\n\n            if (inputFocused || popupVisible) {\n                e.stopPropagation();\n                e.nativeEvent.stopImmediatePropagation();\n            }\n        };\n        _this.handleKeyDown = function (e) {\n            if (e.keyCode === KeyCode.BACKSPACE) {\n                e.stopPropagation();\n            }\n        };\n        _this.handleInputChange = function (e) {\n            var inputValue = e.target.value;\n            _this.setState({ inputValue: inputValue });\n        };\n        _this.setValue = function (value) {\n            var selectedOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n            if (!('value' in _this.props)) {\n                _this.setState({ value: value });\n            }\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                onChange(value, selectedOptions);\n            }\n        };\n        _this.clearSelection = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            if (!_this.state.inputValue) {\n                _this.setValue([]);\n                _this.handlePopupVisibleChange(false);\n            } else {\n                _this.setState({ inputValue: '' });\n            }\n        };\n        _this.saveInput = function (node) {\n            _this.input = node;\n        };\n        _this.state = {\n            value: props.value || props.defaultValue || [],\n            inputValue: '',\n            inputFocused: false,\n            popupVisible: props.popupVisible,\n            flattenOptions: props.showSearch && _this.flattenTree(props.options, props.changeOnSelect)\n        };\n        return _this;\n    }\n\n    _createClass(Cascader, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if ('value' in nextProps) {\n                this.setState({ value: nextProps.value || [] });\n            }\n            if ('popupVisible' in nextProps) {\n                this.setState({ popupVisible: nextProps.popupVisible });\n            }\n            if (nextProps.showSearch && this.props.options !== nextProps.options) {\n                this.setState({ flattenOptions: this.flattenTree(nextProps.options, nextProps.changeOnSelect) });\n            }\n        }\n    }, {\n        key: 'getLabel',\n        value: function getLabel() {\n            var _props = this.props,\n                options = _props.options,\n                _props$displayRender = _props.displayRender,\n                displayRender = _props$displayRender === undefined ? defaultDisplayRender : _props$displayRender;\n\n            var value = this.state.value;\n            var unwrappedValue = Array.isArray(value[0]) ? value[0] : value;\n            var selectedOptions = arrayTreeFilter(options, function (o, level) {\n                return o.value === unwrappedValue[level];\n            });\n            var label = selectedOptions.map(function (o) {\n                return o.label;\n            });\n            return displayRender(label, selectedOptions);\n        }\n    }, {\n        key: 'flattenTree',\n        value: function flattenTree(options, changeOnSelect) {\n            var _this2 = this;\n\n            var ancestor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n            var flattenOptions = [];\n            options.forEach(function (option) {\n                var path = ancestor.concat(option);\n                if (changeOnSelect || !option.children || !option.children.length) {\n                    flattenOptions.push(path);\n                }\n                if (option.children) {\n                    flattenOptions = flattenOptions.concat(_this2.flattenTree(option.children, changeOnSelect, path));\n                }\n            });\n            return flattenOptions;\n        }\n    }, {\n        key: 'generateFilteredOptions',\n        value: function generateFilteredOptions(prefixCls) {\n            var _this3 = this;\n\n            var _props2 = this.props,\n                showSearch = _props2.showSearch,\n                notFoundContent = _props2.notFoundContent;\n            var _showSearch$filter = showSearch.filter,\n                filter = _showSearch$filter === undefined ? defaultFilterOption : _showSearch$filter,\n                _showSearch$render = showSearch.render,\n                render = _showSearch$render === undefined ? defaultRenderFilteredOption : _showSearch$render,\n                _showSearch$sort = showSearch.sort,\n                sort = _showSearch$sort === undefined ? defaultSortFilteredOption : _showSearch$sort;\n            var _state = this.state,\n                flattenOptions = _state.flattenOptions,\n                inputValue = _state.inputValue;\n\n            var filtered = flattenOptions.filter(function (path) {\n                return filter(_this3.state.inputValue, path);\n            }).sort(function (a, b) {\n                return sort(a, b, inputValue);\n            });\n            if (filtered.length > 0) {\n                return filtered.map(function (path) {\n                    return {\n                        __IS_FILTERED_OPTION: true,\n                        path: path,\n                        label: render(inputValue, path, prefixCls),\n                        value: path.map(function (o) {\n                            return o.value;\n                        }),\n                        disabled: path.some(function (o) {\n                            return o.disabled;\n                        })\n                    };\n                });\n            }\n            return [{ label: notFoundContent, value: 'ANT_CASCADER_NOT_FOUND', disabled: true }];\n        }\n    }, {\n        key: 'focus',\n        value: function focus() {\n            this.input.focus();\n        }\n    }, {\n        key: 'blur',\n        value: function blur() {\n            this.input.blur();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _classNames, _classNames2, _classNames3;\n\n            var props = this.props,\n                state = this.state;\n\n            var prefixCls = props.prefixCls,\n                inputPrefixCls = props.inputPrefixCls,\n                children = props.children,\n                placeholder = props.placeholder,\n                size = props.size,\n                disabled = props.disabled,\n                className = props.className,\n                style = props.style,\n                allowClear = props.allowClear,\n                _props$showSearch = props.showSearch,\n                showSearch = _props$showSearch === undefined ? false : _props$showSearch,\n                otherProps = __rest(props, [\"prefixCls\", \"inputPrefixCls\", \"children\", \"placeholder\", \"size\", \"disabled\", \"className\", \"style\", \"allowClear\", \"showSearch\"]);\n\n            var value = state.value;\n            var sizeCls = classNames((_classNames = {}, _defineProperty(_classNames, inputPrefixCls + '-lg', size === 'large'), _defineProperty(_classNames, inputPrefixCls + '-sm', size === 'small'), _classNames));\n            var clearIcon = allowClear && !disabled && value.length > 0 || state.inputValue ? React.createElement(Icon, { type: 'cross-circle', className: prefixCls + '-picker-clear', onClick: this.clearSelection }) : null;\n            var arrowCls = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-picker-arrow', true), _defineProperty(_classNames2, prefixCls + '-picker-arrow-expand', state.popupVisible), _classNames2));\n            var pickerCls = classNames(className, prefixCls + '-picker', (_classNames3 = {}, _defineProperty(_classNames3, prefixCls + '-picker-with-value', state.inputValue), _defineProperty(_classNames3, prefixCls + '-picker-disabled', disabled), _defineProperty(_classNames3, prefixCls + '-picker-' + size, !!size), _classNames3));\n            // Fix bug of https://github.com/facebook/react/pull/5004\n            // and https://fb.me/react-unknown-prop\n            var inputProps = omit(otherProps, ['onChange', 'options', 'popupPlacement', 'transitionName', 'displayRender', 'onPopupVisibleChange', 'changeOnSelect', 'expandTrigger', 'popupVisible', 'getPopupContainer', 'loadData', 'popupClassName', 'filterOption', 'renderFilteredOption', 'sortFilteredOption', 'notFoundContent']);\n            var options = props.options;\n            if (state.inputValue) {\n                options = this.generateFilteredOptions(prefixCls);\n            }\n            // Dropdown menu should keep previous status until it is fully closed.\n            if (!state.popupVisible) {\n                options = this.cachedOptions;\n            } else {\n                this.cachedOptions = options;\n            }\n            var dropdownMenuColumnStyle = {};\n            var isNotFound = (options || []).length === 1 && options[0].value === 'ANT_CASCADER_NOT_FOUND';\n            if (isNotFound) {\n                dropdownMenuColumnStyle.height = 'auto'; // Height of one row.\n            }\n            // The default value of `matchInputWidth` is `true`\n            var resultListMatchInputWidth = showSearch.matchInputWidth === false ? false : true;\n            if (resultListMatchInputWidth && state.inputValue && this.input) {\n                dropdownMenuColumnStyle.width = this.input.input.offsetWidth;\n            }\n            var input = children || React.createElement(\n                'span',\n                { style: style, className: pickerCls },\n                React.createElement(\n                    'span',\n                    { className: prefixCls + '-picker-label' },\n                    this.getLabel()\n                ),\n                React.createElement(Input, _extends({}, inputProps, { ref: this.saveInput, prefixCls: inputPrefixCls, placeholder: value && value.length > 0 ? undefined : placeholder, className: prefixCls + '-input ' + sizeCls, value: state.inputValue, disabled: disabled, readOnly: !showSearch, autoComplete: 'off', onClick: showSearch ? this.handleInputClick : undefined, onBlur: showSearch ? this.handleInputBlur : undefined, onKeyDown: this.handleKeyDown, onChange: showSearch ? this.handleInputChange : undefined })),\n                clearIcon,\n                React.createElement(Icon, { type: 'down', className: arrowCls })\n            );\n            return React.createElement(\n                RcCascader,\n                _extends({}, props, { options: options, value: value, popupVisible: state.popupVisible, onPopupVisibleChange: this.handlePopupVisibleChange, onChange: this.handleChange, dropdownMenuColumnStyle: dropdownMenuColumnStyle }),\n                input\n            );\n        }\n    }]);\n\n    return Cascader;\n}(React.Component);\n\nexport default Cascader;\n\nCascader.defaultProps = {\n    prefixCls: 'ant-cascader',\n    inputPrefixCls: 'ant-input',\n    placeholder: 'Please select',\n    transitionName: 'slide-up',\n    popupPlacement: 'bottomLeft',\n    options: [],\n    disabled: false,\n    allowClear: true,\n    notFoundContent: 'Not Found'\n};"]},"metadata":{},"sourceType":"module"}