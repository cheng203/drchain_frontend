{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'mini-store';\nimport { polyfill } from 'react-lifecycles-compat';\nimport TableCell from './TableCell';\nimport { warningOnce } from './utils';\n\nvar TableRow = function (_React$Component) {\n  _inherits(TableRow, _React$Component);\n\n  TableRow.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    if (prevState.visible || !prevState.visible && nextProps.visible) {\n      return {\n        shouldRender: true,\n        visible: nextProps.visible\n      };\n    }\n\n    return {\n      visible: nextProps.visible\n    };\n  };\n\n  function TableRow(props) {\n    _classCallCheck(this, TableRow);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.onRowClick = function (event) {\n      var _this$props = _this.props,\n          record = _this$props.record,\n          index = _this$props.index,\n          onRowClick = _this$props.onRowClick;\n\n      if (onRowClick) {\n        onRowClick(record, index, event);\n      }\n    };\n\n    _this.onRowDoubleClick = function (event) {\n      var _this$props2 = _this.props,\n          record = _this$props2.record,\n          index = _this$props2.index,\n          onRowDoubleClick = _this$props2.onRowDoubleClick;\n\n      if (onRowDoubleClick) {\n        onRowDoubleClick(record, index, event);\n      }\n    };\n\n    _this.onContextMenu = function (event) {\n      var _this$props3 = _this.props,\n          record = _this$props3.record,\n          index = _this$props3.index,\n          onRowContextMenu = _this$props3.onRowContextMenu;\n\n      if (onRowContextMenu) {\n        onRowContextMenu(record, index, event);\n      }\n    };\n\n    _this.onMouseEnter = function (event) {\n      var _this$props4 = _this.props,\n          record = _this$props4.record,\n          index = _this$props4.index,\n          onRowMouseEnter = _this$props4.onRowMouseEnter,\n          onHover = _this$props4.onHover,\n          rowKey = _this$props4.rowKey;\n      onHover(true, rowKey);\n\n      if (onRowMouseEnter) {\n        onRowMouseEnter(record, index, event);\n      }\n    };\n\n    _this.onMouseLeave = function (event) {\n      var _this$props5 = _this.props,\n          record = _this$props5.record,\n          index = _this$props5.index,\n          onRowMouseLeave = _this$props5.onRowMouseLeave,\n          onHover = _this$props5.onHover,\n          rowKey = _this$props5.rowKey;\n      onHover(false, rowKey);\n\n      if (onRowMouseLeave) {\n        onRowMouseLeave(record, index, event);\n      }\n    };\n\n    _this.shouldRender = props.visible;\n    _this.state = {};\n    return _this;\n  }\n\n  TableRow.prototype.componentDidMount = function componentDidMount() {\n    if (this.state.shouldRender) {\n      this.saveRowRef();\n    }\n  };\n\n  TableRow.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    return !!(this.props.visible || nextProps.visible);\n  };\n\n  TableRow.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (this.state.shouldRender && !this.rowRef) {\n      this.saveRowRef();\n    }\n  };\n\n  TableRow.prototype.setExpanedRowHeight = function setExpanedRowHeight() {\n    var _extends2;\n\n    var _props = this.props,\n        store = _props.store,\n        rowKey = _props.rowKey;\n\n    var _store$getState = store.getState(),\n        expandedRowsHeight = _store$getState.expandedRowsHeight;\n\n    var height = this.rowRef.getBoundingClientRect().height;\n    expandedRowsHeight = _extends({}, expandedRowsHeight, (_extends2 = {}, _extends2[rowKey] = height, _extends2));\n    store.setState({\n      expandedRowsHeight: expandedRowsHeight\n    });\n  };\n\n  TableRow.prototype.setRowHeight = function setRowHeight() {\n    var _props2 = this.props,\n        store = _props2.store,\n        index = _props2.index;\n    var fixedColumnsBodyRowsHeight = store.getState().fixedColumnsBodyRowsHeight.slice();\n    var height = this.rowRef.getBoundingClientRect().height;\n    fixedColumnsBodyRowsHeight[index] = height;\n    store.setState({\n      fixedColumnsBodyRowsHeight: fixedColumnsBodyRowsHeight\n    });\n  };\n\n  TableRow.prototype.getStyle = function getStyle() {\n    var _props3 = this.props,\n        height = _props3.height,\n        visible = _props3.visible;\n\n    if (height && height !== this.style.height) {\n      this.style = _extends({}, this.style, {\n        height: height\n      });\n    }\n\n    if (!visible && !this.style.display) {\n      this.style = _extends({}, this.style, {\n        display: 'none'\n      });\n    }\n\n    return this.style;\n  };\n\n  TableRow.prototype.saveRowRef = function saveRowRef() {\n    this.rowRef = ReactDOM.findDOMNode(this);\n    var _props4 = this.props,\n        isAnyColumnsFixed = _props4.isAnyColumnsFixed,\n        fixed = _props4.fixed,\n        expandedRow = _props4.expandedRow,\n        ancestorKeys = _props4.ancestorKeys;\n\n    if (!isAnyColumnsFixed) {\n      return;\n    }\n\n    if (!fixed && expandedRow) {\n      this.setExpanedRowHeight();\n    }\n\n    if (!fixed && ancestorKeys.length >= 0) {\n      this.setRowHeight();\n    }\n  };\n\n  TableRow.prototype.render = function render() {\n    if (!this.state.shouldRender) {\n      return null;\n    }\n\n    var _props5 = this.props,\n        prefixCls = _props5.prefixCls,\n        columns = _props5.columns,\n        record = _props5.record,\n        index = _props5.index,\n        onRow = _props5.onRow,\n        indent = _props5.indent,\n        indentSize = _props5.indentSize,\n        hovered = _props5.hovered,\n        height = _props5.height,\n        visible = _props5.visible,\n        components = _props5.components,\n        hasExpandIcon = _props5.hasExpandIcon,\n        renderExpandIcon = _props5.renderExpandIcon,\n        renderExpandIconCell = _props5.renderExpandIconCell;\n    var BodyRow = components.body.row;\n    var BodyCell = components.body.cell;\n    var className = this.props.className;\n\n    if (hovered) {\n      className += ' ' + prefixCls + '-hover';\n    }\n\n    var cells = [];\n    renderExpandIconCell(cells);\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n      warningOnce(column.onCellClick === undefined, 'column[onCellClick] is deprecated, please use column[onCell] instead.');\n      cells.push(React.createElement(TableCell, {\n        prefixCls: prefixCls,\n        record: record,\n        indentSize: indentSize,\n        indent: indent,\n        index: index,\n        column: column,\n        key: column.key || column.dataIndex,\n        expandIcon: hasExpandIcon(i) && renderExpandIcon(),\n        component: BodyCell\n      }));\n    }\n\n    var rowClassName = (prefixCls + ' ' + className + ' ' + prefixCls + '-level-' + indent).trim();\n    var rowProps = onRow(record, index);\n    var customStyle = rowProps ? rowProps.style : {};\n    var style = {\n      height: height\n    };\n\n    if (!visible) {\n      style.display = 'none';\n    }\n\n    style = _extends({}, style, customStyle);\n    return React.createElement(BodyRow, _extends({\n      onClick: this.onRowClick,\n      onDoubleClick: this.onRowDoubleClick,\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      onContextMenu: this.onContextMenu,\n      className: rowClassName\n    }, rowProps, {\n      style: style\n    }), cells);\n  };\n\n  return TableRow;\n}(React.Component);\n\nTableRow.propTypes = {\n  onRow: PropTypes.func,\n  onRowClick: PropTypes.func,\n  onRowDoubleClick: PropTypes.func,\n  onRowContextMenu: PropTypes.func,\n  onRowMouseEnter: PropTypes.func,\n  onRowMouseLeave: PropTypes.func,\n  record: PropTypes.object,\n  prefixCls: PropTypes.string,\n  onHover: PropTypes.func,\n  columns: PropTypes.array,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  index: PropTypes.number,\n  rowKey: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  className: PropTypes.string,\n  indent: PropTypes.number,\n  indentSize: PropTypes.number,\n  hasExpandIcon: PropTypes.func,\n  hovered: PropTypes.bool.isRequired,\n  visible: PropTypes.bool.isRequired,\n  store: PropTypes.object.isRequired,\n  fixed: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  renderExpandIcon: PropTypes.func,\n  renderExpandIconCell: PropTypes.func,\n  components: PropTypes.any,\n  expandedRow: PropTypes.bool,\n  isAnyColumnsFixed: PropTypes.bool,\n  ancestorKeys: PropTypes.array.isRequired\n};\nTableRow.defaultProps = {\n  onRow: function onRow() {},\n  onHover: function onHover() {},\n  hasExpandIcon: function hasExpandIcon() {},\n  renderExpandIcon: function renderExpandIcon() {},\n  renderExpandIconCell: function renderExpandIconCell() {}\n};\n\nfunction getRowHeight(state, props) {\n  var expandedRowsHeight = state.expandedRowsHeight,\n      fixedColumnsBodyRowsHeight = state.fixedColumnsBodyRowsHeight;\n  var fixed = props.fixed,\n      index = props.index,\n      rowKey = props.rowKey;\n\n  if (!fixed) {\n    return null;\n  }\n\n  if (expandedRowsHeight[rowKey]) {\n    return expandedRowsHeight[rowKey];\n  }\n\n  if (fixedColumnsBodyRowsHeight[index]) {\n    return fixedColumnsBodyRowsHeight[index];\n  }\n\n  return null;\n}\n\npolyfill(TableRow);\nexport default connect(function (state, props) {\n  var currentHoverKey = state.currentHoverKey,\n      expandedRowKeys = state.expandedRowKeys;\n  var rowKey = props.rowKey,\n      ancestorKeys = props.ancestorKeys;\n  var visible = ancestorKeys.length === 0 || ancestorKeys.every(function (k) {\n    return ~expandedRowKeys.indexOf(k);\n  });\n  return {\n    visible: visible,\n    hovered: currentHoverKey === rowKey,\n    height: getRowHeight(state, props)\n  };\n})(TableRow);","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/rc-table/es/TableRow.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","ReactDOM","PropTypes","connect","polyfill","TableCell","warningOnce","TableRow","_React$Component","getDerivedStateFromProps","nextProps","prevState","visible","shouldRender","props","_this","call","onRowClick","event","_this$props","record","index","onRowDoubleClick","_this$props2","onContextMenu","_this$props3","onRowContextMenu","onMouseEnter","_this$props4","onRowMouseEnter","onHover","rowKey","onMouseLeave","_this$props5","onRowMouseLeave","state","prototype","componentDidMount","saveRowRef","shouldComponentUpdate","componentDidUpdate","rowRef","setExpanedRowHeight","_extends2","_props","store","_store$getState","getState","expandedRowsHeight","height","getBoundingClientRect","setState","setRowHeight","_props2","fixedColumnsBodyRowsHeight","slice","getStyle","_props3","style","display","findDOMNode","_props4","isAnyColumnsFixed","fixed","expandedRow","ancestorKeys","length","render","_props5","prefixCls","columns","onRow","indent","indentSize","hovered","components","hasExpandIcon","renderExpandIcon","renderExpandIconCell","BodyRow","body","row","BodyCell","cell","className","cells","i","column","onCellClick","undefined","push","createElement","key","dataIndex","expandIcon","component","rowClassName","trim","rowProps","customStyle","onClick","onDoubleClick","Component","propTypes","func","object","string","array","oneOfType","number","isRequired","bool","any","defaultProps","getRowHeight","currentHoverKey","expandedRowKeys","every","k","indexOf"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'mini-store';\nimport { polyfill } from 'react-lifecycles-compat';\nimport TableCell from './TableCell';\nimport { warningOnce } from './utils';\n\nvar TableRow = function (_React$Component) {\n  _inherits(TableRow, _React$Component);\n\n  TableRow.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    if (prevState.visible || !prevState.visible && nextProps.visible) {\n      return {\n        shouldRender: true,\n        visible: nextProps.visible\n      };\n    }\n    return {\n      visible: nextProps.visible\n    };\n  };\n\n  function TableRow(props) {\n    _classCallCheck(this, TableRow);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.onRowClick = function (event) {\n      var _this$props = _this.props,\n          record = _this$props.record,\n          index = _this$props.index,\n          onRowClick = _this$props.onRowClick;\n\n      if (onRowClick) {\n        onRowClick(record, index, event);\n      }\n    };\n\n    _this.onRowDoubleClick = function (event) {\n      var _this$props2 = _this.props,\n          record = _this$props2.record,\n          index = _this$props2.index,\n          onRowDoubleClick = _this$props2.onRowDoubleClick;\n\n      if (onRowDoubleClick) {\n        onRowDoubleClick(record, index, event);\n      }\n    };\n\n    _this.onContextMenu = function (event) {\n      var _this$props3 = _this.props,\n          record = _this$props3.record,\n          index = _this$props3.index,\n          onRowContextMenu = _this$props3.onRowContextMenu;\n\n      if (onRowContextMenu) {\n        onRowContextMenu(record, index, event);\n      }\n    };\n\n    _this.onMouseEnter = function (event) {\n      var _this$props4 = _this.props,\n          record = _this$props4.record,\n          index = _this$props4.index,\n          onRowMouseEnter = _this$props4.onRowMouseEnter,\n          onHover = _this$props4.onHover,\n          rowKey = _this$props4.rowKey;\n\n      onHover(true, rowKey);\n      if (onRowMouseEnter) {\n        onRowMouseEnter(record, index, event);\n      }\n    };\n\n    _this.onMouseLeave = function (event) {\n      var _this$props5 = _this.props,\n          record = _this$props5.record,\n          index = _this$props5.index,\n          onRowMouseLeave = _this$props5.onRowMouseLeave,\n          onHover = _this$props5.onHover,\n          rowKey = _this$props5.rowKey;\n\n      onHover(false, rowKey);\n      if (onRowMouseLeave) {\n        onRowMouseLeave(record, index, event);\n      }\n    };\n\n    _this.shouldRender = props.visible;\n\n    _this.state = {};\n    return _this;\n  }\n\n  TableRow.prototype.componentDidMount = function componentDidMount() {\n    if (this.state.shouldRender) {\n      this.saveRowRef();\n    }\n  };\n\n  TableRow.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    return !!(this.props.visible || nextProps.visible);\n  };\n\n  TableRow.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (this.state.shouldRender && !this.rowRef) {\n      this.saveRowRef();\n    }\n  };\n\n  TableRow.prototype.setExpanedRowHeight = function setExpanedRowHeight() {\n    var _extends2;\n\n    var _props = this.props,\n        store = _props.store,\n        rowKey = _props.rowKey;\n\n    var _store$getState = store.getState(),\n        expandedRowsHeight = _store$getState.expandedRowsHeight;\n\n    var height = this.rowRef.getBoundingClientRect().height;\n    expandedRowsHeight = _extends({}, expandedRowsHeight, (_extends2 = {}, _extends2[rowKey] = height, _extends2));\n    store.setState({ expandedRowsHeight: expandedRowsHeight });\n  };\n\n  TableRow.prototype.setRowHeight = function setRowHeight() {\n    var _props2 = this.props,\n        store = _props2.store,\n        index = _props2.index;\n\n    var fixedColumnsBodyRowsHeight = store.getState().fixedColumnsBodyRowsHeight.slice();\n    var height = this.rowRef.getBoundingClientRect().height;\n    fixedColumnsBodyRowsHeight[index] = height;\n    store.setState({ fixedColumnsBodyRowsHeight: fixedColumnsBodyRowsHeight });\n  };\n\n  TableRow.prototype.getStyle = function getStyle() {\n    var _props3 = this.props,\n        height = _props3.height,\n        visible = _props3.visible;\n\n\n    if (height && height !== this.style.height) {\n      this.style = _extends({}, this.style, { height: height });\n    }\n\n    if (!visible && !this.style.display) {\n      this.style = _extends({}, this.style, { display: 'none' });\n    }\n\n    return this.style;\n  };\n\n  TableRow.prototype.saveRowRef = function saveRowRef() {\n    this.rowRef = ReactDOM.findDOMNode(this);\n\n    var _props4 = this.props,\n        isAnyColumnsFixed = _props4.isAnyColumnsFixed,\n        fixed = _props4.fixed,\n        expandedRow = _props4.expandedRow,\n        ancestorKeys = _props4.ancestorKeys;\n\n\n    if (!isAnyColumnsFixed) {\n      return;\n    }\n\n    if (!fixed && expandedRow) {\n      this.setExpanedRowHeight();\n    }\n\n    if (!fixed && ancestorKeys.length >= 0) {\n      this.setRowHeight();\n    }\n  };\n\n  TableRow.prototype.render = function render() {\n    if (!this.state.shouldRender) {\n      return null;\n    }\n\n    var _props5 = this.props,\n        prefixCls = _props5.prefixCls,\n        columns = _props5.columns,\n        record = _props5.record,\n        index = _props5.index,\n        onRow = _props5.onRow,\n        indent = _props5.indent,\n        indentSize = _props5.indentSize,\n        hovered = _props5.hovered,\n        height = _props5.height,\n        visible = _props5.visible,\n        components = _props5.components,\n        hasExpandIcon = _props5.hasExpandIcon,\n        renderExpandIcon = _props5.renderExpandIcon,\n        renderExpandIconCell = _props5.renderExpandIconCell;\n\n\n    var BodyRow = components.body.row;\n    var BodyCell = components.body.cell;\n\n    var className = this.props.className;\n\n\n    if (hovered) {\n      className += ' ' + prefixCls + '-hover';\n    }\n\n    var cells = [];\n\n    renderExpandIconCell(cells);\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n\n      warningOnce(column.onCellClick === undefined, 'column[onCellClick] is deprecated, please use column[onCell] instead.');\n\n      cells.push(React.createElement(TableCell, {\n        prefixCls: prefixCls,\n        record: record,\n        indentSize: indentSize,\n        indent: indent,\n        index: index,\n        column: column,\n        key: column.key || column.dataIndex,\n        expandIcon: hasExpandIcon(i) && renderExpandIcon(),\n        component: BodyCell\n      }));\n    }\n\n    var rowClassName = (prefixCls + ' ' + className + ' ' + prefixCls + '-level-' + indent).trim();\n\n    var rowProps = onRow(record, index);\n    var customStyle = rowProps ? rowProps.style : {};\n    var style = { height: height };\n\n    if (!visible) {\n      style.display = 'none';\n    }\n\n    style = _extends({}, style, customStyle);\n\n    return React.createElement(\n      BodyRow,\n      _extends({\n        onClick: this.onRowClick,\n        onDoubleClick: this.onRowDoubleClick,\n        onMouseEnter: this.onMouseEnter,\n        onMouseLeave: this.onMouseLeave,\n        onContextMenu: this.onContextMenu,\n        className: rowClassName\n      }, rowProps, {\n        style: style\n      }),\n      cells\n    );\n  };\n\n  return TableRow;\n}(React.Component);\n\nTableRow.propTypes = {\n  onRow: PropTypes.func,\n  onRowClick: PropTypes.func,\n  onRowDoubleClick: PropTypes.func,\n  onRowContextMenu: PropTypes.func,\n  onRowMouseEnter: PropTypes.func,\n  onRowMouseLeave: PropTypes.func,\n  record: PropTypes.object,\n  prefixCls: PropTypes.string,\n  onHover: PropTypes.func,\n  columns: PropTypes.array,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  index: PropTypes.number,\n  rowKey: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  className: PropTypes.string,\n  indent: PropTypes.number,\n  indentSize: PropTypes.number,\n  hasExpandIcon: PropTypes.func,\n  hovered: PropTypes.bool.isRequired,\n  visible: PropTypes.bool.isRequired,\n  store: PropTypes.object.isRequired,\n  fixed: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  renderExpandIcon: PropTypes.func,\n  renderExpandIconCell: PropTypes.func,\n  components: PropTypes.any,\n  expandedRow: PropTypes.bool,\n  isAnyColumnsFixed: PropTypes.bool,\n  ancestorKeys: PropTypes.array.isRequired\n};\nTableRow.defaultProps = {\n  onRow: function onRow() {},\n  onHover: function onHover() {},\n  hasExpandIcon: function hasExpandIcon() {},\n  renderExpandIcon: function renderExpandIcon() {},\n  renderExpandIconCell: function renderExpandIconCell() {}\n};\n\n\nfunction getRowHeight(state, props) {\n  var expandedRowsHeight = state.expandedRowsHeight,\n      fixedColumnsBodyRowsHeight = state.fixedColumnsBodyRowsHeight;\n  var fixed = props.fixed,\n      index = props.index,\n      rowKey = props.rowKey;\n\n\n  if (!fixed) {\n    return null;\n  }\n\n  if (expandedRowsHeight[rowKey]) {\n    return expandedRowsHeight[rowKey];\n  }\n\n  if (fixedColumnsBodyRowsHeight[index]) {\n    return fixedColumnsBodyRowsHeight[index];\n  }\n\n  return null;\n}\n\npolyfill(TableRow);\n\nexport default connect(function (state, props) {\n  var currentHoverKey = state.currentHoverKey,\n      expandedRowKeys = state.expandedRowKeys;\n  var rowKey = props.rowKey,\n      ancestorKeys = props.ancestorKeys;\n\n  var visible = ancestorKeys.length === 0 || ancestorKeys.every(function (k) {\n    return ~expandedRowKeys.indexOf(k);\n  });\n\n  return {\n    visible: visible,\n    hovered: currentHoverKey === rowKey,\n    height: getRowHeight(state, props)\n  };\n})(TableRow);"]},"metadata":{},"sourceType":"module"}