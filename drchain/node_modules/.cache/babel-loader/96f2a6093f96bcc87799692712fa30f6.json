{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport createReactClass from 'create-react-class';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport CommonMixin from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n\n  return arr;\n}\n\nfunction onInputSelect(direction, value) {\n  if (!value) {\n    return;\n  }\n\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue);\n}\n\nvar RangeCalendar = createReactClass({\n  displayName: 'RangeCalendar',\n  propTypes: {\n    prefixCls: PropTypes.string,\n    dateInputPlaceholder: PropTypes.any,\n    defaultValue: PropTypes.any,\n    value: PropTypes.any,\n    hoverValue: PropTypes.any,\n    mode: PropTypes.arrayOf(PropTypes.oneOf(['date', 'month', 'year', 'decade'])),\n    showDateInput: PropTypes.bool,\n    timePicker: PropTypes.any,\n    showOk: PropTypes.bool,\n    showToday: PropTypes.bool,\n    defaultSelectedValue: PropTypes.array,\n    selectedValue: PropTypes.array,\n    onOk: PropTypes.func,\n    showClear: PropTypes.bool,\n    locale: PropTypes.object,\n    onChange: PropTypes.func,\n    onSelect: PropTypes.func,\n    onValueChange: PropTypes.func,\n    onHoverChange: PropTypes.func,\n    onPanelChange: PropTypes.func,\n    format: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n    onClear: PropTypes.func,\n    type: PropTypes.any,\n    disabledDate: PropTypes.func,\n    disabledTime: PropTypes.func\n  },\n  mixins: [CommonMixin],\n  getDefaultProps: function getDefaultProps() {\n    return {\n      type: 'both',\n      defaultSelectedValue: [],\n      onValueChange: noop,\n      onHoverChange: noop,\n      onPanelChange: noop,\n      disabledTime: noop,\n      onInputSelect: noop,\n      showToday: true,\n      showDateInput: true\n    };\n  },\n  getInitialState: function getInitialState() {\n    var props = this.props;\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    return {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date']\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n    var state = this.state;\n    var newState = {};\n\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n      this.setState(newState);\n    }\n\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      this.setState({\n        hoverValue: nextProps.hoverValue\n      });\n    }\n\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n      this.setState(newState);\n    }\n\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      this.setState({\n        mode: nextProps.mode\n      });\n    }\n  },\n  onDatePanelEnter: function onDatePanelEnter() {\n    if (this.hasSelectedValue()) {\n      this.fireHoverValueChange(this.state.selectedValue.concat());\n    }\n  },\n  onDatePanelLeave: function onDatePanelLeave() {\n    if (this.hasSelectedValue()) {\n      this.fireHoverValueChange([]);\n    }\n  },\n  onSelect: function onSelect(value) {\n    var type = this.props.type;\n    var _state = this.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n    var nextSelectedValue = void 0;\n\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (this.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && this.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n\n      if (startValue && this.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    this.fireSelectValueChange(nextSelectedValue);\n  },\n  onKeyDown: function onKeyDown(event) {\n    var _this = this;\n\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var _state2 = this.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = this.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate; // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n\n        _this.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this.onDayHover(nextHoverTime);\n        }\n      } // Find origin hover time on value index\n\n\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n\n          _this.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n\n          _this.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            this.onSelect(lastValue);\n          }\n\n          event.preventDefault();\n          return;\n        }\n\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n\n    }\n  },\n  onDayHover: function onDayHover(value) {\n    var hoverValue = [];\n    var _state3 = this.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = this.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = this.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = this.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (this.state.hoverValue.length) {\n          this.setState({\n            hoverValue: []\n          });\n        }\n\n        return hoverValue;\n      }\n\n      hoverValue = this.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n\n    this.fireHoverValueChange(hoverValue);\n    return hoverValue;\n  },\n  onToday: function onToday() {\n    var startValue = getTodayTime(this.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    this.setState({\n      value: [startValue, endValue]\n    });\n  },\n  onOpenTimePicker: function onOpenTimePicker() {\n    this.setState({\n      showTimePicker: true\n    });\n  },\n  onCloseTimePicker: function onCloseTimePicker() {\n    this.setState({\n      showTimePicker: false\n    });\n  },\n  onOk: function onOk() {\n    var selectedValue = this.state.selectedValue;\n\n    if (this.isAllowedDateAndTime(selectedValue)) {\n      this.props.onOk(this.state.selectedValue);\n    }\n  },\n  onStartInputSelect: function onStartInputSelect() {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(this, args);\n  },\n  onEndInputSelect: function onEndInputSelect() {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(this, args);\n  },\n  onStartValueChange: function onStartValueChange(leftValue) {\n    var value = [].concat(this.state.value);\n    value[0] = leftValue;\n    return this.fireValueChange(value);\n  },\n  onEndValueChange: function onEndValueChange(rightValue) {\n    var value = [].concat(this.state.value);\n    value[1] = rightValue;\n    return this.fireValueChange(value);\n  },\n  onStartPanelChange: function onStartPanelChange(value, mode) {\n    var props = this.props,\n        state = this.state;\n    var newMode = [mode, state.mode[1]];\n\n    if (!('mode' in props)) {\n      this.setState({\n        mode: newMode\n      });\n    }\n\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  },\n  onEndPanelChange: function onEndPanelChange(value, mode) {\n    var props = this.props,\n        state = this.state;\n    var newMode = [state.mode[0], mode];\n\n    if (!('mode' in props)) {\n      this.setState({\n        mode: newMode\n      });\n    }\n\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  },\n  getStartValue: function getStartValue() {\n    var value = this.state.value[0];\n    var selectedValue = this.state.selectedValue; // keep selectedTime when select date\n\n    if (selectedValue[0] && this.props.timePicker) {\n      value = value.clone();\n      syncTime(selectedValue[0], value);\n    }\n\n    if (this.state.showTimePicker && selectedValue[0]) {\n      return selectedValue[0];\n    }\n\n    return value;\n  },\n  getEndValue: function getEndValue() {\n    var _state4 = this.state,\n        value = _state4.value,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker;\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month'); // keep selectedTime when select date\n\n    if (selectedValue[1] && this.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n\n    if (showTimePicker) {\n      return selectedValue[1] ? selectedValue[1] : this.getStartValue();\n    }\n\n    return endValue;\n  },\n  // get disabled hours for second picker\n  getEndDisableTime: function getEndDisableTime() {\n    var _state5 = this.state,\n        selectedValue = _state5.selectedValue,\n        value = _state5.value;\n    var disabledTime = this.props.disabledTime;\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone(); // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n\n          return olddisabledSeconds;\n        }\n      };\n    }\n\n    return userSettingDisabledTime;\n  },\n  isAllowedDateAndTime: function isAllowedDateAndTime(selectedValue) {\n    return isAllowedDate(selectedValue[0], this.props.disabledDate, this.disabledStartTime) && isAllowedDate(selectedValue[1], this.props.disabledDate, this.disabledEndTime);\n  },\n  isMonthYearPanelShow: function isMonthYearPanelShow(mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  },\n  hasSelectedValue: function hasSelectedValue() {\n    var selectedValue = this.state.selectedValue;\n    return !!selectedValue[1] && !!selectedValue[0];\n  },\n  compare: function compare(v1, v2) {\n    if (this.props.timePicker) {\n      return v1.diff(v2);\n    }\n\n    return v1.diff(v2, 'days');\n  },\n  fireSelectValueChange: function fireSelectValueChange(selectedValue, direct) {\n    var timePicker = this.props.timePicker;\n    var prevSelectedValue = this.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in this.props)) {\n      this.setState({\n        selectedValue: selectedValue\n      });\n    } // 尚未选择过时间，直接输入的话\n\n\n    if (!this.state.selectedValue[0] || !this.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      this.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      this.setState({\n        firstSelectedValue: selectedValue[0]\n      });\n      this.fireHoverValueChange(selectedValue.concat());\n    }\n\n    this.props.onChange(selectedValue);\n\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      this.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      this.fireHoverValueChange([]);\n      this.props.onSelect(selectedValue);\n    }\n  },\n  fireValueChange: function fireValueChange(value) {\n    var props = this.props;\n\n    if (!('value' in props)) {\n      this.setState({\n        value: value\n      });\n    }\n\n    props.onValueChange(value);\n  },\n  fireHoverValueChange: function fireHoverValueChange(hoverValue) {\n    var props = this.props;\n\n    if (!('hoverValue' in props)) {\n      this.setState({\n        hoverValue: hoverValue\n      });\n    }\n\n    props.onHoverChange(hoverValue);\n  },\n  clear: function clear() {\n    this.fireSelectValueChange([], true);\n    this.props.onClear();\n  },\n  disabledStartTime: function disabledStartTime(time) {\n    return this.props.disabledTime(time, 'start');\n  },\n  disabledEndTime: function disabledEndTime(time) {\n    return this.props.disabledTime(time, 'end');\n  },\n  disabledStartMonth: function disabledStartMonth(month) {\n    var value = this.state.value;\n    return month.isSameOrAfter(value[1], 'month');\n  },\n  disabledEndMonth: function disabledEndMonth(month) {\n    var value = this.state.value;\n    return month.isSameOrBefore(value[0], 'month');\n  },\n  render: function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month(); // console.warn('Render:', selectedValue.map(t => t.format('YYYY-MM-DD')).join(', '));\n    // console.log('start:', startValue.format('YYYY-MM-DD'));\n    // console.log('end:', endValue.format('YYYY-MM-DD'));\n\n    return React.createElement('div', {\n      ref: this.saveRoot,\n      className: classes,\n      style: props.style,\n      tabIndex: '0',\n      onKeyDown: this.onKeyDown\n    }, props.renderSidebar(), React.createElement('div', {\n      className: prefixCls + '-panel'\n    }, showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n      className: prefixCls + '-clear-btn',\n      role: 'button',\n      title: locale.clear,\n      onClick: this.clear\n    }) : null, React.createElement('div', {\n      className: prefixCls + '-date-panel',\n      onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n      onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n    }, React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'left',\n      disabledTime: this.disabledStartTime,\n      disabledMonth: this.disabledStartMonth,\n      format: this.getFormat(),\n      value: startValue,\n      mode: mode[0],\n      placeholder: placeholder1,\n      onInputSelect: this.onStartInputSelect,\n      onValueChange: this.onStartValueChange,\n      onPanelChange: this.onStartPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker,\n      enablePrev: true,\n      enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1])\n    })), React.createElement('span', {\n      className: prefixCls + '-range-middle'\n    }, '~'), React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'right',\n      format: this.getFormat(),\n      timePickerDisabledTime: this.getEndDisableTime(),\n      placeholder: placeholder2,\n      value: endValue,\n      mode: mode[1],\n      onInputSelect: this.onEndInputSelect,\n      onValueChange: this.onEndValueChange,\n      onPanelChange: this.onEndPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker,\n      disabledTime: this.disabledEndTime,\n      disabledMonth: this.disabledEndMonth,\n      enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n      enableNext: true\n    }))), React.createElement('div', {\n      className: cls\n    }, props.renderFooter(), showToday || props.timePicker || showOkButton ? React.createElement('div', {\n      className: prefixCls + '-footer-btn'\n    }, showToday ? React.createElement(TodayButton, _extends({}, props, {\n      disabled: isTodayInView,\n      value: state.value[0],\n      onToday: this.onToday,\n      text: locale.backToToday\n    })) : null, props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n      showTimePicker: showTimePicker,\n      onOpenTimePicker: this.onOpenTimePicker,\n      onCloseTimePicker: this.onCloseTimePicker,\n      timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n    })) : null, showOkButton ? React.createElement(OkButton, _extends({}, props, {\n      onOk: this.onOk,\n      okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n    })) : null) : null)));\n  }\n});\nexport default RangeCalendar;","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/rc-calendar/es/RangeCalendar.js"],"names":["_extends","React","createReactClass","PropTypes","moment","classnames","KeyCode","CalendarPart","TodayButton","OkButton","TimePickerButton","CommonMixin","syncTime","getTodayTime","isAllowedDate","goTime","goStartMonth","goEndMonth","includesTime","noop","isEmptyArray","arr","Array","isArray","length","every","i","isArraysEqual","a","b","getValueFromSelectedValue","selectedValue","start","end","newEnd","isSame","clone","add","normalizeAnchor","props","init","defaultSelectedValue","value","defaultValue","normalizedValue","generateOptions","extraOptionGen","concat","indexOf","push","onInputSelect","direction","originalValue","state","index","compare","showTimePicker","undefined","fireSelectValueChange","RangeCalendar","displayName","propTypes","prefixCls","string","dateInputPlaceholder","any","hoverValue","mode","arrayOf","oneOf","showDateInput","bool","timePicker","showOk","showToday","array","onOk","func","showClear","locale","object","onChange","onSelect","onValueChange","onHoverChange","onPanelChange","format","oneOfType","onClear","type","disabledDate","disabledTime","mixins","getDefaultProps","getInitialState","prevSelectedValue","firstSelectedValue","componentWillReceiveProps","nextProps","newState","setState","onDatePanelEnter","hasSelectedValue","fireHoverValueChange","onDatePanelLeave","_state","nextSelectedValue","endValue","startValue","onKeyDown","event","_this","target","nodeName","toLowerCase","keyCode","ctrlKey","metaKey","_state2","_props","updateHoverPoint","currentHoverTime","nextHoverTime","nextHoverValue","onDayHover","miss","some","ht","newValue","slice","sort","t1","t2","valueOf","fireValueChange","oriValueIndex","findIndex","time","_newValue","preventDefault","DOWN","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","ENTER","lastValue","_state3","onToday","onOpenTimePicker","onCloseTimePicker","isAllowedDateAndTime","onStartInputSelect","_len","arguments","oargs","_key","args","apply","onEndInputSelect","_len2","_key2","onStartValueChange","leftValue","onEndValueChange","rightValue","onStartPanelChange","newMode","onEndPanelChange","getStartValue","getEndValue","_state4","getEndDisableTime","_state5","userSettingDisabledTime","hours","hour","minutes","minute","second","_disabledHours","disabledHours","_disabledMinutes","disabledMinutes","_disabledSeconds","disabledSeconds","oldDisabledMinutes","olddisabledSeconds","disabledStartTime","disabledEndTime","isMonthYearPanelShow","v1","v2","diff","direct","timePickerDefaultValue","clear","disabledStartMonth","month","isSameOrAfter","disabledEndMonth","isSameOrBefore","render","_className","_classnames","className","visible","showWeekNumber","classes","newProps","placeholder1","placeholder2","showOkButton","cls","todayTime","thisMonth","thisYear","year","isTodayInView","nextMonthOfStart","isClosestMonths","createElement","ref","saveRoot","style","tabIndex","renderSidebar","role","title","onClick","onMouseLeave","onMouseEnter","disabledMonth","getFormat","placeholder","enablePrev","enableNext","timePickerDisabledTime","renderFooter","disabled","text","backToToday","timePickerDisabled","okDisabled"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport createReactClass from 'create-react-class';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport CommonMixin from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\n\nfunction onInputSelect(direction, value) {\n  if (!value) {\n    return;\n  }\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue);\n}\n\nvar RangeCalendar = createReactClass({\n  displayName: 'RangeCalendar',\n\n  propTypes: {\n    prefixCls: PropTypes.string,\n    dateInputPlaceholder: PropTypes.any,\n    defaultValue: PropTypes.any,\n    value: PropTypes.any,\n    hoverValue: PropTypes.any,\n    mode: PropTypes.arrayOf(PropTypes.oneOf(['date', 'month', 'year', 'decade'])),\n    showDateInput: PropTypes.bool,\n    timePicker: PropTypes.any,\n    showOk: PropTypes.bool,\n    showToday: PropTypes.bool,\n    defaultSelectedValue: PropTypes.array,\n    selectedValue: PropTypes.array,\n    onOk: PropTypes.func,\n    showClear: PropTypes.bool,\n    locale: PropTypes.object,\n    onChange: PropTypes.func,\n    onSelect: PropTypes.func,\n    onValueChange: PropTypes.func,\n    onHoverChange: PropTypes.func,\n    onPanelChange: PropTypes.func,\n    format: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n    onClear: PropTypes.func,\n    type: PropTypes.any,\n    disabledDate: PropTypes.func,\n    disabledTime: PropTypes.func\n  },\n\n  mixins: [CommonMixin],\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      type: 'both',\n      defaultSelectedValue: [],\n      onValueChange: noop,\n      onHoverChange: noop,\n      onPanelChange: noop,\n      disabledTime: noop,\n      onInputSelect: noop,\n      showToday: true,\n      showDateInput: true\n    };\n  },\n  getInitialState: function getInitialState() {\n    var props = this.props;\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    return {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date']\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n    var state = this.state;\n\n    var newState = {};\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n      this.setState(newState);\n    }\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      this.setState({ hoverValue: nextProps.hoverValue });\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n      this.setState(newState);\n    }\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      this.setState({ mode: nextProps.mode });\n    }\n  },\n  onDatePanelEnter: function onDatePanelEnter() {\n    if (this.hasSelectedValue()) {\n      this.fireHoverValueChange(this.state.selectedValue.concat());\n    }\n  },\n  onDatePanelLeave: function onDatePanelLeave() {\n    if (this.hasSelectedValue()) {\n      this.fireHoverValueChange([]);\n    }\n  },\n  onSelect: function onSelect(value) {\n    var type = this.props.type;\n    var _state = this.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n\n    var nextSelectedValue = void 0;\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (this.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && this.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n      if (startValue && this.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    this.fireSelectValueChange(nextSelectedValue);\n  },\n  onKeyDown: function onKeyDown(event) {\n    var _this = this;\n\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n\n    var ctrlKey = event.ctrlKey || event.metaKey;\n\n    var _state2 = this.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = this.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate;\n\n    // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n        _this.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this.onDayHover(nextHoverTime);\n        }\n      }\n\n      // Find origin hover time on value index\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n          _this.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n          _this.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n        return;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n        return;\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            this.onSelect(lastValue);\n          }\n          event.preventDefault();\n          return;\n        }\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n    }\n  },\n  onDayHover: function onDayHover(value) {\n    var hoverValue = [];\n    var _state3 = this.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = this.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = this.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = this.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (this.state.hoverValue.length) {\n          this.setState({ hoverValue: [] });\n        }\n        return hoverValue;\n      }\n      hoverValue = this.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n    this.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  },\n  onToday: function onToday() {\n    var startValue = getTodayTime(this.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    this.setState({ value: [startValue, endValue] });\n  },\n  onOpenTimePicker: function onOpenTimePicker() {\n    this.setState({\n      showTimePicker: true\n    });\n  },\n  onCloseTimePicker: function onCloseTimePicker() {\n    this.setState({\n      showTimePicker: false\n    });\n  },\n  onOk: function onOk() {\n    var selectedValue = this.state.selectedValue;\n\n    if (this.isAllowedDateAndTime(selectedValue)) {\n      this.props.onOk(this.state.selectedValue);\n    }\n  },\n  onStartInputSelect: function onStartInputSelect() {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(this, args);\n  },\n  onEndInputSelect: function onEndInputSelect() {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(this, args);\n  },\n  onStartValueChange: function onStartValueChange(leftValue) {\n    var value = [].concat(this.state.value);\n    value[0] = leftValue;\n    return this.fireValueChange(value);\n  },\n  onEndValueChange: function onEndValueChange(rightValue) {\n    var value = [].concat(this.state.value);\n    value[1] = rightValue;\n    return this.fireValueChange(value);\n  },\n  onStartPanelChange: function onStartPanelChange(value, mode) {\n    var props = this.props,\n        state = this.state;\n\n    var newMode = [mode, state.mode[1]];\n    if (!('mode' in props)) {\n      this.setState({\n        mode: newMode\n      });\n    }\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  },\n  onEndPanelChange: function onEndPanelChange(value, mode) {\n    var props = this.props,\n        state = this.state;\n\n    var newMode = [state.mode[0], mode];\n    if (!('mode' in props)) {\n      this.setState({\n        mode: newMode\n      });\n    }\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  },\n  getStartValue: function getStartValue() {\n    var value = this.state.value[0];\n    var selectedValue = this.state.selectedValue;\n    // keep selectedTime when select date\n    if (selectedValue[0] && this.props.timePicker) {\n      value = value.clone();\n      syncTime(selectedValue[0], value);\n    }\n    if (this.state.showTimePicker && selectedValue[0]) {\n      return selectedValue[0];\n    }\n    return value;\n  },\n  getEndValue: function getEndValue() {\n    var _state4 = this.state,\n        value = _state4.value,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker;\n\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\n    // keep selectedTime when select date\n    if (selectedValue[1] && this.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n    if (showTimePicker) {\n      return selectedValue[1] ? selectedValue[1] : this.getStartValue();\n    }\n    return endValue;\n  },\n\n  // get disabled hours for second picker\n  getEndDisableTime: function getEndDisableTime() {\n    var _state5 = this.state,\n        selectedValue = _state5.selectedValue,\n        value = _state5.value;\n    var disabledTime = this.props.disabledTime;\n\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\n    // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n          return olddisabledSeconds;\n        }\n      };\n    }\n    return userSettingDisabledTime;\n  },\n  isAllowedDateAndTime: function isAllowedDateAndTime(selectedValue) {\n    return isAllowedDate(selectedValue[0], this.props.disabledDate, this.disabledStartTime) && isAllowedDate(selectedValue[1], this.props.disabledDate, this.disabledEndTime);\n  },\n  isMonthYearPanelShow: function isMonthYearPanelShow(mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  },\n  hasSelectedValue: function hasSelectedValue() {\n    var selectedValue = this.state.selectedValue;\n\n    return !!selectedValue[1] && !!selectedValue[0];\n  },\n  compare: function compare(v1, v2) {\n    if (this.props.timePicker) {\n      return v1.diff(v2);\n    }\n    return v1.diff(v2, 'days');\n  },\n  fireSelectValueChange: function fireSelectValueChange(selectedValue, direct) {\n    var timePicker = this.props.timePicker;\n    var prevSelectedValue = this.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in this.props)) {\n      this.setState({\n        selectedValue: selectedValue\n      });\n    }\n\n    // 尚未选择过时间，直接输入的话\n    if (!this.state.selectedValue[0] || !this.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      this.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      this.setState({ firstSelectedValue: selectedValue[0] });\n      this.fireHoverValueChange(selectedValue.concat());\n    }\n    this.props.onChange(selectedValue);\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      this.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      this.fireHoverValueChange([]);\n      this.props.onSelect(selectedValue);\n    }\n  },\n  fireValueChange: function fireValueChange(value) {\n    var props = this.props;\n    if (!('value' in props)) {\n      this.setState({\n        value: value\n      });\n    }\n    props.onValueChange(value);\n  },\n  fireHoverValueChange: function fireHoverValueChange(hoverValue) {\n    var props = this.props;\n    if (!('hoverValue' in props)) {\n      this.setState({ hoverValue: hoverValue });\n    }\n    props.onHoverChange(hoverValue);\n  },\n  clear: function clear() {\n    this.fireSelectValueChange([], true);\n    this.props.onClear();\n  },\n  disabledStartTime: function disabledStartTime(time) {\n    return this.props.disabledTime(time, 'start');\n  },\n  disabledEndTime: function disabledEndTime(time) {\n    return this.props.disabledTime(time, 'end');\n  },\n  disabledStartMonth: function disabledStartMonth(month) {\n    var value = this.state.value;\n\n    return month.isSameOrAfter(value[1], 'month');\n  },\n  disabledEndMonth: function disabledEndMonth(month) {\n    var value = this.state.value;\n\n    return month.isSameOrBefore(value[0], 'month');\n  },\n  render: function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n\n    // console.warn('Render:', selectedValue.map(t => t.format('YYYY-MM-DD')).join(', '));\n    // console.log('start:', startValue.format('YYYY-MM-DD'));\n    // console.log('end:', endValue.format('YYYY-MM-DD'));\n\n    return React.createElement(\n      'div',\n      {\n        ref: this.saveRoot,\n        className: classes,\n        style: props.style,\n        tabIndex: '0',\n        onKeyDown: this.onKeyDown\n      },\n      props.renderSidebar(),\n      React.createElement(\n        'div',\n        { className: prefixCls + '-panel' },\n        showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n          className: prefixCls + '-clear-btn',\n          role: 'button',\n          title: locale.clear,\n          onClick: this.clear\n        }) : null,\n        React.createElement(\n          'div',\n          {\n            className: prefixCls + '-date-panel',\n            onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n            onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n          },\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'left',\n            disabledTime: this.disabledStartTime,\n            disabledMonth: this.disabledStartMonth,\n            format: this.getFormat(),\n            value: startValue,\n            mode: mode[0],\n            placeholder: placeholder1,\n            onInputSelect: this.onStartInputSelect,\n            onValueChange: this.onStartValueChange,\n            onPanelChange: this.onStartPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker,\n            enablePrev: true,\n            enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1])\n          })),\n          React.createElement(\n            'span',\n            { className: prefixCls + '-range-middle' },\n            '~'\n          ),\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'right',\n            format: this.getFormat(),\n            timePickerDisabledTime: this.getEndDisableTime(),\n            placeholder: placeholder2,\n            value: endValue,\n            mode: mode[1],\n            onInputSelect: this.onEndInputSelect,\n            onValueChange: this.onEndValueChange,\n            onPanelChange: this.onEndPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker,\n            disabledTime: this.disabledEndTime,\n            disabledMonth: this.disabledEndMonth,\n            enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n            enableNext: true\n          }))\n        ),\n        React.createElement(\n          'div',\n          { className: cls },\n          props.renderFooter(),\n          showToday || props.timePicker || showOkButton ? React.createElement(\n            'div',\n            { className: prefixCls + '-footer-btn' },\n            showToday ? React.createElement(TodayButton, _extends({}, props, {\n              disabled: isTodayInView,\n              value: state.value[0],\n              onToday: this.onToday,\n              text: locale.backToToday\n            })) : null,\n            props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n              showTimePicker: showTimePicker,\n              onOpenTimePicker: this.onOpenTimePicker,\n              onCloseTimePicker: this.onCloseTimePicker,\n              timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n            })) : null,\n            showOkButton ? React.createElement(OkButton, _extends({}, props, {\n              onOk: this.onOk,\n              okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n            })) : null\n          ) : null\n        )\n      )\n    );\n  }\n});\n\nexport default RangeCalendar;"]},"metadata":{},"sourceType":"module"}