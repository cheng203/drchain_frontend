{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport Affix from '../affix';\nimport getScroll from '../_util/getScroll';\nimport getRequestAnimationFrame from '../_util/getRequestAnimationFrame';\n\nfunction getDefaultContainer() {\n  return window;\n}\n\nfunction getOffsetTop(element, container) {\n  if (!element) {\n    return 0;\n  }\n\n  if (!element.getClientRects().length) {\n    return 0;\n  }\n\n  var rect = element.getBoundingClientRect();\n\n  if (rect.width || rect.height) {\n    if (container === window) {\n      container = element.ownerDocument.documentElement;\n      return rect.top - container.clientTop;\n    }\n\n    return rect.top - container.getBoundingClientRect().top;\n  }\n\n  return rect.top;\n}\n\nfunction easeInOutCubic(t, b, c, d) {\n  var cc = c - b;\n  t /= d / 2;\n\n  if (t < 1) {\n    return cc / 2 * t * t * t + b;\n  }\n\n  return cc / 2 * ((t -= 2) * t * t + 2) + b;\n}\n\nvar reqAnimFrame = getRequestAnimationFrame();\nvar sharpMatcherRegx = /#([^#]+)$/;\n\nfunction scrollTo(href) {\n  var offsetTop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var getContainer = arguments[2];\n  var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  var container = getContainer();\n  var scrollTop = getScroll(container, true);\n  var sharpLinkMatch = sharpMatcherRegx.exec(href);\n\n  if (!sharpLinkMatch) {\n    return;\n  }\n\n  var targetElement = document.getElementById(sharpLinkMatch[1]);\n\n  if (!targetElement) {\n    return;\n  }\n\n  var eleOffsetTop = getOffsetTop(targetElement, container);\n  var targetScrollTop = scrollTop + eleOffsetTop - offsetTop;\n  var startTime = Date.now();\n\n  var frameFunc = function frameFunc() {\n    var timestamp = Date.now();\n    var time = timestamp - startTime;\n    var nextScrollTop = easeInOutCubic(time, scrollTop, targetScrollTop, 450);\n\n    if (container === window) {\n      window.scrollTo(window.pageXOffset, nextScrollTop);\n    } else {\n      container.scrollTop = nextScrollTop;\n    }\n\n    if (time < 450) {\n      reqAnimFrame(frameFunc);\n    } else {\n      callback();\n    }\n  };\n\n  reqAnimFrame(frameFunc);\n  history.pushState(null, '', href);\n}\n\nvar Anchor = function (_React$Component) {\n  _inherits(Anchor, _React$Component);\n\n  function Anchor(props) {\n    _classCallCheck(this, Anchor);\n\n    var _this = _possibleConstructorReturn(this, (Anchor.__proto__ || Object.getPrototypeOf(Anchor)).call(this, props));\n\n    _this.handleScroll = function () {\n      if (_this.animating) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          offsetTop = _this$props.offsetTop,\n          bounds = _this$props.bounds;\n\n      _this.setState({\n        activeLink: _this.getCurrentAnchor(offsetTop, bounds)\n      });\n    };\n\n    _this.handleScrollTo = function (link) {\n      var _this$props2 = _this.props,\n          offsetTop = _this$props2.offsetTop,\n          getContainer = _this$props2.getContainer;\n      _this.animating = true;\n\n      _this.setState({\n        activeLink: link\n      });\n\n      scrollTo(link, offsetTop, getContainer, function () {\n        _this.animating = false;\n      });\n    };\n\n    _this.updateInk = function () {\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      var prefixCls = _this.props.prefixCls;\n      var anchorNode = ReactDOM.findDOMNode(_this);\n      var linkNode = anchorNode.getElementsByClassName(prefixCls + '-link-title-active')[0];\n\n      if (linkNode) {\n        _this.inkNode.style.top = linkNode.offsetTop + linkNode.clientHeight / 2 - 4.5 + 'px';\n      }\n    };\n\n    _this.saveInkNode = function (node) {\n      _this.inkNode = node;\n    };\n\n    _this.state = {\n      activeLink: null\n    };\n    _this.links = [];\n    return _this;\n  }\n\n  _createClass(Anchor, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return {\n        antAnchor: {\n          registerLink: function registerLink(link) {\n            if (!_this2.links.includes(link)) {\n              _this2.links.push(link);\n            }\n          },\n          unregisterLink: function unregisterLink(link) {\n            var index = _this2.links.indexOf(link);\n\n            if (index !== -1) {\n              _this2.links.splice(index, 1);\n            }\n          },\n          activeLink: this.state.activeLink,\n          scrollTo: this.handleScrollTo\n        }\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var getContainer = this.props.getContainer;\n      this.scrollEvent = addEventListener(getContainer(), 'scroll', this.handleScroll);\n      this.handleScroll();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.scrollEvent) {\n        this.scrollEvent.remove();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.updateInk();\n    }\n  }, {\n    key: 'getCurrentAnchor',\n    value: function getCurrentAnchor() {\n      var offsetTop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var bounds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n      var activeLink = '';\n\n      if (typeof document === 'undefined') {\n        return activeLink;\n      }\n\n      var linkSections = [];\n      var getContainer = this.props.getContainer;\n      var container = getContainer();\n      this.links.forEach(function (link) {\n        var sharpLinkMatch = sharpMatcherRegx.exec(link.toString());\n\n        if (!sharpLinkMatch) {\n          return;\n        }\n\n        var target = document.getElementById(sharpLinkMatch[1]);\n\n        if (target) {\n          var top = getOffsetTop(target, container);\n\n          if (top < offsetTop + bounds) {\n            linkSections.push({\n              link: link,\n              top: top\n            });\n          }\n        }\n      });\n\n      if (linkSections.length) {\n        var maxSection = linkSections.reduce(function (prev, curr) {\n          return curr.top > prev.top ? curr : prev;\n        });\n        return maxSection.link;\n      }\n\n      return '';\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          _props$className = _props.className,\n          className = _props$className === undefined ? '' : _props$className,\n          style = _props.style,\n          offsetTop = _props.offsetTop,\n          affix = _props.affix,\n          showInkInFixed = _props.showInkInFixed,\n          children = _props.children;\n      var activeLink = this.state.activeLink;\n      var inkClass = classNames(prefixCls + '-ink-ball', {\n        visible: activeLink\n      });\n      var wrapperClass = classNames(className, prefixCls + '-wrapper');\n      var anchorClass = classNames(prefixCls, {\n        'fixed': !affix && !showInkInFixed\n      });\n\n      var wrapperStyle = _extends({\n        maxHeight: offsetTop ? 'calc(100vh - ' + offsetTop + 'px)' : '100vh'\n      }, style);\n\n      var anchorContent = React.createElement('div', {\n        className: wrapperClass,\n        style: wrapperStyle\n      }, React.createElement('div', {\n        className: anchorClass\n      }, React.createElement('div', {\n        className: prefixCls + '-ink'\n      }, React.createElement('span', {\n        className: inkClass,\n        ref: this.saveInkNode\n      })), children));\n      return !affix ? anchorContent : React.createElement(Affix, {\n        offsetTop: offsetTop\n      }, anchorContent);\n    }\n  }]);\n\n  return Anchor;\n}(React.Component);\n\nexport default Anchor;\nAnchor.defaultProps = {\n  prefixCls: 'ant-anchor',\n  affix: true,\n  showInkInFixed: false,\n  getContainer: getDefaultContainer\n};\nAnchor.childContextTypes = {\n  antAnchor: PropTypes.object\n};","map":{"version":3,"sources":["/Users/administrator/Desktop/DrChain/drchain_frontend/drchain/node_modules/antd/es/anchor/Anchor.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","ReactDOM","PropTypes","classNames","addEventListener","Affix","getScroll","getRequestAnimationFrame","getDefaultContainer","window","getOffsetTop","element","container","getClientRects","length","rect","getBoundingClientRect","width","height","ownerDocument","documentElement","top","clientTop","easeInOutCubic","t","b","c","d","cc","reqAnimFrame","sharpMatcherRegx","scrollTo","href","offsetTop","arguments","undefined","getContainer","callback","scrollTop","sharpLinkMatch","exec","targetElement","document","getElementById","eleOffsetTop","targetScrollTop","startTime","Date","now","frameFunc","timestamp","time","nextScrollTop","pageXOffset","history","pushState","Anchor","_React$Component","props","_this","__proto__","Object","getPrototypeOf","call","handleScroll","animating","_this$props","bounds","setState","activeLink","getCurrentAnchor","handleScrollTo","link","_this$props2","updateInk","prefixCls","anchorNode","findDOMNode","linkNode","getElementsByClassName","inkNode","style","clientHeight","saveInkNode","node","state","links","key","value","getChildContext","_this2","antAnchor","registerLink","includes","push","unregisterLink","index","indexOf","splice","componentDidMount","scrollEvent","componentWillUnmount","remove","componentDidUpdate","linkSections","forEach","toString","target","maxSection","reduce","prev","curr","render","_props","_props$className","className","affix","showInkInFixed","children","inkClass","visible","wrapperClass","anchorClass","wrapperStyle","maxHeight","anchorContent","createElement","ref","Component","defaultProps","childContextTypes","object"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport Affix from '../affix';\nimport getScroll from '../_util/getScroll';\nimport getRequestAnimationFrame from '../_util/getRequestAnimationFrame';\nfunction getDefaultContainer() {\n    return window;\n}\nfunction getOffsetTop(element, container) {\n    if (!element) {\n        return 0;\n    }\n    if (!element.getClientRects().length) {\n        return 0;\n    }\n    var rect = element.getBoundingClientRect();\n    if (rect.width || rect.height) {\n        if (container === window) {\n            container = element.ownerDocument.documentElement;\n            return rect.top - container.clientTop;\n        }\n        return rect.top - container.getBoundingClientRect().top;\n    }\n    return rect.top;\n}\nfunction easeInOutCubic(t, b, c, d) {\n    var cc = c - b;\n    t /= d / 2;\n    if (t < 1) {\n        return cc / 2 * t * t * t + b;\n    }\n    return cc / 2 * ((t -= 2) * t * t + 2) + b;\n}\nvar reqAnimFrame = getRequestAnimationFrame();\nvar sharpMatcherRegx = /#([^#]+)$/;\nfunction scrollTo(href) {\n    var offsetTop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var getContainer = arguments[2];\n    var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n\n    var container = getContainer();\n    var scrollTop = getScroll(container, true);\n    var sharpLinkMatch = sharpMatcherRegx.exec(href);\n    if (!sharpLinkMatch) {\n        return;\n    }\n    var targetElement = document.getElementById(sharpLinkMatch[1]);\n    if (!targetElement) {\n        return;\n    }\n    var eleOffsetTop = getOffsetTop(targetElement, container);\n    var targetScrollTop = scrollTop + eleOffsetTop - offsetTop;\n    var startTime = Date.now();\n    var frameFunc = function frameFunc() {\n        var timestamp = Date.now();\n        var time = timestamp - startTime;\n        var nextScrollTop = easeInOutCubic(time, scrollTop, targetScrollTop, 450);\n        if (container === window) {\n            window.scrollTo(window.pageXOffset, nextScrollTop);\n        } else {\n            container.scrollTop = nextScrollTop;\n        }\n        if (time < 450) {\n            reqAnimFrame(frameFunc);\n        } else {\n            callback();\n        }\n    };\n    reqAnimFrame(frameFunc);\n    history.pushState(null, '', href);\n}\n\nvar Anchor = function (_React$Component) {\n    _inherits(Anchor, _React$Component);\n\n    function Anchor(props) {\n        _classCallCheck(this, Anchor);\n\n        var _this = _possibleConstructorReturn(this, (Anchor.__proto__ || Object.getPrototypeOf(Anchor)).call(this, props));\n\n        _this.handleScroll = function () {\n            if (_this.animating) {\n                return;\n            }\n            var _this$props = _this.props,\n                offsetTop = _this$props.offsetTop,\n                bounds = _this$props.bounds;\n\n            _this.setState({\n                activeLink: _this.getCurrentAnchor(offsetTop, bounds)\n            });\n        };\n        _this.handleScrollTo = function (link) {\n            var _this$props2 = _this.props,\n                offsetTop = _this$props2.offsetTop,\n                getContainer = _this$props2.getContainer;\n\n            _this.animating = true;\n            _this.setState({ activeLink: link });\n            scrollTo(link, offsetTop, getContainer, function () {\n                _this.animating = false;\n            });\n        };\n        _this.updateInk = function () {\n            if (typeof document === 'undefined') {\n                return;\n            }\n            var prefixCls = _this.props.prefixCls;\n\n            var anchorNode = ReactDOM.findDOMNode(_this);\n            var linkNode = anchorNode.getElementsByClassName(prefixCls + '-link-title-active')[0];\n            if (linkNode) {\n                _this.inkNode.style.top = linkNode.offsetTop + linkNode.clientHeight / 2 - 4.5 + 'px';\n            }\n        };\n        _this.saveInkNode = function (node) {\n            _this.inkNode = node;\n        };\n        _this.state = {\n            activeLink: null\n        };\n        _this.links = [];\n        return _this;\n    }\n\n    _createClass(Anchor, [{\n        key: 'getChildContext',\n        value: function getChildContext() {\n            var _this2 = this;\n\n            return {\n                antAnchor: {\n                    registerLink: function registerLink(link) {\n                        if (!_this2.links.includes(link)) {\n                            _this2.links.push(link);\n                        }\n                    },\n                    unregisterLink: function unregisterLink(link) {\n                        var index = _this2.links.indexOf(link);\n                        if (index !== -1) {\n                            _this2.links.splice(index, 1);\n                        }\n                    },\n                    activeLink: this.state.activeLink,\n                    scrollTo: this.handleScrollTo\n                }\n            };\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var getContainer = this.props.getContainer;\n\n            this.scrollEvent = addEventListener(getContainer(), 'scroll', this.handleScroll);\n            this.handleScroll();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.scrollEvent) {\n                this.scrollEvent.remove();\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            this.updateInk();\n        }\n    }, {\n        key: 'getCurrentAnchor',\n        value: function getCurrentAnchor() {\n            var offsetTop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n            var bounds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n            var activeLink = '';\n            if (typeof document === 'undefined') {\n                return activeLink;\n            }\n            var linkSections = [];\n            var getContainer = this.props.getContainer;\n\n            var container = getContainer();\n            this.links.forEach(function (link) {\n                var sharpLinkMatch = sharpMatcherRegx.exec(link.toString());\n                if (!sharpLinkMatch) {\n                    return;\n                }\n                var target = document.getElementById(sharpLinkMatch[1]);\n                if (target) {\n                    var top = getOffsetTop(target, container);\n                    if (top < offsetTop + bounds) {\n                        linkSections.push({\n                            link: link,\n                            top: top\n                        });\n                    }\n                }\n            });\n            if (linkSections.length) {\n                var maxSection = linkSections.reduce(function (prev, curr) {\n                    return curr.top > prev.top ? curr : prev;\n                });\n                return maxSection.link;\n            }\n            return '';\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                prefixCls = _props.prefixCls,\n                _props$className = _props.className,\n                className = _props$className === undefined ? '' : _props$className,\n                style = _props.style,\n                offsetTop = _props.offsetTop,\n                affix = _props.affix,\n                showInkInFixed = _props.showInkInFixed,\n                children = _props.children;\n            var activeLink = this.state.activeLink;\n\n            var inkClass = classNames(prefixCls + '-ink-ball', {\n                visible: activeLink\n            });\n            var wrapperClass = classNames(className, prefixCls + '-wrapper');\n            var anchorClass = classNames(prefixCls, {\n                'fixed': !affix && !showInkInFixed\n            });\n            var wrapperStyle = _extends({ maxHeight: offsetTop ? 'calc(100vh - ' + offsetTop + 'px)' : '100vh' }, style);\n            var anchorContent = React.createElement(\n                'div',\n                { className: wrapperClass, style: wrapperStyle },\n                React.createElement(\n                    'div',\n                    { className: anchorClass },\n                    React.createElement(\n                        'div',\n                        { className: prefixCls + '-ink' },\n                        React.createElement('span', { className: inkClass, ref: this.saveInkNode })\n                    ),\n                    children\n                )\n            );\n            return !affix ? anchorContent : React.createElement(\n                Affix,\n                { offsetTop: offsetTop },\n                anchorContent\n            );\n        }\n    }]);\n\n    return Anchor;\n}(React.Component);\n\nexport default Anchor;\n\nAnchor.defaultProps = {\n    prefixCls: 'ant-anchor',\n    affix: true,\n    showInkInFixed: false,\n    getContainer: getDefaultContainer\n};\nAnchor.childContextTypes = {\n    antAnchor: PropTypes.object\n};"]},"metadata":{},"sourceType":"module"}